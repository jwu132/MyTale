{"remainingRequest":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js!/Users/justinwu/Desktop/story_personalization_system/node_modules/eslint-loader/index.js??ref--13-0!/Users/justinwu/Desktop/story_personalization_system/src/js/extwee_utils/FileConverter.js","dependencies":[{"path":"/Users/justinwu/Desktop/story_personalization_system/src/js/extwee_utils/FileConverter.js","mtime":1604692362842},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9jbGFzc0NhbGxDaGVjayA9IHJlcXVpcmUoIi9Vc2Vycy9qdXN0aW53dS9EZXNrdG9wL3N0b3J5X3BlcnNvbmFsaXphdGlvbl9zeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKTsKCnZhciBfY3JlYXRlQ2xhc3MgPSByZXF1aXJlKCIvVXNlcnMvanVzdGlud3UvRGVza3RvcC9zdG9yeV9wZXJzb25hbGl6YXRpb25fc3lzdGVtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIik7Cgp2YXIgSFRNTFBhcnNlciA9IHJlcXVpcmUoJy4vSFRNTFBhcnNlci5qcycpOwoKdmFyIFR3ZWVXcml0ZXIgPSByZXF1aXJlKCcuL1R3ZWVXcml0ZXIuanMnKTsKCnZhciBIVE1MV3JpdGVyID0gcmVxdWlyZSgnLi9IVE1MV3JpdGVyLmpzJyk7Cgp2YXIgVHdlZVBhcnNlciA9IHJlcXVpcmUoJy4vVHdlZVBhcnNlci5qcycpOwoKdmFyIFN0b3J5Rm9ybWF0UGFyc2VyID0gcmVxdWlyZSgnLi9TdG9yeUZvcm1hdFBhcnNlcicpOwoKdmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnYXhpb3MnKSwKICAgIEF4aW9zID0gX3JlcXVpcmUuZGVmYXVsdDsKLyoqCiAqIEBjbGFzcyBGaWxlQ29udmVydGVyCiAqIEBtb2R1bGUgRmlsZUNvbnZlcnRlcgogKi8KCgp2YXIgRmlsZUNvbnZlcnRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgInVzZSBzdHJpY3QiOwoKICAvKioKICAgKiBAZnVuY3Rpb24gSFR3ZWVGaWxlUmVhZGVyCiAgICogQGNsYXNzCiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRzIC0gRmlsZSBjb250ZW50IHRvIHBhcnNlCiAgKiBAcGFyYW0ge1N0cmluZ30JblN0b3J5Rm9ybWF0LSBzdG9yeSBmb3JtYXQgdG8gcGFyc2UgaW50bwogICogQHBhcmFtIHtCb29sZWFufSBpc0hUTUwgLSBGaWxlIGlzIEhUTUwKICAgKi8KICBmdW5jdGlvbiBGaWxlQ29udmVydGVyKGNvbnRlbnRzLCBpc0hUTUwpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlQ29udmVydGVyKTsKCiAgICB0aGlzLmh0bWxCbG9iID0gbnVsbDsKICAgIHRoaXMudHdlZUJsb2IgPSBudWxsOwogICAgdGhpcy5zdG9yeSA9IG51bGw7CiAgICB0aGlzLnN0b3J5Rm9ybWF0ID0gbnVsbDsKICAgIHRoaXMuY29udGVudHMgPSBjb250ZW50czsKICAgIHRoaXMuZXh0cmFjdFN0b3J5KGlzSFRNTCk7CiAgICB0aGlzLmV4dHJhY3RTdG9yeUZvcm1hdCgpOwogIH0KICAvKioKICAgICAgKiBFeHRyYWN0IHN0b3J5IGZyb20gZmlsZSBjb250ZW50cwogICAgICAqCiAgICAgICogQGZ1bmN0aW9uIGV4dHJhY3RTdG9yeQogICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNIVE1MIC0gRmlsZSBpcyBIVE1MCiAgICAgICogQHJldHVybnMge3ZvaWR9CiAgICAgICovCgoKICBfY3JlYXRlQ2xhc3MoRmlsZUNvbnZlcnRlciwgW3sKICAgIGtleTogImV4dHJhY3RTdG9yeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXh0cmFjdFN0b3J5KGlzSFRNTCkgewogICAgICBpZiAoaXNIVE1MKSB7CiAgICAgICAgdmFyIGhwYXJzZSA9IG5ldyBIVE1MUGFyc2VyKHRoaXMuY29udGVudHMpOwogICAgICAgIHRoaXMuc3RvcnkgPSBocGFyc2Uuc3Rvcnk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHRwYXJzZSA9IG5ldyBUd2VlUGFyc2VyKHRoaXMuY29udGVudHMpOwogICAgICAgIHRoaXMuc3RvcnkgPSB0cGFyc2Uuc3Rvcnk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRXh0cmFjdCBzdG9yeUZvcm1hdCBmcm9tIGZpbGUgY29udGVudHMKICAgICAqIAogICAgICogQGZ1bmN0aW9uIGV4dHJhY3RTdG9yeUZvcm1hdAogICAgICovCgogIH0sIHsKICAgIGtleTogImV4dHJhY3RTdG9yeUZvcm1hdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXh0cmFjdFN0b3J5Rm9ybWF0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgQXhpb3MuZ2V0KCIvc3Rvcnlmb3JtYXRzL2hhcmxvd2UtMy9mb3JtYXQuanMiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBmb3JtYXQgPSBuZXcgU3RvcnlGb3JtYXRQYXJzZXIocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgX3RoaXMuc3RvcnlGb3JtYXQgPSBmb3JtYXQuc3Rvcnlmb3JtYXQ7CiAgICAgIH0pOwogICAgfQogICAgLyoqCiAgICAgICAgKiBDb252ZXJ0IGZyb20gVHdlZSB0byBIVE1MCiAgICAgICAgKgogICAgICAgICogQGZ1bmN0aW9uIFR3ZWVUb0hUTUwKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjc3MgLSBFeHRyYSBjc3MKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqcyAtIEV4dHJhIGpzCiAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQogICAgICAgICovCgogIH0sIHsKICAgIGtleTogImh0bWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGh0bWwoY3NzLCBqcykgewogICAgICB2YXIgaHRtbFdyaXRlID0gbmV3IEhUTUxXcml0ZXIodGhpcy5zdG9yeSwgdGhpcy5zdG9yeUZvcm1hdCwgY3NzLCBqcyk7CiAgICAgIHJldHVybiBodG1sV3JpdGUub3V0cHV0OwogICAgfQogICAgLyoqCiAgICAgICAgKiBDb252ZXJ0IGZyb20gSFRNTCB0byBUd2VlCiAgICAgICAgKgogICAgICAgICogQGZ1bmN0aW9uIEhUTUx0b1R3ZWUKICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9CiAgICAgICAgKi8KCiAgfSwgewogICAga2V5OiAidHdlZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdHdlZSgpIHsKICAgICAgdmFyIHR3cml0ZSA9IG5ldyBUd2VlV3JpdGVyKHRoaXMuc3RvcnkpOwogICAgICByZXR1cm4gdHdyaXRlLm91dHB1dDsKICAgIH0KICAgIC8qKgogICAgICAgICogQ29udmVydCBmcm9tIFR3ZWUgdG8gSFRNTAogICAgICAgICoKICAgICAgICAqIEBmdW5jdGlvbiBUd2VlVG9IVE1MCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY3NzIC0gRXh0cmEgY3NzCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ganMgLSBFeHRyYSBqcwogICAgICAgICogQHJldHVybnMge3ZvaWR9CiAgICAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2h0bWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNodG1sKHN0b3J5KSB7CiAgICAgIHZhciBjc3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICIiOwogICAgICB2YXIganMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICIiOwogICAgICB2YXIgaHRtbFdyaXRlID0gbmV3IEhUTUxXcml0ZXIoc3RvcnksIHRoaXMuc3RvcnlGb3JtYXQsIGNzcywganMpOwogICAgICB0aGlzLmh0bWxCbG9iID0gaHRtbFdyaXRlLm91dHB1dDsKICAgIH0KICAgIC8qKgogICAgICAgICogQ29udmVydCBmcm9tIEhUTUwgdG8gVHdlZQogICAgICAgICoKICAgICAgICAqIEBmdW5jdGlvbiBIVE1MdG9Ud2VlCiAgICAgICAgKiBAcmV0dXJucyB7dm9pZH0KICAgICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzdHdlZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3R3ZWUoc3RvcnkpIHsKICAgICAgdmFyIHR3cml0ZSA9IG5ldyBUd2VlV3JpdGVyKHN0b3J5KTsKICAgICAgdGhpcy50d2VlQmxvYiA9IHR3cml0ZS5vdXRwdXQ7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRmlsZUNvbnZlcnRlcjsKfSgpOwoKbW9kdWxlLmV4cG9ydHMgPSBGaWxlQ29udmVydGVyOw=="},{"version":3,"sources":["/Users/justinwu/Desktop/story_personalization_system/src/js/extwee_utils/FileConverter.js"],"names":["HTMLParser","require","TweeWriter","HTMLWriter","TweeParser","StoryFormatParser","Axios","default","FileConverter","contents","isHTML","htmlBlob","tweeBlob","story","storyFormat","extractStory","extractStoryFormat","hparse","tparse","get","then","response","format","data","storyformat","css","js","htmlWrite","output","twrite","module","exports"],"mappings":";;;;AAAA,IAAIA,UAAU,GAAGC,OAAO,CAAC,iBAAD,CAAxB;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAC,iBAAD,CAAxB;;AACA,IAAIE,UAAU,GAAGF,OAAO,CAAC,iBAAD,CAAxB;;AACA,IAAIG,UAAU,GAAGH,OAAO,CAAC,iBAAD,CAAxB;;AACA,IAAII,iBAAiB,GAAGJ,OAAO,CAAC,qBAAD,CAA/B;;eAC2BA,OAAO,CAAC,OAAD,C;IAAjBK,K,YAATC,O;AAGR;;;;;;IAIMC,a;;;AACF;;;;;;;AAOH,yBAAYC,QAAZ,EAAsBC,MAAtB,EAA8B;AAAA;;AAC7B,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,KAAL,GAAa,IAAb;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKL,QAAL,GAAgBA,QAAhB;AAEA,SAAKM,YAAL,CAAkBL,MAAlB;AACA,SAAKM,kBAAL;AACA;AAED;;;;;;;;;;;iCAOaN,M,EAAQ;AACpB,UAAIA,MAAJ,EAAY;AACX,YAAIO,MAAM,GAAG,IAAIjB,UAAJ,CAAe,KAAKS,QAApB,CAAb;AACA,aAAKI,KAAL,GAAaI,MAAM,CAACJ,KAApB;AACA,OAHD,MAGO;AACN,YAAIK,MAAM,GAAG,IAAId,UAAJ,CAAe,KAAKK,QAApB,CAAb;AACA,aAAKI,KAAL,GAAaK,MAAM,CAACL,KAApB;AACA;AACD;AAED;;;;;;;;yCAKoB;AAAA;;AAEnBP,MAAAA,KAAK,CAACa,GAAN,CAAU,mCAAV,EAA+CC,IAA/C,CAAoD,UAAAC,QAAQ,EAAI;AAE/D,YAAIC,MAAM,GAAG,IAAIjB,iBAAJ,CAAsBgB,QAAQ,CAACE,IAA/B,CAAb;AACA,QAAA,KAAI,CAACT,WAAL,GAAmBQ,MAAM,CAACE,WAA1B;AACA,OAJD;AAMA;AAGD;;;;;;;;;;;yBAQKC,G,EAAKC,E,EAAI;AACb,UAAIC,SAAS,GAAG,IAAIxB,UAAJ,CAAe,KAAKU,KAApB,EAA2B,KAAKC,WAAhC,EAA6CW,GAA7C,EAAkDC,EAAlD,CAAhB;AACA,aAAOC,SAAS,CAACC,MAAjB;AACA;AAED;;;;;;;;;2BAMO;AACN,UAAIC,MAAM,GAAG,IAAI3B,UAAJ,CAAe,KAAKW,KAApB,CAAb;AACA,aAAOgB,MAAM,CAACD,MAAd;AACA;AAED;;;;;;;;;;;0BAQMf,K,EAA0B;AAAA,UAAnBY,GAAmB,uEAAb,EAAa;AAAA,UAATC,EAAS,uEAAJ,EAAI;AAC/B,UAAIC,SAAS,GAAG,IAAIxB,UAAJ,CAAeU,KAAf,EAAsB,KAAKC,WAA3B,EAAwCW,GAAxC,EAA6CC,EAA7C,CAAhB;AAEA,WAAKf,QAAL,GAAgBgB,SAAS,CAACC,MAA1B;AACA;AAED;;;;;;;;;0BAMMf,K,EAAO;AACZ,UAAIgB,MAAM,GAAG,IAAI3B,UAAJ,CAAeW,KAAf,CAAb;AACA,WAAKD,QAAL,GAAgBiB,MAAM,CAACD,MAAvB;AACA;;;;;;AAGFE,MAAM,CAACC,OAAP,GAAiBvB,aAAjB","sourcesContent":["var HTMLParser = require('./HTMLParser.js');\nvar TweeWriter = require('./TweeWriter.js')\nvar HTMLWriter = require('./HTMLWriter.js');\nvar TweeParser = require('./TweeParser.js')\nvar StoryFormatParser = require('./StoryFormatParser');\nconst { default: Axios } = require('axios');\n\n\n/**\n * @class FileConverter\n * @module FileConverter\n */\nclass FileConverter {\n    /**\n     * @function HTweeFileReader\n     * @class\n     * @param {String} contents - File content to parse\n\t * @param {String}\tnStoryFormat- story format to parse into\n\t * @param {Boolean} isHTML - File is HTML\n     */\n\tconstructor(contents, isHTML) {\n\t\tthis.htmlBlob = null;\n\t\tthis.tweeBlob = null;\n\t\tthis.story = null;\n\t\tthis.storyFormat = null;\n\t\tthis.contents = contents;\n\n\t\tthis.extractStory(isHTML);\n\t\tthis.extractStoryFormat();\n\t}\n\n\t/**\n     * Extract story from file contents\n     *\n     * @function extractStory\n\t * @param {Boolean} isHTML - File is HTML\n     * @returns {void}\n     */\n\textractStory(isHTML) {\n\t\tif (isHTML) {\n\t\t\tvar hparse = new HTMLParser(this.contents);\n\t\t\tthis.story = hparse.story;\n\t\t} else {\n\t\t\tvar tparse = new TweeParser(this.contents);\n\t\t\tthis.story = tparse.story;\n\t\t}\n\t}\n\t\n\t/**\n\t * Extract storyFormat from file contents\n\t * \n\t * @function extractStoryFormat\n\t */\n\textractStoryFormat(){\n\n\t\tAxios.get(\"/storyformats/harlowe-3/format.js\").then(response => {\n\n\t\t\tlet format = new StoryFormatParser(response.data);\n\t\t\tthis.storyFormat = format.storyformat;\n\t\t})\n\n\t}\n\n\n\t/**\n     * Convert from Twee to HTML\n     *\n     * @function TweeToHTML\n\t * @param {string} css - Extra css\n\t * @param {string} js - Extra js\n     * @returns {string}\n     */\n\thtml(css, js) {\n\t\tlet htmlWrite = new HTMLWriter(this.story, this.storyFormat, css, js);\n\t\treturn htmlWrite.output;\n\t}\n\n\t/**\n     * Convert from HTML to Twee\n     *\n     * @function HTMLtoTwee\n     * @returns {string}\n     */\n\ttwee() {\n\t\tlet twrite = new TweeWriter(this.story);\n\t\treturn twrite.output;\n\t}\n\n\t/**\n     * Convert from Twee to HTML\n     *\n     * @function TweeToHTML\n\t * @param {string} css - Extra css\n\t * @param {string} js - Extra js\n     * @returns {void}\n     */\n\tshtml(story, css = \"\", js = \"\") {\n\t\tlet htmlWrite = new HTMLWriter(story, this.storyFormat, css, js);\n\n\t\tthis.htmlBlob = htmlWrite.output;\n\t}\n\n\t/**\n     * Convert from HTML to Twee\n     *\n     * @function HTMLtoTwee\n     * @returns {void}\n     */\n\tstwee(story) {\n\t\tlet twrite = new TweeWriter(story);\n\t\tthis.tweeBlob = twrite.output;\n\t}\n}\n\nmodule.exports = FileConverter;"]}]}