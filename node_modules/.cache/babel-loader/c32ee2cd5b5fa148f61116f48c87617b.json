{"remainingRequest":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js!/Users/justinwu/Desktop/story_personalization_system/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/justinwu/Desktop/story_personalization_system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/justinwu/Desktop/story_personalization_system/src/components/editor/Editor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/justinwu/Desktop/story_personalization_system/src/components/editor/Editor.vue","mtime":1604699326243},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBTaWRlYmFyX1ZhcmlhYmxlcyBmcm9tICIuL3Rvb2xzL3ZhcmlhYmxlcy9TaWRlYmFyX1ZhcmlhYmxlcy52dWUiOwppbXBvcnQgU2lkZWJhcl9NZWRpYSBmcm9tICIuL3Rvb2xzL21lZGlhL1NpZGViYXJfTWVkaWEudnVlIjsKaW1wb3J0IFNpZGViYXJfVGhlbWVzIGZyb20gIi4vdG9vbHMvdGhlbWVzL1NpZGViYXJfVGhlbWVzLnZ1ZSI7CmltcG9ydCBTaWRlYmFyX1Bhc3NhZ2UgZnJvbSAiLi90b29scy9wYXNzYWdlL1NpZGViYXJfUGFzc2FnZS52dWUiOwppbXBvcnQgR2xvYmFsX1N0b3J5X09wdGlvbnMgZnJvbSAiLi90b29scy9vcHRpb25zL0dsb2JhbF9TdG9yeV9PcHRpb25zLnZ1ZSI7CmltcG9ydCBQYWdlX0xheW91dCBmcm9tICIuL1BhZ2VfTGF5b3V0LnZ1ZSI7CmltcG9ydCBGaWxlQ29udmVydGVyIGZyb20gIkAvanMvZXh0d2VlX3V0aWxzL0ZpbGVDb252ZXJ0ZXIuanMiOwppbXBvcnQgU3RvcnlFZGl0b3IgZnJvbSAiQC9qcy9leHR3ZWVfdXRpbHMvU3RvcnlFZGl0b3IuanMiOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UiOwppbXBvcnQgeyBkYiB9IGZyb20gIkAvZmlyZWJhc2VDb25maWciOwppbXBvcnQgc3RvcnlNaXhpbiBmcm9tICIuLi8uLi9taXhpbnMvc3RvcnlNaXhpbiI7CmltcG9ydCB0d2VlQ29udmVydGVyIGZyb20gIi4uLy4uL21peGlucy90d2VlQ29udmVydGVyTWl4aW4iOwppbXBvcnQgQXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgRmlsZVNhdmVyIGZyb20gImJyb3dzZXItZmlsZXNhdmVyIjsKaW1wb3J0IGRlYm91bmNlIGZyb20gImRlYm91bmNlIjsKCnZhciBKU1ppcCA9IHJlcXVpcmUoImpzemlwIik7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImVkaXRvciIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzTG9nZ2VkSW46IGZhbHNlLAogICAgICAvLy8vLwogICAgICB1c2VyUmVmOiBudWxsLAogICAgICBzdG9yeVJlZjogbnVsbCwKICAgICAgYmFzZVBhdGg6ICIiLAogICAgICB0b3RhbEZpbGVTaXplOiAwLAogICAgICBtYXhTdG9yYWdlU2l6ZTogMTUsCiAgICAgIHN0YXR1czogIiIsCiAgICAgIC8vLy8vCiAgICAgIHN0b3J5TmFtZTogIiIsCiAgICAgIHN0b3J5UGFnZXM6IEFycmF5LAogICAgICBzdG9yeVZhcmlhYmxlczogTWFwLAogICAgICBpbWFnZVZhcmlhYmxlczogTWFwLAogICAgICBhdWRpb1ZhcmlhYmxlczogTWFwLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgcGFnZXNWaXNpdGVkOiBbXSwKICAgICAgdG9vbHNXaWR0aDogIjMwJSIsCiAgICAgIHBhZ2VXaWR0aDogIjcwJSIsCiAgICAgIGNvbnRlbnRIZWlnaHQ6ICI3NHZoIiwKICAgICAgbWluSGVpZ2h0OiAiNTAwcHgiLAogICAgICBoaWRlSXRlbTogZmFsc2UsCiAgICAgIHRvb2xCdXR0b246ICJtZGktbWludXMiLAogICAgICBmdWxsQnV0dG9uOiAibWRpLWZ1bGxzY3JlZW4iLAogICAgICBpbkZ1bGxNb2RlOiBmYWxzZSwKICAgICAgdGhlbWVWaWV3OiBmYWxzZSwKICAgICAgaGFuZGxlczogewogICAgICAgIHN0b3J5RWRpdG9yOiBTdG9yeUVkaXRvciwKICAgICAgICBmaWxlQ29udmVydGVyOiBGaWxlQ29udmVydGVyCiAgICAgIH0sCiAgICAgIHJlbmRlckhpbnRzOiB7CiAgICAgICAgcmVuZGVyS2V5OiAxLAogICAgICAgIHZhcmlhYmxlUmVuZGVyS2V5OiAxLAogICAgICAgIHRoZW1lc1JlbmRlcktleTogMSwKICAgICAgICBwYXNzYWdlUmVuZGVyS2V5OiAxLAogICAgICAgIGdzb1JlbmRlcktleTogMSwKICAgICAgICBtZWRpYVJlbmRlcktleTogMSwKICAgICAgICBoaWRkZW46IHRydWUsCiAgICAgICAgaW5WYXJpYWJsZUVkaXRvcjogdHJ1ZSwKICAgICAgICBpbk1lZGlhRWRpdG9yOiBmYWxzZQogICAgICB9LAogICAgICBoaTogIkhlbGxvIiwKICAgICAgZXhwb3J0RmlsZTogIiIKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAvLy8vLwogICAgaWYgKGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcikgewogICAgICB0aGlzLmlzTG9nZ2VkSW4gPSB0cnVlOwogICAgfQoKICAgIGlmICh0aGlzLmlzTG9nZ2VkSW4pIHsKICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCk7CiAgICAgIHZhciB1c2VySUQgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIuZW1haWw7CiAgICAgIHRoaXMudXNlclJlZiA9IHN0b3JhZ2VSZWYuY2hpbGQodXNlcklEKTsKICAgIH0gLy8vLy8KCgogICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnN0b3J5TG9jYXRpb24gIT0gIiIpIHsKICAgICAgQXhpb3MuZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLnN0b3J5TG9jYXRpb24pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgIT0gbnVsbCkgewogICAgICAgICAgX3RoaXMubG9hZENvbnRlbnRzKHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJPR3N0b3J5UGFzc2FnZXMiKSA9PT0gIiIgfHwgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiT0dzdG9yeVBhc3NhZ2VzIikgPT09IG51bGwpIHsKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiT0dzdG9yeVBhc3NhZ2VzIiwgSlNPTi5zdHJpbmdpZnkoX3RoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5leHBvcnRlZFN0b3J5UGFnZXMpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJjcmVhdGVUZW1wbGF0ZSIsICJ5ZXMiKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJSZWFkIFN1Y2Nlc3MiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coIlJlYWQgRmFpbCIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnN0b3J5Q29udGVudCAhPSAiIikgewogICAgICBjb25zb2xlLmxvZyhzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzdG9yeUNvbnRlbnQiKSk7CiAgICAgIHRoaXMubG9hZENvbnRlbnRzKHRoaXMuJHN0b3JlLnN0YXRlLnN0b3J5Q29udGVudCk7CgogICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiT0dzdG9yeVBhc3NhZ2VzIikgPT09ICIiKSB7CiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiT0dzdG9yeVBhc3NhZ2VzIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmV4cG9ydGVkU3RvcnlQYWdlcykpOwogICAgICB9IC8vdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLnJlbW92ZVZhcmlhYmxlSW5qZWN0KCk7CgoKICAgICAgdGhpcy5yZWdlbmVyYXRlU3RvcnlUZXh0KHsKICAgICAgICBkaXNwOiB0cnVlCiAgICAgIH0pOwogICAgfQoKICAgIGlmICh0aGlzLmlzTG9nZ2VkSW4pIHsKICAgICAgaWYgKHRoaXMuc3RvcnlOYW1lID09ICIiKSB7CiAgICAgICAgdGhpcy5zdG9yeU5hbWUgPSAiU3RvcnkgVGVtcGxhdGUiOwogICAgICB9CgogICAgICB0aGlzLnN0b3J5UmVmID0gdGhpcy51c2VyUmVmLmNoaWxkKHRoaXMuc3RvcnlOYW1lKTsKICAgICAgdGhpcy5iYXNlUGF0aCA9IHRoaXMuaXNMb2dnZWRJbi5lbWFpbCArICIvIiArIHRoaXMuc3RvcnlOYW1lICsgIi8iOwogICAgfSAvLy8vLwoKCiAgICBpZiAodGhpcy5pc0xvZ2dlZEluKSB7CiAgICAgIHRoaXMuc3RvcnlSZWYubGlzdEFsbCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIHJlc3VsdC5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChtZWRpYVJlZikgewogICAgICAgICAgdmFyIGtleSA9ICJAIiArIG1lZGlhUmVmLm5hbWUuc3Vic3RyaW5nKDAsIG1lZGlhUmVmLm5hbWUuaW5kZXhPZigiPSIpKTsKCiAgICAgICAgICBpZiAodGhpcy5pbWFnZVZhcmlhYmxlcy5oYXMoa2V5KSkgewogICAgICAgICAgICB2YXIgY3VyclZhbHVlID0gdGhpcy5pbWFnZVZhcmlhYmxlcy5nZXQoa2V5KTsKICAgICAgICAgICAgdmFyIHZhbHVlID0gewogICAgICAgICAgICAgIGZpbGU6IGN1cnJWYWx1ZS5maWxlLAogICAgICAgICAgICAgIGZpbGVOYW1lOiBtZWRpYVJlZi5uYW1lLnN1YnN0cmluZyhtZWRpYVJlZi5uYW1lLmluZGV4T2YoIj0iKSArIDEpLAogICAgICAgICAgICAgIHBhdGg6IG1lZGlhUmVmLmdldERvd25sb2FkVVJMKCksCiAgICAgICAgICAgICAgaWQ6IGN1cnJWYWx1ZS5pZCwKICAgICAgICAgICAgICBjb2xvcjogY3VyclZhbHVlLmNvbG9yLAogICAgICAgICAgICAgIHVwbG9hZGVkOiB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5zZXRJbWFnZVZhcmlhYmxlKGtleSwgdmFsdWUpOwogICAgICAgICAgICB0aGlzLnRvdGFsRmlsZVNpemUgKz0gY3VyclZhbHVlLmZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0OwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLmF1ZGlvVmFyaWFibGVzLmhhcyhrZXkpKSB7CiAgICAgICAgICAgIGN1cnJWYWx1ZSA9IHRoaXMuYXVkaW9WYXJpYWJsZXMuZ2V0KGtleSk7CiAgICAgICAgICAgIHZhbHVlID0gewogICAgICAgICAgICAgIGZpbGU6IGN1cnJWYWx1ZS5maWxlLAogICAgICAgICAgICAgIGZpbGVOYW1lOiBtZWRpYVJlZi5uYW1lLnN1YnN0cmluZyhtZWRpYVJlZi5uYW1lLmluZGV4T2YoIj0iKSArIDEpLAogICAgICAgICAgICAgIHBhdGg6IG1lZGlhUmVmLmdldERvd25sb2FkVVJMKCksCiAgICAgICAgICAgICAgaWQ6IGN1cnJWYWx1ZS5pZCwKICAgICAgICAgICAgICBjb2xvcjogY3VyclZhbHVlLmNvbG9yLAogICAgICAgICAgICAgIHVwbG9hZGVkOiB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5zZXRBdWRpb1ZhcmlhYmxlKGtleSwgdmFsdWUpOwogICAgICAgICAgICB0aGlzLnRvdGFsRmlsZVNpemUgKz0gY3VyclZhbHVlLmZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0OwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaW1hZ2VWYXJpYWJsZXMpOwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5hdWRpb1ZhcmlhYmxlcyk7CiAgICAgICAgfS5iaW5kKHRoaXMpKTsKICAgICAgfS5iaW5kKHRoaXMpKTsKICAgIH0gLy8vLy8KCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICAidmFyLXNpZGViYXIiOiBTaWRlYmFyX1ZhcmlhYmxlcywKICAgICJtZWRpYS1zaWRlYmFyIjogU2lkZWJhcl9NZWRpYSwKICAgICJ0aGVtZXMtc2lkZWJhciI6IFNpZGViYXJfVGhlbWVzLAogICAgInBhc3NhZ2Utc2lkZWJhciI6IFNpZGViYXJfUGFzc2FnZSwKICAgICJwYWdlLWxheW91dCI6IFBhZ2VfTGF5b3V0LAogICAgZ3NvOiBHbG9iYWxfU3RvcnlfT3B0aW9ucwogIH0sCiAgd2F0Y2g6IHsKICAgIHN0YXR1czogZGVib3VuY2UoZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5zdGF0dXMuaW5jbHVkZXMoInN1Y2Nlc3MiKSkgewogICAgICAgIHRoaXMuc3RhdHVzID0gIiI7CiAgICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgICB0aGlzLmNoZWNrUmVuZGVySGludHMoKTsKICAgICAgfQogICAgfSwgMzAwMCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWRUd2VlOiBmdW5jdGlvbiBsb2FkVHdlZShmaWxlcykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKGZpbGVzKTsKICAgICAgdmFyIGZpbGUgPSBmaWxlc1swXTsKICAgICAgdmFyIGlzSFRNTCA9IGZpbGUubmFtZS5pbmNsdWRlcygiLmh0bWwiKTsKICAgICAgdGhpcy5zdG9yeVZhcmlhYmxlcyA9IG51bGw7CiAgICAgIHRoaXMuc3RvcnlMaW5rUGFzc2FnZXMgPSBudWxsOwogICAgICB0aGlzLnN0b3J5RGlzcFBhc3NhZ2VzID0gbnVsbDsKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yID0gbnVsbDsKICAgICAgdGhpcy5oYW5kbGVzLmZpbGVDb252ZXJ0ZXIgPSBudWxsOwogICAgICB2YXIgdGVtcEZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgdGVtcEZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIGFsZXJ0KHRlbXBGaWxlUmVhZGVyLnJlc3VsdCk7CiAgICAgICAgX3RoaXMyLmhhbmRsZXMuZmlsZUNvbnZlcnRlciA9IG5ldyBGaWxlQ29udmVydGVyKHRlbXBGaWxlUmVhZGVyLnJlc3VsdCwgaXNIVE1MKTsKICAgICAgICBfdGhpczIuaGFuZGxlcy5zdG9yeUVkaXRvciA9IG5ldyBTdG9yeUVkaXRvcihfdGhpczIuaGFuZGxlcy5maWxlQ29udmVydGVyLnN0b3J5KTsKICAgICAgICBfdGhpczIuc3RvcnlWYXJpYWJsZXMgPSBfdGhpczIuaGFuZGxlcy5zdG9yeUVkaXRvci52YXJpYWJsZXM7CiAgICAgICAgX3RoaXMyLmltYWdlVmFyaWFibGVzID0gX3RoaXMyLmhhbmRsZXMuc3RvcnlFZGl0b3IuaW1hZ2VWYXJpYWJsZXM7CiAgICAgICAgX3RoaXMyLmF1ZGlvVmFyaWFibGVzID0gX3RoaXMyLmhhbmRsZXMuc3RvcnlFZGl0b3IuYXVkaW9WYXJpYWJsZXM7CiAgICAgICAgX3RoaXMyLnN0b3J5UGFnZXMgPSBfdGhpczIuaGFuZGxlcy5zdG9yeUVkaXRvci5leHBvcnRlZFN0b3J5UGFnZXM7CiAgICAgICAgX3RoaXMyLnN0b3J5TmFtZSA9IF90aGlzMi5oYW5kbGVzLnN0b3J5RWRpdG9yLmJhc2VTdG9yeS5uYW1lOwoKICAgICAgICBfdGhpczIuZ29Ub1N0YXJ0KCk7CgogICAgICAgIF90aGlzMi5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgICBfdGhpczIucmVuZGVySGludHMudmFyaWFibGVSZW5kZXJLZXkrKzsKICAgICAgICBfdGhpczIucmVuZGVySGludHMucGFzc2FnZVJlbmRlcktleSsrOwogICAgICAgIF90aGlzMi5yZW5kZXJIaW50cy5nc29SZW5kZXJLZXkrKzsKICAgICAgICBfdGhpczIucmVuZGVySGludHMuaGlkZGVuID0gdHJ1ZTsKCiAgICAgICAgX3RoaXMyLmNoZWNrUmVuZGVySGludHMoKTsKCiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgic3RvcnlDb250ZW50IiwgdGVtcEZpbGVSZWFkZXIucmVzdWx0KTsKICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJzdG9yeUxvY2F0aW9uIiwgIiIpOwoKICAgICAgICBfdGhpczIucmVnZW5lcmF0ZVN0b3J5VGV4dCh7CiAgICAgICAgICBkaXNwOiBfdGhpczIucmVuZGVySGludHMuaGlkZGVuCiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB0ZW1wRmlsZVJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOwogICAgfSwKICAgIGxvYWRDb250ZW50czogZnVuY3Rpb24gbG9hZENvbnRlbnRzKGNvbnRlbnRzKSB7CiAgICAgIHRoaXMuc3RvcnlWYXJpYWJsZXMgPSBudWxsOwogICAgICB0aGlzLnN0b3J5TGlua1Bhc3NhZ2VzID0gbnVsbDsKICAgICAgdGhpcy5zdG9yeURpc3BQYXNzYWdlcyA9IG51bGw7CiAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvciA9IG51bGw7CiAgICAgIHRoaXMuaGFuZGxlcy5maWxlQ29udmVydGVyID0gbnVsbDsKICAgICAgdGhpcy5oYW5kbGVzLmZpbGVDb252ZXJ0ZXIgPSBuZXcgRmlsZUNvbnZlcnRlcihjb250ZW50cywgZmFsc2UpOwogICAgICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IgPSBuZXcgU3RvcnlFZGl0b3IodGhpcy5oYW5kbGVzLmZpbGVDb252ZXJ0ZXIuc3RvcnkpOwogICAgICB0aGlzLnN0b3J5VmFyaWFibGVzID0gdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLnZhcmlhYmxlczsKICAgICAgdGhpcy5pbWFnZVZhcmlhYmxlcyA9IHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5pbWFnZVZhcmlhYmxlczsKICAgICAgdGhpcy5hdWRpb1ZhcmlhYmxlcyA9IHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5hdWRpb1ZhcmlhYmxlczsKICAgICAgdGhpcy5zdG9yeVBhZ2VzID0gdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmV4cG9ydGVkU3RvcnlQYWdlczsKICAgICAgdGhpcy5zdG9yeU5hbWUgPSB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuYmFzZVN0b3J5Lm5hbWU7CiAgICAgIHRoaXMuZ29Ub1N0YXJ0KCk7CiAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5Kys7CiAgICAgIHRoaXMucmVuZGVySGludHMudmFyaWFibGVSZW5kZXJLZXkrKzsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5wYXNzYWdlUmVuZGVyS2V5Kys7CiAgICAgIHRoaXMucmVuZGVySGludHMuZ3NvUmVuZGVyS2V5Kys7CiAgICAgIHRoaXMucmVuZGVySGludHMuaGlkZGVuID0gdHJ1ZTsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICAgIHRoaXMucmVnZW5lcmF0ZVN0b3J5VGV4dCh7CiAgICAgICAgZGlzcDogdGhpcy5yZW5kZXJIaW50cy5oaWRkZW4KICAgICAgfSk7CiAgICB9LAogICAgbG9hZFN0b3J5VGVtcGxhdGU6IGZ1bmN0aW9uIGxvYWRTdG9yeVRlbXBsYXRlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCJzdG9yeSB0ZW1wbGF0ZSIpOwogICAgICBBeGlvcy5nZXQoIi9zdG9yaWVzL1N0b3J5IFRlbXBsYXRlLnR3ZWUiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhICE9IG51bGwpIHsKICAgICAgICAgIF90aGlzMy5sb2FkQ29udGVudHMocmVzcG9uc2UuZGF0YSk7CgogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiT0dzdG9yeVBhc3NhZ2VzIiwgSlNPTi5zdHJpbmdpZnkoX3RoaXMzLmhhbmRsZXMuc3RvcnlFZGl0b3IuZXhwb3J0ZWRTdG9yeVBhZ2VzKSk7CiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJjcmVhdGVUZW1wbGF0ZSIsICJ5ZXMiKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJSZWFkIFN1Y2Nlc3MiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coIlJlYWQgRmFpbCIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMucmVnZW5lcmF0ZVN0b3J5VGV4dCh7CiAgICAgICAgZGlzcDogdGhpcy5yZW5kZXJIaW50cy5oaWRkZW4KICAgICAgfSk7CiAgICB9LAogICAgcmVwbGFjZUltYWdlOiBmdW5jdGlvbiByZXBsYWNlSW1hZ2UoZXZlbnQpIHsKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLnNldEltYWdlVmFyaWFibGUoZXZlbnQubmFtZSwgZXZlbnQuZGF0YSk7CiAgICAgIHRoaXMud3JpdGVUb1N0b3JhZ2UoKTsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5tZWRpYVJlbmRlcktleSsrOwogICAgICB0aGlzLmNoZWNrUmVuZGVySGludHMoKTsgLy8vLy8KCiAgICAgIHZhciBpbWdEYXRhID0gdGhpcy5pbWFnZVZhcmlhYmxlcy5nZXQoZXZlbnQubmFtZSk7CgogICAgICBpZiAodGhpcy5pc0xvZ2dlZEluKSB7CiAgICAgICAgdmFyIHJlbW92ZVJlZiA9IHRoaXMuc3RvcnlSZWYuY2hpbGQoZXZlbnQubmFtZS5yZXBsYWNlKCJAIiwgIiIpICsgIj0iICsgZXZlbnQub2xkRGF0YS5maWxlTmFtZSk7CiAgICAgICAgcmVtb3ZlUmVmLmRlbGV0ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhpcy5zdGF0dXMgPSAiVXBsb2FkaW5nICIgKyBldmVudC5kYXRhLmZpbGVOYW1lICsgIi4uLiBwbGVhc2UgYmUgcGF0aWVudCA6KSI7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy50b3RhbEZpbGVTaXplIC09IGV2ZW50Lm9sZERhdGEuZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQ7CiAgICAgICAgdGhpcy50b3RhbEZpbGVTaXplICs9IGV2ZW50LmRhdGEuZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQ7CgogICAgICAgIGlmICh0aGlzLnRvdGFsRmlsZVNpemUgPiB0aGlzLm1heFN0b3JhZ2VTaXplKSB7CiAgICAgICAgICB0aGlzLnRvdGFsRmlsZVNpemUgLT0gZXZlbnQuZGF0YS5maWxlLnNpemUgLyAxMDI0IC8gMTAyNDsKICAgICAgICAgIHRoaXMudG90YWxGaWxlU2l6ZSArPSBldmVudC5vbGREYXRhLmZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0OwogICAgICAgICAgdGhpcy5zdGF0dXMgPSAiU29ycnkhIEl0IGxvb2tzIGxpa2UgeW91J3ZlIHJ1biBvdXQgb2Ygc3RvcmFnZSBzcGFjZS4gVHJ5IHVwbG9hZGluZyBhIHNtYWxsZXIgZmlsZSEiOwogICAgICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLnNldEltYWdlVmFyaWFibGUoZXZlbnQubmFtZSwgZXZlbnQub2xkRGF0YSk7CiAgICAgICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICAgICAgdGhpcy5yZW5kZXJIaW50cy5tZWRpYVJlbmRlcktleSsrOwogICAgICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBuZXdSZWYgPSB0aGlzLnN0b3J5UmVmLmNoaWxkKGV2ZW50Lm5hbWUucmVwbGFjZSgiQCIsICIiKSArICI9IiArIGV2ZW50LmRhdGEuZmlsZU5hbWUpOwogICAgICAgICAgbmV3UmVmLnB1dChldmVudC5kYXRhLmZpbGUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLnN0YXR1cyA9ICJVcGxvYWQgZm9yICIgKyBldmVudC5kYXRhLmZpbGVOYW1lICsgIiBzdWNjZXNzZnVsISI7CiAgICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgICAgZmlsZTogZXZlbnQuZGF0YS5maWxlLAogICAgICAgICAgICAgIGZpbGVOYW1lOiBldmVudC5kYXRhLmZpbGVOYW1lLAogICAgICAgICAgICAgIHBhdGg6IG5ld1JlZi5nZXREb3dubG9hZFVSTCgpLAogICAgICAgICAgICAgIGNvbG9yOiBpbWdEYXRhLmNvbG9yLAogICAgICAgICAgICAgIGlkOiBpbWdEYXRhLmlkLAogICAgICAgICAgICAgIHVwbG9hZGVkOiB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5zZXRJbWFnZVZhcmlhYmxlKGV2ZW50Lm5hbWUsIG9iaik7CiAgICAgICAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5Kys7CiAgICAgICAgICAgIHRoaXMucmVuZGVySGludHMubWVkaWFSZW5kZXJLZXkrKzsKICAgICAgICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaW1hZ2VWYXJpYWJsZXMpOwogICAgICAgICAgfS5iaW5kKHRoaXMpKTsKICAgICAgICB9CiAgICAgIH0gLy8vLy8KCiAgICB9LAogICAgcmVwbGFjZUF1ZGlvOiBmdW5jdGlvbiByZXBsYWNlQXVkaW8oZXZlbnQpIHsKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLnNldEF1ZGlvVmFyaWFibGUoZXZlbnQubmFtZSwgZXZlbnQuZGF0YSk7CiAgICAgIHRoaXMud3JpdGVUb1N0b3JhZ2UoKTsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5tZWRpYVJlbmRlcktleSsrOwogICAgICB0aGlzLmNoZWNrUmVuZGVySGludHMoKTsgLy8vLy8KCiAgICAgIHZhciBhdWREYXRhID0gdGhpcy5hdWRpb1ZhcmlhYmxlcy5nZXQoZXZlbnQubmFtZSk7CgogICAgICBpZiAodGhpcy5pc0xvZ2dlZEluKSB7CiAgICAgICAgdmFyIHJlbW92ZVJlZiA9IHRoaXMuc3RvcnlSZWYuY2hpbGQoZXZlbnQubmFtZS5yZXBsYWNlKCJAIiwgIiIpICsgIj0iICsgZXZlbnQub2xkRGF0YS5maWxlTmFtZSk7CiAgICAgICAgcmVtb3ZlUmVmLmRlbGV0ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhpcy5zdGF0dXMgPSAiVXBsb2FkaW5nICIgKyBldmVudC5kYXRhLmZpbGVOYW1lICsgIi4uLiBwbGVhc2UgYmUgcGF0aWVudCA6KSI7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy50b3RhbEZpbGVTaXplIC09IGV2ZW50Lm9sZERhdGEuZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQ7CiAgICAgICAgdGhpcy50b3RhbEZpbGVTaXplICs9IGV2ZW50LmRhdGEuZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQ7CgogICAgICAgIGlmICh0aGlzLnRvdGFsRmlsZVNpemUgPiB0aGlzLm1heFN0b3JhZ2VTaXplKSB7CiAgICAgICAgICB0aGlzLnRvdGFsRmlsZVNpemUgLT0gZXZlbnQuZGF0YS5maWxlLnNpemUgLyAxMDI0IC8gMTAyNDsKICAgICAgICAgIHRoaXMudG90YWxGaWxlU2l6ZSArPSBldmVudC5vbGREYXRhLmZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0OwogICAgICAgICAgdGhpcy5zdGF0dXMgPSAiU29ycnkhIEl0IGxvb2tzIGxpa2UgeW91J3ZlIHJ1biBvdXQgb2Ygc3RvcmFnZSBzcGFjZS4gVHJ5IHVwbG9hZGluZyBhIHNtYWxsZXIgZmlsZSEiOwogICAgICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLnNldEF1ZGlvVmFyaWFibGUoZXZlbnQubmFtZSwgZXZlbnQub2xkRGF0YSk7CiAgICAgICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICAgICAgdGhpcy5yZW5kZXJIaW50cy5tZWRpYVJlbmRlcktleSsrOwogICAgICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBuZXdSZWYgPSB0aGlzLnN0b3J5UmVmLmNoaWxkKGV2ZW50Lm5hbWUucmVwbGFjZSgiQCIsICIiKSArICI9IiArIGV2ZW50LmRhdGEuZmlsZU5hbWUpOwogICAgICAgICAgbmV3UmVmLnB1dChldmVudC5kYXRhLmZpbGUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLnN0YXR1cyA9ICJVcGxvYWQgZm9yICIgKyBldmVudC5kYXRhLmZpbGVOYW1lICsgIiBzdWNjZXNzZnVsLi4uIHRoYW5rcyBmb3Igd2FpdGluZyEiOwogICAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICAgIGZpbGU6IGV2ZW50LmRhdGEuZmlsZSwKICAgICAgICAgICAgICBmaWxlTmFtZTogZXZlbnQuZGF0YS5maWxlTmFtZSwKICAgICAgICAgICAgICBwYXRoOiBuZXdSZWYuZ2V0RG93bmxvYWRVUkwoKSwKICAgICAgICAgICAgICBjb2xvcjogYXVkRGF0YS5jb2xvciwKICAgICAgICAgICAgICBpZDogYXVkRGF0YS5pZCwKICAgICAgICAgICAgICB1cGxvYWRlZDogdHJ1ZQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3Iuc2V0QXVkaW9WYXJpYWJsZShldmVudC5uYW1lLCBvYmopOwogICAgICAgICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICAgICAgICB0aGlzLnJlbmRlckhpbnRzLm1lZGlhUmVuZGVyS2V5Kys7CiAgICAgICAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOwogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmF1ZGlvVmFyaWFibGVzKTsKICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgfQogICAgICB9IC8vLy8vCgogICAgfSwKICAgIHJlcGxhY2VJbWFnZU5hbWU6IGZ1bmN0aW9uIHJlcGxhY2VJbWFnZU5hbWUoZXZlbnQpIHsKICAgICAgdmFyIHByb2Nlc3MgPSB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuY2hhbmdlSW1hZ2VWYXJpYWJsZU5hbWUoZXZlbnQpOwogICAgICB0aGlzLndyaXRlVG9TdG9yYWdlKCk7CiAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5Kys7CiAgICAgIHRoaXMucmVuZGVySGludHMubWVkaWFSZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7IC8vLy8vCgogICAgICB2YXIgZmlsZU5hbWUgPSBldmVudC5maWxlTmFtZTsKCiAgICAgIGlmICh0aGlzLmlzTG9nZ2VkSW4gJiYgcHJvY2VzcykgewogICAgICAgIHZhciByZW1vdmVSZWYgPSB0aGlzLnN0b3J5UmVmLmNoaWxkKGV2ZW50LnByZXZOYW1lLnJlcGxhY2UoIkAiLCAiIikgKyAiPSIgKyBmaWxlTmFtZSk7CiAgICAgICAgcmVtb3ZlUmVmLmRlbGV0ZSgpOwogICAgICAgIHZhciBpbWdEYXRhID0gdGhpcy5pbWFnZVZhcmlhYmxlcy5nZXQoZXZlbnQubmV3TmFtZSk7CiAgICAgICAgdmFyIG5ld1JlZiA9IHRoaXMuc3RvcnlSZWYuY2hpbGQoZXZlbnQubmV3TmFtZS5yZXBsYWNlKCJAIiwgIiIpICsgIj0iICsgZmlsZU5hbWUpOwogICAgICAgIG5ld1JlZi5wdXQoaW1nRGF0YS5maWxlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMuc3RhdHVzID0gIllvdXIgY2hhbmdlcyB3ZXJlIHNhdmVkIHN1Y2Nlc3NmdWxseSEiOwoKICAgICAgICAgIGlmIChpbWdEYXRhLnBhdGguaS5pbmNsdWRlcygiYmxvYiIpKSB7CiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoaW1nRGF0YS5wYXRoLmkpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIGZpbGU6IGltZ0RhdGEuZmlsZSwKICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGVOYW1lLAogICAgICAgICAgICBwYXRoOiBuZXdSZWYuZ2V0RG93bmxvYWRVUkwoKSwKICAgICAgICAgICAgY29sb3I6IGltZ0RhdGEuY29sb3IsCiAgICAgICAgICAgIGlkOiBpbWdEYXRhLmlkLAogICAgICAgICAgICB1cGxvYWRlZDogdHJ1ZQogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5zZXRJbWFnZVZhcmlhYmxlKGV2ZW50Lm5ld05hbWUsIG9iaik7CiAgICAgICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICAgICAgdGhpcy5yZW5kZXJIaW50cy5tZWRpYVJlbmRlcktleSsrOwogICAgICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7IC8vY29uc29sZS5sb2codGhpcy5pbWFnZVZhcmlhYmxlcyk7CiAgICAgICAgfS5iaW5kKHRoaXMpKTsKICAgICAgfSAvLy8vLwoKICAgIH0sCiAgICByZXBsYWNlQXVkaW9OYW1lOiBmdW5jdGlvbiByZXBsYWNlQXVkaW9OYW1lKGV2ZW50KSB7CiAgICAgIHZhciBwcm9jZXNzID0gdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmNoYW5nZUF1ZGlvVmFyaWFibGVOYW1lKGV2ZW50KTsKICAgICAgdGhpcy53cml0ZVRvU3RvcmFnZSgpOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLnJlbmRlckhpbnRzLm1lZGlhUmVuZGVyS2V5Kys7CiAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOyAvLy8vLwoKICAgICAgdmFyIGZpbGVOYW1lID0gZXZlbnQuZmlsZU5hbWU7CgogICAgICBpZiAodGhpcy5pc0xvZ2dlZEluICYmIHByb2Nlc3MpIHsKICAgICAgICB2YXIgcmVtb3ZlUmVmID0gdGhpcy5zdG9yeVJlZi5jaGlsZChldmVudC5wcmV2TmFtZS5yZXBsYWNlKCJAIiwgIiIpICsgIj0iICsgZmlsZU5hbWUpOwogICAgICAgIHJlbW92ZVJlZi5kZWxldGUoKTsKICAgICAgICB2YXIgYXVkRGF0YSA9IHRoaXMuYXVkaW9WYXJpYWJsZXMuZ2V0KGV2ZW50Lm5ld05hbWUpOwogICAgICAgIHZhciBuZXdSZWYgPSB0aGlzLnN0b3J5UmVmLmNoaWxkKGV2ZW50Lm5ld05hbWUucmVwbGFjZSgiQCIsICIiKSArICI9IiArIGZpbGVOYW1lKTsKICAgICAgICBuZXdSZWYucHV0KGF1ZERhdGEuZmlsZSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGlzLnN0YXR1cyA9ICJZb3VyIGNoYW5nZXMgd2VyZSBzYXZlZCBzdWNjZXNzZnVsbHkhIjsKCiAgICAgICAgICBpZiAoYXVkRGF0YS5wYXRoLmkuaW5jbHVkZXMoImJsb2IiKSkgewogICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZERhdGEucGF0aC5pKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBmaWxlOiBhdWREYXRhLmZpbGUsCiAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlTmFtZSwKICAgICAgICAgICAgcGF0aDogbmV3UmVmLmdldERvd25sb2FkVVJMKCksCiAgICAgICAgICAgIGNvbG9yOiBhdWREYXRhLmNvbG9yLAogICAgICAgICAgICBpZDogYXVkRGF0YS5pZCwKICAgICAgICAgICAgdXBsb2FkZWQ6IHRydWUKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3Iuc2V0QXVkaW9WYXJpYWJsZShldmVudC5uZXdOYW1lLCBvYmopOwogICAgICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgICAgIHRoaXMucmVuZGVySGludHMubWVkaWFSZW5kZXJLZXkrKzsKICAgICAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5hdWRpb1ZhcmlhYmxlcyk7CiAgICAgICAgfS5iaW5kKHRoaXMpKTsKICAgICAgfSAvLy8vLwoKICAgIH0sCiAgICBhZGRJbWFnZVZhcmlhYmxlOiBmdW5jdGlvbiBhZGRJbWFnZVZhcmlhYmxlKGV2ZW50KSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnQubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuYWRkSW1hZ2VWYXJpYWJsZShldmVudFtpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5yZXBhcnNlTWVkaWEoKTsKICAgICAgdGhpcy53cml0ZVRvU3RvcmFnZSgpOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLnJlbmRlckhpbnRzLm1lZGlhUmVuZGVyS2V5Kys7CiAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOyAvLy8vLwoKICAgICAgaWYgKHRoaXMuaXNMb2dnZWRJbikgewogICAgICAgIHRoaXMuaW1hZ2VWYXJpYWJsZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGtleSkgewogICAgICAgICAgdGhpcy5zdGF0dXMgPSAiVXBsb2FkaW5nICIgKyB2YWx1ZS5maWxlTmFtZSArICIuLi4gcGxlYXNlIGJlIHBhdGllbnQgOikiOwogICAgICAgICAgY29uc29sZS5sb2coIlVwbG9hZGVkOiIgKyB2YWx1ZS51cGxvYWRlZCk7CgogICAgICAgICAgaWYgKHZhbHVlLnVwbG9hZGVkID09IGZhbHNlKSB7CiAgICAgICAgICAgIHZhciBjdXJySW1hZ2VSZWYgPSB0aGlzLnN0b3J5UmVmLmNoaWxkKGtleS5yZXBsYWNlKCJAIiwgIiIpICsgIj0iICsgdmFsdWUuZmlsZU5hbWUpOwogICAgICAgICAgICB2YXIgZmlsZSA9IHZhbHVlLmZpbGU7CiAgICAgICAgICAgIHRoaXMudG90YWxGaWxlU2l6ZSArPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNDsKCiAgICAgICAgICAgIGlmICh0aGlzLnRvdGFsRmlsZVNpemUgPiB0aGlzLm1heFN0b3JhZ2VTaXplKSB7CiAgICAgICAgICAgICAgdGhpcy50b3RhbEZpbGVTaXplIC09IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0OwogICAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gIlNvcnJ5ISBJdCBsb29rcyBsaWtlIHlvdSd2ZSBydW4gb3V0IG9mIHN0b3JhZ2Ugc3BhY2UuIFRyeSB1cGxvYWRpbmcgc21hbGxlciBmaWxlcyEiOyAvL3RoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5kZWxldGVJbWFnZVZhcmlhYmxlKGtleSk7CgogICAgICAgICAgICAgIHRoaXMucmVtb3ZlSW1hZ2VWYXJpYWJsZSh7CiAgICAgICAgICAgICAgICBuYW1lOiBrZXksCiAgICAgICAgICAgICAgICBmaWxlTmFtZTogdmFsdWUuZmlsZU5hbWUsCiAgICAgICAgICAgICAgICBmaWxlOiB2YWx1ZS5maWxlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY3VyckltYWdlUmVmLnB1dChmaWxlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gIlVwbG9hZCBmb3IgIiArIHZhbHVlLmZpbGVOYW1lICsgIiBzdWNjZXNzZnVsLi4uIHRoYW5rcyBmb3Igd2FpdGluZyEiOwoKICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5wYXRoLmkuaW5jbHVkZXMoImJsb2IiKSkgewogICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHZhbHVlLnBhdGguaSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgICAgICAgZmlsZTogdmFsdWUuZmlsZSwKICAgICAgICAgICAgICAgICAgZmlsZU5hbWU6IHZhbHVlLmZpbGVOYW1lLAogICAgICAgICAgICAgICAgICBwYXRoOiBjdXJySW1hZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKSwKICAgICAgICAgICAgICAgICAgY29sb3I6IHZhbHVlLmNvbG9yLAogICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaWQsCiAgICAgICAgICAgICAgICAgIHVwbG9hZGVkOiB0cnVlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLnNldEltYWdlVmFyaWFibGUoa2V5LCBvYmopOyAvL2NvbnNvbGUubG9nKHRoaXMuaW1hZ2VWYXJpYWJsZXMpOwogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnRvdGFsRmlsZVNpemUpOwoKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5Kys7CiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckhpbnRzLm1lZGlhUmVuZGVyS2V5Kys7CiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrUmVuZGVySGludHMoKTsKICAgICAgICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfS5iaW5kKHRoaXMpKTsKICAgICAgfSAvLy8vLwoKICAgIH0sCiAgICBhZGRBdWRpb1ZhcmlhYmxlOiBmdW5jdGlvbiBhZGRBdWRpb1ZhcmlhYmxlKGV2ZW50KSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnQubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuYWRkQXVkaW9WYXJpYWJsZShldmVudFtpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5yZXBhcnNlTWVkaWEoKTsKICAgICAgdGhpcy53cml0ZVRvU3RvcmFnZSgpOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLnJlbmRlckhpbnRzLm1lZGlhUmVuZGVyS2V5Kys7CiAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOyAvLy8vLwoKICAgICAgaWYgKHRoaXMuaXNMb2dnZWRJbikgewogICAgICAgIHRoaXMuYXVkaW9WYXJpYWJsZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGtleSkgewogICAgICAgICAgdGhpcy5zdGF0dXMgPSAiVXBsb2FkaW5nICIgKyB2YWx1ZS5maWxlTmFtZSArICIuLi4gcGxlYXNlIGJlIHBhdGllbnQgOikiOwogICAgICAgICAgY29uc29sZS5sb2coIlVwbG9hZGVkOiIgKyB2YWx1ZS51cGxvYWRlZCk7CgogICAgICAgICAgaWYgKHZhbHVlLnVwbG9hZGVkID09IGZhbHNlKSB7CiAgICAgICAgICAgIHZhciBjdXJyQXVkUmVmID0gdGhpcy5zdG9yeVJlZi5jaGlsZChrZXkucmVwbGFjZSgiQCIsICIiKSArICI9IiArIHZhbHVlLmZpbGVOYW1lKTsKICAgICAgICAgICAgdmFyIGZpbGUgPSB2YWx1ZS5maWxlOwogICAgICAgICAgICB0aGlzLnRvdGFsRmlsZVNpemUgKz0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQ7CgogICAgICAgICAgICBpZiAodGhpcy50b3RhbEZpbGVTaXplID4gdGhpcy5tYXhTdG9yYWdlU2l6ZSkgewogICAgICAgICAgICAgIHRoaXMudG90YWxGaWxlU2l6ZSAtPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNDsKICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9ICJTb3JyeSEgSXQgbG9va3MgbGlrZSB5b3UndmUgcnVuIG91dCBvZiBzdG9yYWdlIHNwYWNlLiBUcnkgdXBsb2FkaW5nIHNtYWxsZXIgZmlsZXMhIjsgLy90aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuZGVsZXRlQXVkaW9WYXJpYWJsZShrZXkpOwoKICAgICAgICAgICAgICB0aGlzLnJlbW92ZUF1ZGlvVmFyaWFibGUoewogICAgICAgICAgICAgICAgbmFtZToga2V5LAogICAgICAgICAgICAgICAgZmlsZU5hbWU6IHZhbHVlLmZpbGVOYW1lLAogICAgICAgICAgICAgICAgZmlsZTogdmFsdWUuZmlsZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGN1cnJBdWRSZWYucHV0KGZpbGUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSAiVXBsb2FkIGZvciAiICsgdmFsdWUuZmlsZU5hbWUgKyAiIHN1Y2Nlc3NmdWwuLi4gdGhhbmtzIGZvciB3YWl0aW5nISI7CgogICAgICAgICAgICAgICAgaWYgKHZhbHVlLnBhdGguaS5pbmNsdWRlcygiYmxvYiIpKSB7CiAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodmFsdWUucGF0aC5pKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICAgICAgICBmaWxlOiB2YWx1ZS5maWxlLAogICAgICAgICAgICAgICAgICBmaWxlTmFtZTogdmFsdWUuZmlsZU5hbWUsCiAgICAgICAgICAgICAgICAgIHBhdGg6IGN1cnJBdWRSZWYuZ2V0RG93bmxvYWRVUkwoKSwKICAgICAgICAgICAgICAgICAgY29sb3I6IHZhbHVlLmNvbG9yLAogICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaWQsCiAgICAgICAgICAgICAgICAgIHVwbG9hZGVkOiB0cnVlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLnNldEF1ZGlvVmFyaWFibGUoa2V5LCBvYmopOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5hdWRpb1ZhcmlhYmxlcyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRvdGFsRmlsZVNpemUpOwogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVySGludHMubWVkaWFSZW5kZXJLZXkrKzsKICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOwogICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICB9IC8vLy8vCgogICAgfSwKICAgIHJlbW92ZUltYWdlVmFyaWFibGU6IGZ1bmN0aW9uIHJlbW92ZUltYWdlVmFyaWFibGUoZXZlbnQpIHsKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmRlbGV0ZUltYWdlVmFyaWFibGUoZXZlbnQpOwogICAgICB0aGlzLndyaXRlVG9TdG9yYWdlKCk7CiAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5Kys7CiAgICAgIHRoaXMucmVuZGVySGludHMubWVkaWFSZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7IC8vLy8vCgogICAgICBpZiAodGhpcy5pc0xvZ2dlZEluKSB7CiAgICAgICAgdmFyIHJlbW92ZVJlZiA9IHRoaXMuc3RvcnlSZWYuY2hpbGQoZXZlbnQubmFtZS5yZXBsYWNlKCJAIiwgIiIpICsgIj0iICsgZXZlbnQuZmlsZU5hbWUpOwogICAgICAgIHJlbW92ZVJlZi5kZWxldGUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJERUxFVEVEIik7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy53cml0ZVRvU3RvcmFnZSgpOwogICAgICAgIHRoaXMudG90YWxGaWxlU2l6ZSAtPSBldmVudC5maWxlLnNpemUgLyAxMDI0IC8gMTAyNDsKICAgICAgfSAvLy8vLwoKICAgIH0sCiAgICByZW1vdmVBdWRpb1ZhcmlhYmxlOiBmdW5jdGlvbiByZW1vdmVBdWRpb1ZhcmlhYmxlKGV2ZW50KSB7CiAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5kZWxldGVBdWRpb1ZhcmlhYmxlKGV2ZW50KTsKICAgICAgdGhpcy53cml0ZVRvU3RvcmFnZSgpOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLnJlbmRlckhpbnRzLm1lZGlhUmVuZGVyS2V5Kys7CiAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOyAvLy8vLwoKICAgICAgaWYgKHRoaXMuaXNMb2dnZWRJbikgewogICAgICAgIHZhciByZW1vdmVSZWYgPSB0aGlzLnN0b3J5UmVmLmNoaWxkKGV2ZW50Lm5hbWUucmVwbGFjZSgiQCIsICIiKSArICI9IiArIGV2ZW50LmZpbGVOYW1lKTsKICAgICAgICByZW1vdmVSZWYuZGVsZXRlKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiREVMRVRFRCIpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMud3JpdGVUb1N0b3JhZ2UoKTsKICAgICAgICB0aGlzLnRvdGFsRmlsZVNpemUgLT0gZXZlbnQuZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQ7CiAgICAgIH0gLy8vLy8KCiAgICB9LAogICAgYWRkSW1hZ2VUb1BhZ2U6IGZ1bmN0aW9uIGFkZEltYWdlVG9QYWdlKGV2ZW50KSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIG5hbWU6IGV2ZW50Lm5hbWUsCiAgICAgICAgcGFnZU5hbWU6IHRoaXMuc3RvcnlQYWdlc1t0aGlzLmN1cnJlbnRQYWdlIC0gMV0ucGFnZU5hbWUKICAgICAgfTsKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmFkZEltYWdlVG9QYWdlKGRhdGEpOwogICAgICB0aGlzLndyaXRlVG9TdG9yYWdlKCk7CiAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5Kys7CiAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOwogICAgfSwKICAgIGFkZEF1ZGlvVG9QYWdlOiBmdW5jdGlvbiBhZGRBdWRpb1RvUGFnZShldmVudCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBuYW1lOiBldmVudC5uYW1lLAogICAgICAgIHBhZ2VOYW1lOiB0aGlzLnN0b3J5UGFnZXNbdGhpcy5jdXJyZW50UGFnZSAtIDFdLnBhZ2VOYW1lCiAgICAgIH07CiAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5hZGRBdWRpb1RvUGFnZShkYXRhKTsKICAgICAgdGhpcy53cml0ZVRvU3RvcmFnZSgpOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLmNoZWNrUmVuZGVySGludHMoKTsKICAgIH0sCiAgICByZW1vdmVJbWFnZUZyb21QYWdlOiBmdW5jdGlvbiByZW1vdmVJbWFnZUZyb21QYWdlKGV2ZW50KSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIG5hbWU6IGV2ZW50Lm5hbWUsCiAgICAgICAgcGFnZU5hbWU6IHRoaXMuc3RvcnlQYWdlc1t0aGlzLmN1cnJlbnRQYWdlIC0gMV0ucGFnZU5hbWUKICAgICAgfTsKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLnJlbW92ZUltYWdlRnJvbVBhZ2UoZGF0YSk7CiAgICAgIHRoaXMud3JpdGVUb1N0b3JhZ2UoKTsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICB9LAogICAgcmVtb3ZlQXVkaW9Gcm9tUGFnZTogZnVuY3Rpb24gcmVtb3ZlQXVkaW9Gcm9tUGFnZShldmVudCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBuYW1lOiBldmVudC5uYW1lLAogICAgICAgIHBhZ2VOYW1lOiB0aGlzLnN0b3J5UGFnZXNbdGhpcy5jdXJyZW50UGFnZSAtIDFdLnBhZ2VOYW1lCiAgICAgIH07CiAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5yZW1vdmVBdWRpb0Zyb21QYWdlKGRhdGEpOwogICAgICB0aGlzLndyaXRlVG9TdG9yYWdlKCk7CiAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5Kys7CiAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOwogICAgfSwKICAgIG5leHRQYWdlOiBmdW5jdGlvbiBuZXh0UGFnZShldmVudCkgewogICAgICB0aGlzLnBhZ2VzVmlzaXRlZC5wdXNoKHRoaXMuY3VycmVudFBhZ2UpOwoKICAgICAgaWYgKGV2ZW50LmxvY2F0aW9uIDwgdGhpcy5zdG9yeVBhZ2VzLmxlbmd0aCkgewogICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBldmVudC5sb2NhdGlvbiArIDE7CiAgICAgIH0KCiAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5Kys7CiAgICAgIHRoaXMucmVuZGVySGludHMudGhlbWVzUmVuZGVyS2V5Kys7CiAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOwogICAgfSwKICAgIGdvVG9TdGFydDogZnVuY3Rpb24gZ29Ub1N0YXJ0KCkgewogICAgICB0aGlzLnBhZ2VzVmlzaXRlZCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuc3RvcnlQYWdlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnN0b3J5UGFnZXNbaV0ubGlua1Bhc3NhZ2UudGFncy5pbmNsdWRlcygic3RhcnQiKSkgewogICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IGkgKyAxOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnRoZW1lc1JlbmRlcktleSsrOwogICAgICB0aGlzLmNoZWNrUmVuZGVySGludHMoKTsKICAgIH0sCiAgICBzZXRTdGFydFBhZ2U6IGZ1bmN0aW9uIHNldFN0YXJ0UGFnZShldmVudCkgewogICAgICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3Iuc2V0U3RhcnRQYWdlKGV2ZW50KTsKICAgICAgdGhpcy53cml0ZVRvU3RvcmFnZSgpOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnRoZW1lc1JlbmRlcktleSsrOwogICAgICB0aGlzLmNoZWNrUmVuZGVySGludHMoKTsKICAgIH0sCiAgICBwcmV2UGFnZTogZnVuY3Rpb24gcHJldlBhZ2UoKSB7CiAgICAgIGlmICh0aGlzLnBhZ2VzVmlzaXRlZC5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHRoaXMucGFnZXNWaXNpdGVkW3RoaXMucGFnZXNWaXNpdGVkLmxlbmd0aCAtIDFdOwogICAgICAgIHRoaXMucGFnZXNWaXNpdGVkLnBvcCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgdGhpcy5yZW5kZXJIaW50cy50aGVtZXNSZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGFkZFBhZ2U6IGZ1bmN0aW9uIGFkZFBhZ2UoZXZlbnQpIHsKICAgICAgdGhpcy5zdG9yeVBhZ2VzW3RoaXMuY3VycmVudFBhZ2UgLSAxXS5saW5rUGFzc2FnZS50ZXh0ICs9ICJcbltbIiArIGV2ZW50Lm5hbWUgKyAiXV0iOwogICAgICB2YXIgdmFyaWFibGVzUGFzc2FnZSA9IHRoaXMuc3RvcnlQYWdlc1t0aGlzLmN1cnJlbnRQYWdlIC0gMV0ubGlua1Bhc3NhZ2UudGFncy5pbmNsdWRlcygidmFyaWFibGVzIik7CiAgICAgIHRoaXMudXBkYXRlUGFzc2FnZSh7CiAgICAgICAgbmFtZTogdGhpcy5zdG9yeVBhZ2VzW3RoaXMuY3VycmVudFBhZ2UgLSAxXS5saW5rUGFzc2FnZS5uYW1lLAogICAgICAgIHRleHQ6IHRoaXMuc3RvcnlQYWdlc1t0aGlzLmN1cnJlbnRQYWdlIC0gMV0ubGlua1Bhc3NhZ2UudGV4dCwKICAgICAgICBpc1ZhcmlhYmxlczogdmFyaWFibGVzUGFzc2FnZQogICAgICB9KTsKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmFkZFBhZ2UoewogICAgICAgIG5hbWU6IGV2ZW50Lm5hbWUsCiAgICAgICAgcHJldkxpbms6IHRoaXMuc3RvcnlQYWdlc1t0aGlzLmN1cnJlbnRQYWdlIC0gMV0ubGlua1Bhc3NhZ2UubmFtZQogICAgICB9KTsKICAgICAgdGhpcy53cml0ZVRvU3RvcmFnZSgpOwogICAgICB0aGlzLmdvVG9QYWdlKGV2ZW50KTsKICAgIH0sCiAgICBnb1RvUGFnZTogZnVuY3Rpb24gZ29Ub1BhZ2UoZXZlbnQpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuc3RvcnlQYWdlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnN0b3J5UGFnZXNbaV0ubGlua1Bhc3NhZ2UubmFtZSA9PSBldmVudC5uYW1lKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gaSArIDE7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5Kys7CiAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOwogICAgfSwKICAgIHNob3dUaGVtZXM6IGZ1bmN0aW9uIHNob3dUaGVtZXMoKSB7CiAgICAgIHRoaXMudGhlbWVWaWV3ID0gdHJ1ZTsKICAgICAgdGhpcy5yZWdlbmVyYXRlU3RvcnlUZXh0KHsKICAgICAgICBkaXNwOiB0aGlzLnJlbmRlckhpbnRzLmhpZGRlbgogICAgICB9KTsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgdGhpcy5yZW5kZXJIaW50cy50aGVtZXNSZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICB9LAogICAgaGlkZVRoZW1lczogZnVuY3Rpb24gaGlkZVRoZW1lcygpIHsKICAgICAgdGhpcy50aGVtZVZpZXcgPSBmYWxzZTsKICAgICAgdGhpcy5yZWdlbmVyYXRlU3RvcnlUZXh0KHsKICAgICAgICBkaXNwOiB0aGlzLnJlbmRlckhpbnRzLmhpZGRlbgogICAgICB9KTsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgdGhpcy5yZW5kZXJIaW50cy50aGVtZXNSZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICB9LAogICAgc2V0VGhlbWU6IGZ1bmN0aW9uIHNldFRoZW1lKGV2ZW50KSB7CiAgICAgIHRoaXMuc3RvcnlQYWdlc1t0aGlzLmN1cnJlbnRQYWdlIC0gMV0udGhlbWUgPSAiY29sb3I6IiArIGV2ZW50LnRleHRDb2xvciArICI7YmFja2dyb3VuZC1jb2xvcjoiICsgZXZlbnQuYmdDb2xvcjsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgdGhpcy5yZW5kZXJIaW50cy50aGVtZXNSZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICB9LAogICAgc2V0VGhlbWVBbGw6IGZ1bmN0aW9uIHNldFRoZW1lQWxsKGV2ZW50KSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdG9yeVBhZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5zdG9yeVBhZ2VzW2ldLnRoZW1lID0gImNvbG9yOiIgKyBldmVudC50ZXh0Q29sb3IgKyAiO2JhY2tncm91bmQtY29sb3I6IiArIGV2ZW50LmJnQ29sb3I7CiAgICAgIH0KCiAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5Kys7CiAgICAgIHRoaXMucmVuZGVySGludHMudGhlbWVzUmVuZGVyS2V5Kys7CiAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOwogICAgfSwKICAgIHNldFZhcmlhYmxlOiBmdW5jdGlvbiBzZXRWYXJpYWJsZShldmVudCkgewogICAgICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3Iuc2V0VGV4dFZhcmlhYmxlKGV2ZW50Lm5hbWUsIGV2ZW50LnZhbHVlKTsKICAgICAgdGhpcy53cml0ZVRvU3RvcmFnZSgpOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLmNoZWNrUmVuZGVySGludHMoKTsKICAgIH0sCiAgICBzZXRWYXJpYWJsZU5hbWU6IGZ1bmN0aW9uIHNldFZhcmlhYmxlTmFtZShldmVudCkgewogICAgICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuY2hhbmdlVGV4dFZhcmlhYmxlTmFtZShldmVudCk7CiAgICAgIHRoaXMud3JpdGVUb1N0b3JhZ2UoKTsKICAgICAgdGhpcy5yZW5kZXJIaW50cy52YXJpYWJsZVJlbmRlcktleSsrOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLmNoZWNrUmVuZGVySGludHMoKTsKICAgIH0sCiAgICBkZWxldGVWYXJpYWJsZTogZnVuY3Rpb24gZGVsZXRlVmFyaWFibGUoZXZlbnQpIHsKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmRlbGV0ZVRleHRWYXJpYWJsZShldmVudCk7CiAgICAgIHRoaXMud3JpdGVUb1N0b3JhZ2UoKTsKICAgICAgdGhpcy5yZW5kZXJIaW50cy52YXJpYWJsZVJlbmRlcktleSsrOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLmNoZWNrUmVuZGVySGludHMoKTsKICAgIH0sCiAgICByZWdlbmVyYXRlU3RvcnlUZXh0OiBmdW5jdGlvbiByZWdlbmVyYXRlU3RvcnlUZXh0KGV2ZW50KSB7CiAgICAgIHRoaXMucmVuZGVySGludHMuaGlkZGVuID0gZXZlbnQuZGlzcDsKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmdlbmVyYXRlU3RvcnlUZXh0KHRoaXMucmVuZGVySGludHMuaGlkZGVuLCB0aGlzLnJlbmRlckhpbnRzLmluVmFyaWFibGVFZGl0b3IsIHRoaXMucmVuZGVySGludHMuaW5NZWRpYUVkaXRvcik7CiAgICAgIHRoaXMuc3RvcnlWYXJpYWJsZXMgPSB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IudmFyaWFibGVzOwogICAgICB0aGlzLmltYWdlVmFyaWFibGVzID0gdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmltYWdlVmFyaWFibGVzOwogICAgICB0aGlzLmF1ZGlvVmFyaWFibGVzID0gdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmF1ZGlvVmFyaWFibGVzOwogICAgICB0aGlzLnN0b3J5UGFnZXMgPSB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuZXhwb3J0ZWRTdG9yeVBhZ2VzOwogICAgICB0aGlzLnN0b3J5TmFtZSA9IHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5iYXNlU3RvcnkubmFtZTsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICB9LAogICAgYWRkTmV3VmFyaWFibGU6IGZ1bmN0aW9uIGFkZE5ld1ZhcmlhYmxlKGV2ZW50KSB7CiAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5hZGRUZXh0VmFyaWFibGUoZXZlbnQpOwogICAgICB0aGlzLndyaXRlVG9TdG9yYWdlKCk7CiAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5Kys7CiAgICAgIHRoaXMucmVuZGVySGludHMudmFyaWFibGVSZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICB9LAogICAgYWRkTGluazogZnVuY3Rpb24gYWRkTGluayhldmVudCkgewogICAgICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuYWRkTGluayh7CiAgICAgICAgcGFnZU5hbWU6IHRoaXMuc3RvcnlQYWdlc1t0aGlzLmN1cnJlbnRQYWdlIC0gMV0ucGFnZU5hbWUsCiAgICAgICAgbmFtZTogZXZlbnQubmFtZQogICAgICB9KTsKICAgICAgdGhpcy53cml0ZVRvU3RvcmFnZSgpOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnBhc3NhZ2VSZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICB9LAogICAgcmVtb3ZlTGluazogZnVuY3Rpb24gcmVtb3ZlTGluayhldmVudCkgewogICAgICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IucmVtb3ZlTGluayhldmVudCk7CiAgICAgIHRoaXMud3JpdGVUb1N0b3JhZ2UoKTsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICB9LAogICAgdXBkYXRlUGFzc2FnZTogZnVuY3Rpb24gdXBkYXRlUGFzc2FnZShldmVudCkgewogICAgICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3Iuc2V0UGFzc2FnZShldmVudC5uYW1lLCBldmVudC50ZXh0KTsKICAgICAgdGhpcy53cml0ZVRvU3RvcmFnZSgpOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnJlbmRlcktleSsrOwogICAgICB0aGlzLnJlbmRlckhpbnRzLnBhc3NhZ2VSZW5kZXJLZXkrKzsKCiAgICAgIGlmIChldmVudC5pc1ZhcmlhYmxlcykgewogICAgICAgIHRoaXMucmVuZGVySGludHMudmFyaWFibGVSZW5kZXJLZXkrKzsKICAgICAgfQoKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICB9LAogICAgdXBkYXRlUGFzc2FnZU5hbWU6IGZ1bmN0aW9uIHVwZGF0ZVBhc3NhZ2VOYW1lKGV2ZW50KSB7CiAgICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5jaGFuZ2VQYXNzYWdlTmFtZShldmVudCk7CiAgICAgIHRoaXMud3JpdGVUb1N0b3JhZ2UoKTsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5wYXNzYWdlUmVuZGVyS2V5Kys7CiAgICAgIHRoaXMuY2hlY2tSZW5kZXJIaW50cygpOwogICAgfSwKICAgIGRlbGV0ZVBhc3NhZ2U6IGZ1bmN0aW9uIGRlbGV0ZVBhc3NhZ2UoZXZlbnQpIHsKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmRlbGV0ZVBhc3NhZ2UoZXZlbnQpOwogICAgICB0aGlzLndyaXRlVG9TdG9yYWdlKCk7CiAgICAgIHRoaXMucmVuZGVySGludHMucGFzc2FnZVJlbmRlcktleSsrOwoKICAgICAgaWYgKCF0aGlzLnByZXZQYWdlKCkpIHsKICAgICAgICB0aGlzLmdvVG9TdGFydCgpOwogICAgICB9CiAgICB9LAogICAgY2hhbmdlU3RvcnlOYW1lOiBmdW5jdGlvbiBjaGFuZ2VTdG9yeU5hbWUoZXZlbnQpIHsKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmNoYW5nZVN0b3J5TmFtZShldmVudCk7CiAgICAgIHRoaXMud3JpdGVUb1N0b3JhZ2UoKTsKICAgICAgdGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkrKzsKICAgICAgdGhpcy5jaGVja1JlbmRlckhpbnRzKCk7CiAgICB9LAogICAgZG93bmxvYWRTdG9yeVR3ZWU6IGZ1bmN0aW9uIGRvd25sb2FkU3RvcnlUd2VlKCkgewogICAgICB2YXIgc3RvcnlWaWV3ID0gdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmdlbmVyYXRlU2F2ZVN0b3J5KCk7CiAgICAgIHRoaXMuaGFuZGxlcy5maWxlQ29udmVydGVyLnN0b3J5ID0gc3RvcnlWaWV3OwogICAgICB2YXIgdHdlZUJsb2IgPSB0aGlzLmhhbmRsZXMuZmlsZUNvbnZlcnRlci50d2VlKCk7CiAgICAgIHZhciBkbGJsb2IgPSBuZXcgQmxvYihbdHdlZUJsb2JdLCB7CiAgICAgICAgdHlwZTogInRleHQvcGxhaW4iCiAgICAgIH0pOwogICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChkbGJsb2IpOwogICAgICBsaW5rLnRhcmdldCA9ICJfYmxhbmsiOwogICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuYmFzZVN0b3J5Lm5hbWUgKyAiLnR3ZWUiKTsKICAgICAgbGluay5jbGljaygpOwogICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGxpbmsuaHJlZik7IC8vdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLnJlbW92ZVZhcmlhYmxlSW5qZWN0KCk7CiAgICB9LAogICAgc2F2ZVN0b3J5VG9Qcm9maWxlOiBmdW5jdGlvbiBzYXZlU3RvcnlUb1Byb2ZpbGUoKSB7CiAgICAgIHZhciBjbG91ZFN0b3J5ID0gdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmdlbmVyYXRlU2F2ZVN0b3J5KCk7CiAgICAgIHRoaXMuaGFuZGxlcy5maWxlQ29udmVydGVyLnN0b3J5ID0gY2xvdWRTdG9yeTsKICAgICAgdmFyIHR3ZWVCbG9iID0gdGhpcy5oYW5kbGVzLmZpbGVDb252ZXJ0ZXIudHdlZSgpOwogICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBkcmFmdE9iaiA9IHsKICAgICAgICB0ZXh0OiB0d2VlQmxvYiwKICAgICAgICBkYXRlVXBkYXRlZDogZC5nZXRNb250aCgpICsgMSArICIvIiArIGQuZ2V0RGF0ZSgpICsgIi8iICsgZC5nZXRGdWxsWWVhcigpLAogICAgICAgIE9Hc3Rvcnk6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oIk9Hc3RvcnlQYXNzYWdlcyIpCiAgICAgIH07CgogICAgICBpZiAoZGIucmVmKCJhY2NvdW50cy8iICsgZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZCArICIvZHJhZnRzLyIgKyB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuYmFzZVN0b3J5Lm5hbWUpKSB7CiAgICAgICAgZGIucmVmKCJhY2NvdW50cy8iICsgZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZCArICIvZHJhZnRzLyIgKyB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuYmFzZVN0b3J5Lm5hbWUpLnVwZGF0ZShkcmFmdE9iaik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGIucmVmKCJhY2NvdW50cy8iICsgZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZCArICIvZHJhZnRzLyIgKyB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuYmFzZVN0b3J5Lm5hbWUpLnB1c2goZHJhZnRPYmopOwogICAgICB9CgogICAgICBhbGVydCgiWW91ciBzdG9yeSB3YXMgc2F2ZWQgc3VjY2Vzc2Z1bGx5ISIpOwogICAgfSwKICAgIGdldEV4cG9ydEZpbGU6IGZ1bmN0aW9uIGdldEV4cG9ydEZpbGUoKSB7CiAgICAgIHZhciBjbG91ZFN0b3J5ID0gdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmdlbmVyYXRlUHVibGlzaFN0b3J5KCk7CiAgICAgIHRoaXMuaGFuZGxlcy5maWxlQ29udmVydGVyLnN0b3J5ID0gY2xvdWRTdG9yeTsKICAgICAgdmFyIHR3ZWVCbG9iID0gdGhpcy5oYW5kbGVzLmZpbGVDb252ZXJ0ZXIudHdlZSgpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZVN0b3J5UHVibGlzaCIsIHR3ZWVCbG9iKTsKICAgIH0sCiAgICBkb3dubG9hZFN0b3J5OiBmdW5jdGlvbiBkb3dubG9hZFN0b3J5KCkgewogICAgICB2YXIgc3RvcnlWaWV3ID0gdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmdlbmVyYXRlVmlld1N0b3J5KHRydWUpOwogICAgICB0aGlzLmhhbmRsZXMuZmlsZUNvbnZlcnRlci5zdG9yeSA9IHN0b3J5VmlldzsKICAgICAgdmFyIGh0bWxCbG9iID0gdGhpcy5oYW5kbGVzLmZpbGVDb252ZXJ0ZXIuaHRtbCh0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuY3NzLCAiIik7CiAgICAgIHN0b3J5VmlldyA9IHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5nZW5lcmF0ZVNhdmVTdG9yeSgpOwogICAgICB0aGlzLmhhbmRsZXMuZmlsZUNvbnZlcnRlci5zdG9yeSA9IHN0b3J5VmlldzsKICAgICAgdmFyIHR3ZWVCbG9iID0gdGhpcy5oYW5kbGVzLmZpbGVDb252ZXJ0ZXIudHdlZSgpOwogICAgICB2YXIgemlwID0gbmV3IEpTWmlwKCk7CiAgICAgIHppcC5maWxlKHRoaXMuc3RvcnlOYW1lICsgIi5odG1sIiwgaHRtbEJsb2IpOwogICAgICB6aXAuZmlsZSh0aGlzLnN0b3J5TmFtZSArICIudHdlZSIsIHR3ZWVCbG9iKTsKICAgICAgemlwLmZpbGUoInJlYWRNZS50eHQiLCAiVG8gdmlldyB0aGUgc3RvcnksIGRvdWJsZSBjbGljayBvbiB0aGUgaHRtbCBmaWxlLlxuSWYgdGhlIHVzZXIgd2FudHMgdG8gcmUtZWRpdCB0aGUgc3RvcnksIHRoZXkgbXVzdCB1cGxvYWQgdGhlIC50d2VlIGZpbGUgdG8gb3VyIHdlYnNpdGUuXG5DcmVhdGUgYW4gYWNjb3VudCB0byBzYXZlIHN0b3JpZXMsIGRvd25sb2FkIHN0b3JpZXMgYW5kIG1vcmUhIik7CiAgICAgIHZhciBuYW1lID0gdGhpcy5zdG9yeU5hbWU7CiAgICAgIHppcC5nZW5lcmF0ZUFzeW5jKHsKICAgICAgICB0eXBlOiAiYmxvYiIKICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29udGVudCkgewogICAgICAgIC8vIHNlZSBGaWxlU2F2ZXIuanMKICAgICAgICBGaWxlU2F2ZXIuc2F2ZUFzKGNvbnRlbnQsIG5hbWUgKyAiLnppcCIpOwogICAgICB9KTsgLy90aGlzLmhhbmRsZXMuZmlsZUNvbnZlcnRlci5odG1sKGV2ZW50LmNzcywgZXZlbnQuanMpOwogICAgfSwKICAgIHZpZXdTdG9yeUhUTUw6IGZ1bmN0aW9uIHZpZXdTdG9yeUhUTUwoKSB7CiAgICAgIHZhciBzdG9yeVZpZXcgPSB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuZ2VuZXJhdGVWaWV3U3RvcnkodHJ1ZSk7CiAgICAgIHRoaXMuaGFuZGxlcy5maWxlQ29udmVydGVyLnN0b3J5ID0gc3RvcnlWaWV3OyAvL3RoaXMuaGFuZGxlcy5maWxlQ29udmVydGVyLmh0bWwoZXZlbnQuY3NzLCBldmVudC5qcyk7CgogICAgICB2YXIgaHRtbEJsb2IgPSB0aGlzLmhhbmRsZXMuZmlsZUNvbnZlcnRlci5odG1sKHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5jc3MsICIiKTsKICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2h0bWxCbG9iXSwgewogICAgICAgIHR5cGU6ICJ0ZXh0L2h0bWwiCiAgICAgIH0pKTsKICAgICAgbGluay50YXJnZXQgPSAiX2JsYW5rIjsgLy9saW5rLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmJhc2VTdG9yeS5uYW1lICsgJy5odG1sJyk7CgogICAgICBsaW5rLmNsaWNrKCk7CiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwobGluay5ocmVmKTsgLy90aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IucmVtb3ZlVmFyaWFibGVJbmplY3QoKTsKICAgIH0sCgogICAgLyp2aWV3SFRNTEJsb2I6IGZ1bmN0aW9uKGh0bWxDb250ZW50cyl7CiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2h0bWxDb250ZW50c10sIHt0eXBlOiAidGV4dC9odG1sIn0pKTsKICAgICAgICAgICAgbGluay50YXJnZXQgPSAiX2JsYW5rIgogICAgICAgICAgICAvL2xpbmsuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsICB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuYmFzZVN0b3J5Lm5hbWUgKyAnLmh0bWwnKTsKICAgICAgICAgICAgbGluay5jbGljaygpOwogICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGxpbmsuaHJlZik7CiAgICAgICAgfSwqLwogICAgcHVibGlzaFN0b3J5VHlwZTogZnVuY3Rpb24gcHVibGlzaFN0b3J5VHlwZSgpIHsKICAgICAgdmFyIHRlbXBsYXRlQ2hhbmdlZCA9IHRoaXMuY2hlY2tVbmlxdWVTdG9yeSgpOwoKICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImNyZWF0ZVRlbXBsYXRlIikgPT09ICJ5ZXMiICYmIHRlbXBsYXRlQ2hhbmdlZCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuY2hlY2tVbmlxdWVUZW1wbGF0ZSgpOwogICAgICB9CiAgICB9LAogICAgY2hlY2tVbmlxdWVUZW1wbGF0ZTogZnVuY3Rpb24gY2hlY2tVbmlxdWVUZW1wbGF0ZSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgY2FuU3VibWl0ID0gdHJ1ZTsKCiAgICAgIHZhciBUeXBlc2Vuc2UgPSByZXF1aXJlKCJ0eXBlc2Vuc2UiKTsKCiAgICAgIHZhciB0eXBlc2Vuc2UgPSBuZXcgVHlwZXNlbnNlLkNsaWVudCh7CiAgICAgICAgbm9kZXM6IFt7CiAgICAgICAgICAvL2hvc3Q6ICdsb2NhbGhvc3QnLAogICAgICAgICAgLy8gaG9zdDogInZjbS0xNTQzMS52bS5kdWtlLmVkdSIsCiAgICAgICAgICAvLyBwb3J0OiAiODEwOCIsCiAgICAgICAgICAvLyBwcm90b2NvbDogImh0dHBzIgogICAgICAgICAgaG9zdDogImF2Mnhya2k2eTU0aGwzd2JwLTEuYTEudHlwZXNlbnNlLm5ldCIsCiAgICAgICAgICBwb3J0OiAiNDQzIiwKICAgICAgICAgIHByb3RvY29sOiAiaHR0cHMiCiAgICAgICAgfV0sCiAgICAgICAgLy8gYXBpS2V5OiAiWU9ZQ3BGTGo5dTQxMmloaWdzdENlcjVaczJTdHpwdFIiCiAgICAgICAgYXBpS2V5OiAiSTFSRG5wZkJ4ZHBsbERjaHRqN2dzbHpzcXdwbW52bWkiCiAgICAgIH0pOwogICAgICB0eXBlc2Vuc2UuY29sbGVjdGlvbnMoInN0b3JpZXMiKS5yZXRyaWV2ZSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICB2YXIgbnVtRG9jcyA9IGRhdGEubnVtX2RvY3VtZW50czsKCiAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkgewogICAgICAgICAgdHlwZXNlbnNlLmNvbGxlY3Rpb25zKCJzdG9yaWVzIikuZG9jdW1lbnRzKGkudG9TdHJpbmcoKSkucmV0cmlldmUoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgIHZhciBhRmlsZUNvbnZlcnRlciA9IG5ldyBGaWxlQ29udmVydGVyKGRhdGEudGV4dCwgZmFsc2UpOwogICAgICAgICAgICB2YXIgYVN0b3J5RWRpdG9yID0gbmV3IFN0b3J5RWRpdG9yKGFGaWxlQ29udmVydGVyLnN0b3J5KTsKICAgICAgICAgICAgdmFyIHMxID0gIiI7CiAgICAgICAgICAgIHZhciBzMiA9ICIiOwoKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFTdG9yeUVkaXRvci5leHBvcnRlZFN0b3J5UGFnZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICAgICAgczEgKz0gYVN0b3J5RWRpdG9yLmV4cG9ydGVkU3RvcnlQYWdlc1tfaV0ubGlua1Bhc3NhZ2UudGV4dDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgX3RoaXM0LnN0b3J5UGFnZXMubGVuZ3RoOyBfaTIrKykgewogICAgICAgICAgICAgIHMyICs9IF90aGlzNC5zdG9yeVBhZ2VzW19pMl0ubGlua1Bhc3NhZ2UudGV4dDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGFTdG9yeUVkaXRvci5leHBvcnRlZFN0b3J5UGFnZXMubGVuZ3RoIDwgX3RoaXM0LnN0b3J5UGFnZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgX2kzID0gYVN0b3J5RWRpdG9yLmV4cG9ydGVkU3RvcnlQYWdlcy5sZW5ndGg7IF9pMyA8IF90aGlzNC5zdG9yeVBhZ2VzLmxlbmd0aDsgX2kzKyspIHsKICAgICAgICAgICAgICAgIHZhciBpbmRleE9wZW5CcmFja2V0cyA9IF90aGlzNC5zdG9yeVBhZ2VzW19pM10ubGlua1Bhc3NhZ2UudGV4dC5pbmRleE9mKCJbWyIpOwoKICAgICAgICAgICAgICAgIHZhciBpbmRleENsb3NlQnJhY2tldHMgPSBfdGhpczQuc3RvcnlQYWdlc1tfaTNdLmxpbmtQYXNzYWdlLnRleHQuaW5kZXhPZigiXV0iKTsKCiAgICAgICAgICAgICAgICB2YXIgY2xlYW5TdHIgPSBfdGhpczQuc3RvcnlQYWdlc1tfaTNdLmxpbmtQYXNzYWdlLnRleHQ7CgogICAgICAgICAgICAgICAgaWYgKGluZGV4T3BlbkJyYWNrZXRzICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgIHZhciBicmFja2V0U3RyID0gX3RoaXM0LnN0b3J5UGFnZXNbX2kzXS5saW5rUGFzc2FnZS50ZXh0LnN1YnN0cmluZyhpbmRleE9wZW5CcmFja2V0cywgaW5kZXhDbG9zZUJyYWNrZXRzICsgMik7CgogICAgICAgICAgICAgICAgICBjbGVhblN0ciA9IF90aGlzNC5zdG9yeVBhZ2VzW19pM10ubGlua1Bhc3NhZ2UudGV4dC5yZXBsYWNlKGJyYWNrZXRTdHIsICIiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX3RoaXM0LnN0b3J5UGFnZXNbX2kzXS5saW5rUGFzc2FnZS50ZXh0LmluY2x1ZGVzKCJUaGlzIGlzIGEgbmV3IHBhc3NhZ2UuIEVkaXQgaXQgdG8gY3JlYXRlIHlvdXIgb3duIHN0b3J5ISIpIHx8IGNsZWFuU3RyLnJlcGxhY2UoL1xzL2csICIiKSA9PT0gIiIpIHsKICAgICAgICAgICAgICAgICAgYWxlcnQoIlBsZWFzZSBlZGl0IGNvbnRlbnQgaW4gbmV3IHBhc3NhZ2VzLiIpOwogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgczIgKz0gY2xlYW5TdHI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgc2ltaWxhcml0eVNjb3JlID0gX3RoaXM0LnNpbWlsYXJpdHkoczEsIHMyKTsgLy9jb25zb2xlLmxvZyhzaW1pbGFyaXR5U2NvcmUpOwoKCiAgICAgICAgICAgIGlmIChzaW1pbGFyaXR5U2NvcmUgPiAwLjc1KSB7CiAgICAgICAgICAgICAgY2FuU3VibWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgYWxlcnQoIlN0b3J5IHRlbXBsYXRlIGlzIHRvbyBzaW1pbGFyIHRvIGV4aXN0aW5nIHRlbXBsYXRlLiBQbGVhc2Ugc3VibWl0IGEgdW5pcXVlIHN0b3J5IHRlbXBsYXRlLiIpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHNpbWlsYXJpdHlTY29yZSA8PSAwLjc1ICYmIGkgPT09IG51bURvY3MgLSAyICYmIGNhblN1Ym1pdCA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIGFsZXJ0KCJTdG9yeSB0ZW1wbGF0ZSBpcyB1bmlxdWUgYW5kIGlzIHJlYWR5IHRvIGJlIHB1Ymxpc2hlZCEiKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtRG9jcyAtIDE7IGkrKykgewogICAgICAgICAgX2xvb3AoaSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyBBZGQgc3VwcG9ydCBmb3IgZHJhZnRzCiAgICBjaGVja1VuaXF1ZVN0b3J5OiBmdW5jdGlvbiBjaGVja1VuaXF1ZVN0b3J5KCkgewogICAgICB2YXIgczEgPSAiIjsKICAgICAgdmFyIHMyID0gIiI7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiT0dzdG9yeVBhc3NhZ2VzIikpLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgczEgKz0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJPR3N0b3J5UGFzc2FnZXMiKSlbaV0ubGlua1Bhc3NhZ2UudGV4dDsKICAgICAgfQoKICAgICAgZm9yICh2YXIgX2k0ID0gMDsgX2k0IDwgdGhpcy5zdG9yeVBhZ2VzLmxlbmd0aDsgX2k0KyspIHsKICAgICAgICBzMiArPSB0aGlzLnN0b3J5UGFnZXNbX2k0XS5saW5rUGFzc2FnZS50ZXh0OwogICAgICB9CgogICAgICBpZiAoSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJPR3N0b3J5UGFzc2FnZXMiKSkubGVuZ3RoIDwgdGhpcy5zdG9yeVBhZ2VzLmxlbmd0aCkgewogICAgICAgIGZvciAodmFyIF9pNSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiT0dzdG9yeVBhc3NhZ2VzIikpLmxlbmd0aDsgX2k1IDwgdGhpcy5zdG9yeVBhZ2VzLmxlbmd0aDsgX2k1KyspIHsKICAgICAgICAgIHZhciBpbmRleE9wZW5CcmFja2V0cyA9IHRoaXMuc3RvcnlQYWdlc1tfaTVdLmxpbmtQYXNzYWdlLnRleHQuaW5kZXhPZigiW1siKTsKCiAgICAgICAgICB2YXIgaW5kZXhDbG9zZUJyYWNrZXRzID0gdGhpcy5zdG9yeVBhZ2VzW19pNV0ubGlua1Bhc3NhZ2UudGV4dC5pbmRleE9mKCJdXSIpOwoKICAgICAgICAgIHZhciBjbGVhblN0ciA9IHRoaXMuc3RvcnlQYWdlc1tfaTVdLmxpbmtQYXNzYWdlLnRleHQ7CgogICAgICAgICAgaWYgKGluZGV4T3BlbkJyYWNrZXRzICE9IC0xKSB7CiAgICAgICAgICAgIHZhciBicmFja2V0U3RyID0gdGhpcy5zdG9yeVBhZ2VzW19pNV0ubGlua1Bhc3NhZ2UudGV4dC5zdWJzdHJpbmcoaW5kZXhPcGVuQnJhY2tldHMsIGluZGV4Q2xvc2VCcmFja2V0cyArIDIpOwoKICAgICAgICAgICAgY2xlYW5TdHIgPSB0aGlzLnN0b3J5UGFnZXNbX2k1XS5saW5rUGFzc2FnZS50ZXh0LnJlcGxhY2UoYnJhY2tldFN0ciwgIiIpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLnN0b3J5UGFnZXNbX2k1XS5saW5rUGFzc2FnZS50ZXh0LmluY2x1ZGVzKCJUaGlzIGlzIGEgbmV3IHBhc3NhZ2UuIEVkaXQgaXQgdG8gY3JlYXRlIHlvdXIgb3duIHN0b3J5ISIpIHx8IGNsZWFuU3RyLnJlcGxhY2UoL1xzL2csICIiKSA9PT0gIiIpIHsKICAgICAgICAgICAgYWxlcnQoIlBsZWFzZSBlZGl0IGNvbnRlbnQgaW4gbmV3IHBhc3NhZ2VzLiIpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgczIgKz0gY2xlYW5TdHI7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgc2ltaWxhcml0eVNjb3JlID0gdGhpcy5zaW1pbGFyaXR5KHMxLCBzMik7CiAgICAgIGNvbnNvbGUubG9nKHNpbWlsYXJpdHlTY29yZSk7CgogICAgICBpZiAoc2ltaWxhcml0eVNjb3JlID4gMC43NSkgewogICAgICAgIGFsZXJ0KCJTdG9yeSBpcyB0b28gc2ltaWxhciB0byB0aGUgb3JpZ2luYWwuIFBsZWFzZSBzdWJtaXQgYSB1bmlxdWUgc3RvcnkuIik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiY3JlYXRlVGVtcGxhdGUiKSAhPSAieWVzIikgewogICAgICAgIGFsZXJ0KCJTdG9yeSBpcyB1bmlxdWUgYW5kIGlzIHJlYWR5IHRvIGJlIHB1Ymxpc2hlZCEiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8vIFVzZXMgTGV2ZW5zaHRlaW4gZGlzdGFuY2UgYWxnb3JpdGhtCiAgICBzaW1pbGFyaXR5OiBmdW5jdGlvbiBzaW1pbGFyaXR5KHMxLCBzMikgewogICAgICB2YXIgbG9uZ2VyID0gczEudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9ccy9nLCAiIik7CiAgICAgIHZhciBzaG9ydGVyID0gczIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9ccy9nLCAiIik7CgogICAgICBpZiAoczEubGVuZ3RoIDwgczIubGVuZ3RoKSB7CiAgICAgICAgbG9uZ2VyID0gczI7CiAgICAgICAgc2hvcnRlciA9IHMxOwogICAgICB9CgogICAgICB2YXIgbG9uZ2VyTGVuZ3RoID0gbG9uZ2VyLmxlbmd0aDsKCiAgICAgIGlmIChsb25nZXJMZW5ndGggPT0gMCkgewogICAgICAgIHJldHVybiAxLjA7CiAgICAgIH0KCiAgICAgIHJldHVybiAobG9uZ2VyTGVuZ3RoIC0gdGhpcy5lZGl0RGlzdGFuY2UobG9uZ2VyLCBzaG9ydGVyKSkgLyBwYXJzZUZsb2F0KGxvbmdlckxlbmd0aCk7CiAgICB9LAogICAgZWRpdERpc3RhbmNlOiBmdW5jdGlvbiBlZGl0RGlzdGFuY2UoczEsIHMyKSB7CiAgICAgIHZhciBjb3N0cyA9IG5ldyBBcnJheSgpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gczEubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbGFzdFZhbHVlID0gaTsKCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPD0gczIubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmIChpID09IDApIHsKICAgICAgICAgICAgY29zdHNbal0gPSBqOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKGogPiAwKSB7CiAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gY29zdHNbaiAtIDFdOwoKICAgICAgICAgICAgICBpZiAoczEuY2hhckF0KGkgLSAxKSAhPSBzMi5jaGFyQXQoaiAtIDEpKSB7CiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IE1hdGgubWluKE1hdGgubWluKG5ld1ZhbHVlLCBsYXN0VmFsdWUpLCBjb3N0c1tqXSkgKyAxOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29zdHNbaiAtIDFdID0gbGFzdFZhbHVlOwogICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IG5ld1ZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoaSA+IDApIHsKICAgICAgICAgIGNvc3RzW3MyLmxlbmd0aF0gPSBsYXN0VmFsdWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gY29zdHNbczIubGVuZ3RoXTsKICAgIH0sCiAgICB3cml0ZVRvU3RvcmFnZTogZnVuY3Rpb24gd3JpdGVUb1N0b3JhZ2UoKSB7CiAgICAgIHZhciBzdG9yeVZpZXcgPSB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuZ2VuZXJhdGVTYXZlU3RvcnkoKTsKICAgICAgdGhpcy5oYW5kbGVzLmZpbGVDb252ZXJ0ZXIuc3RvcnkgPSBzdG9yeVZpZXc7CiAgICAgIHZhciB0d2VlQmxvYiA9IHRoaXMuaGFuZGxlcy5maWxlQ29udmVydGVyLnR3ZWUoKTsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgic3RvcnlDb250ZW50IiwgdHdlZUJsb2IpOwogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJzdG9yeUxvY2F0aW9uIiwgIiIpOyAvL3RoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5yZW1vdmVWYXJpYWJsZUluamVjdCgpOwoKICAgICAgdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmdlbmVyYXRlU3RvcnlUZXh0KHRoaXMucmVuZGVySGludHMuaGlkZGVuLCB0aGlzLnJlbmRlckhpbnRzLmluVmFyaWFibGVFZGl0b3IsIHRoaXMucmVuZGVySGludHMuaW5NZWRpYUVkaXRvcik7CiAgICAgIHRoaXMuc3RvcnlWYXJpYWJsZXMgPSB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IudmFyaWFibGVzOwogICAgICB0aGlzLmltYWdlVmFyaWFibGVzID0gdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmltYWdlVmFyaWFibGVzOwogICAgICB0aGlzLmF1ZGlvVmFyaWFibGVzID0gdGhpcy5oYW5kbGVzLnN0b3J5RWRpdG9yLmF1ZGlvVmFyaWFibGVzOwogICAgICB0aGlzLnN0b3J5UGFnZXMgPSB0aGlzLmhhbmRsZXMuc3RvcnlFZGl0b3IuZXhwb3J0ZWRTdG9yeVBhZ2VzOwogICAgICB0aGlzLnN0b3J5TmFtZSA9IHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5iYXNlU3RvcnkubmFtZTsKICAgIH0sCiAgICBjaGVja1JlbmRlckhpbnRzOiBmdW5jdGlvbiBjaGVja1JlbmRlckhpbnRzKCkgewogICAgICBpZiAodGhpcy5yZW5kZXJIaW50cy5yZW5kZXJLZXkgPiAxMCkgewogICAgICAgIHRoaXMucmVuZGVySGludHMucmVuZGVyS2V5ID0gMTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucmVuZGVySGludHMudmFyaWFibGVSZW5kZXJLZXkgPiAxMCkgewogICAgICAgIHRoaXMucmVuZGVySGludHMudmFyaWFibGVSZW5kZXJLZXkgPSAxOwogICAgICB9CgogICAgICBpZiAodGhpcy5yZW5kZXJIaW50cy50aGVtZXNSZW5kZXJLZXkgPiAxMCkgewogICAgICAgIHRoaXMucmVuZGVySGludHMudGhlbWVzUmVuZGVyS2V5ID0gMTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucmVuZGVySGludHMucGFzc2FnZVJlbmRlcktleSA+IDEwKSB7CiAgICAgICAgdGhpcy5yZW5kZXJIaW50cy5wYXNzYWdlUmVuZGVyS2V5ID0gMTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucmVuZGVySGludHMuZ3NvUmVuZGVyS2V5ID4gMTApIHsKICAgICAgICB0aGlzLnJlbmRlckhpbnRzLmdzb1JlbmRlcktleSA9IDE7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnJlbmRlckhpbnRzLm1lZGlhUmVuZGVyS2V5ID4gMTApIHsKICAgICAgICB0aGlzLnJlbmRlckhpbnRzLm1lZGlhUmVuZGVyS2V5ID0gMTsKICAgICAgfQogICAgfSwKICAgIGhpZGVUb29sczogZnVuY3Rpb24gaGlkZVRvb2xzKCkgewogICAgICBpZiAodGhpcy50b29sQnV0dG9uID09ICJtZGktbWludXMiKSB7CiAgICAgICAgdGhpcy50b29sc1dpZHRoID0gIjEwJSI7CiAgICAgICAgdGhpcy5wYWdlV2lkdGggPSAiOTAlIjsKICAgICAgICB0aGlzLmhpZGVJdGVtID0gdHJ1ZTsKICAgICAgICB0aGlzLnRvb2xCdXR0b24gPSAibWRpLXBsdXMiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudG9vbHNXaWR0aCA9ICIzMCUiOwogICAgICAgIHRoaXMucGFnZVdpZHRoID0gIjcwJSI7CiAgICAgICAgdGhpcy5oaWRlSXRlbSA9IGZhbHNlOwogICAgICAgIHRoaXMudG9vbEJ1dHRvbiA9ICJtZGktbWludXMiOwogICAgICB9CiAgICB9LAogICAgZ29GdWxsU2NyZWVuOiBmdW5jdGlvbiBnb0Z1bGxTY3JlZW4oKSB7CiAgICAgIC8qCiAgICAgICAgICAgIHZhciBzdG9yeVBhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3RvcnlQYWdlIik7CiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZnVsbHNjcmVlbikgewogICAgICAgICAgICAgICAgc3RvcnlQYWdlLnJlcXVlc3RGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgICAgICB0aGlzLmZ1bGxCdXR0b24gPSAiRXhpdCI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOwogICAgICAgICAgICAgICAgdGhpcy5mdWxsQnV0dG9uID0gIkZ1bGwgU2NyZWVuIjsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgKi8KICAgICAgaWYgKCF0aGlzLmluRnVsbE1vZGUpIHsKICAgICAgICB0aGlzLiRlbWl0KCJldnRHb0Z1bGwiKTsKICAgICAgICB0aGlzLmluRnVsbE1vZGUgPSB0cnVlOwogICAgICAgIHRoaXMuZnVsbEJ1dHRvbiA9ICJtZGktZnVsbHNjcmVlbi1leGl0IjsKICAgICAgICB0aGlzLmNvbnRlbnRIZWlnaHQgPSAiMTAwdmgiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGVtaXQoImV2dEV4aXRGdWxsIik7CiAgICAgICAgdGhpcy5pbkZ1bGxNb2RlID0gZmFsc2U7CiAgICAgICAgdGhpcy5mdWxsQnV0dG9uID0gIm1kaS1mdWxsc2NyZWVuIjsKICAgICAgICB0aGlzLmNvbnRlbnRIZWlnaHQgPSAiNzR2aCI7CiAgICAgIH0KICAgIH0sCiAgICBzZXRNaW5IZWlnaHQ6IGZ1bmN0aW9uIHNldE1pbkhlaWdodChldmVudCkgewogICAgICB0aGlzLm1pbkhlaWdodCA9IGV2ZW50OwogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGNvbnNvbGUubG9nKCJEZXN0cm95ZWQiKTsKICAgIHRoaXMuaGFuZGxlcy5zdG9yeUVkaXRvci5kZXN0cm95KCk7CiAgfSwKICBtaXhpbnM6IFtzdG9yeU1peGluLCB0d2VlQ29udmVydGVyXQp9Ow=="},{"version":3,"sources":["Editor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqLA,OAAA,iBAAA,MAAA,yCAAA;AACA,OAAA,aAAA,MAAA,iCAAA;AACA,OAAA,cAAA,MAAA,mCAAA;AACA,OAAA,eAAA,MAAA,qCAAA;AACA,OAAA,oBAAA,MAAA,0CAAA;AACA,OAAA,WAAA,MAAA,mBAAA;AAEA,OAAA,aAAA,MAAA,oCAAA;AACA,OAAA,WAAA,MAAA,kCAAA;AACA,OAAA,QAAA,MAAA,UAAA;AACA,SAAA,EAAA,QAAA,kBAAA;AACA,OAAA,UAAA,MAAA,yBAAA;AACA,OAAA,aAAA,MAAA,iCAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,SAAA,MAAA,mBAAA;AACA,OAAA,QAAA,MAAA,UAAA;;AAEA,IAAA,KAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KADA;AAGA;AACA,MAAA,OAAA,EAAA,IAJA;AAKA,MAAA,QAAA,EAAA,IALA;AAMA,MAAA,QAAA,EAAA,EANA;AAOA,MAAA,aAAA,EAAA,CAPA;AAQA,MAAA,cAAA,EAAA,EARA;AASA,MAAA,MAAA,EAAA,EATA;AAUA;AAEA,MAAA,SAAA,EAAA,EAZA;AAaA,MAAA,UAAA,EAAA,KAbA;AAcA,MAAA,cAAA,EAAA,GAdA;AAeA,MAAA,cAAA,EAAA,GAfA;AAgBA,MAAA,cAAA,EAAA,GAhBA;AAkBA,MAAA,WAAA,EAAA,CAlBA;AAmBA,MAAA,YAAA,EAAA,EAnBA;AAqBA,MAAA,UAAA,EAAA,KArBA;AAuBA,MAAA,SAAA,EAAA,KAvBA;AAwBA,MAAA,aAAA,EAAA,MAxBA;AAyBA,MAAA,SAAA,EAAA,OAzBA;AA0BA,MAAA,QAAA,EAAA,KA1BA;AA2BA,MAAA,UAAA,EAAA,WA3BA;AA4BA,MAAA,UAAA,EAAA,gBA5BA;AA6BA,MAAA,UAAA,EAAA,KA7BA;AA+BA,MAAA,SAAA,EAAA,KA/BA;AAiCA,MAAA,OAAA,EAAA;AACA,QAAA,WAAA,EAAA,WADA;AAEA,QAAA,aAAA,EAAA;AAFA,OAjCA;AAsCA,MAAA,WAAA,EAAA;AACA,QAAA,SAAA,EAAA,CADA;AAEA,QAAA,iBAAA,EAAA,CAFA;AAGA,QAAA,eAAA,EAAA,CAHA;AAIA,QAAA,gBAAA,EAAA,CAJA;AAKA,QAAA,YAAA,EAAA,CALA;AAMA,QAAA,cAAA,EAAA,CANA;AAOA,QAAA,MAAA,EAAA,IAPA;AAQA,QAAA,gBAAA,EAAA,IARA;AASA,QAAA,aAAA,EAAA;AATA,OAtCA;AAkDA,MAAA,EAAA,EAAA,OAlDA;AAmDA,MAAA,UAAA,EAAA;AAnDA,KAAA;AAqDA,GAzDA;AA2DA,EAAA,OAAA,EAAA,mBAAA;AAAA;;AACA;AACA,QAAA,QAAA,CAAA,IAAA,GAAA,WAAA,EAAA;AACA,WAAA,UAAA,GAAA,IAAA;AACA;;AACA,QAAA,KAAA,UAAA,EAAA;AACA,UAAA,UAAA,GAAA,QAAA,CAAA,OAAA,GAAA,GAAA,EAAA;AACA,UAAA,MAAA,GAAA,QAAA,CAAA,IAAA,GAAA,WAAA,CAAA,KAAA;AACA,WAAA,OAAA,GAAA,UAAA,CAAA,KAAA,CAAA,MAAA,CAAA;AACA,KATA,CAUA;;;AAEA,QAAA,KAAA,MAAA,CAAA,KAAA,CAAA,aAAA,IAAA,EAAA,EAAA;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,aAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,IAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,YAAA,CAAA,QAAA,CAAA,IAAA;;AACA,cACA,cAAA,CAAA,OAAA,CAAA,iBAAA,MAAA,EAAA,IACA,cAAA,CAAA,OAAA,CAAA,iBAAA,MAAA,IAFA,EAGA;AACA,YAAA,cAAA,CAAA,OAAA,CACA,iBADA,EAEA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,OAAA,CAAA,WAAA,CAAA,kBAAA,CAFA;AAIA;;AACA,UAAA,cAAA,CAAA,OAAA,CAAA,gBAAA,EAAA,KAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,cAAA;AACA,SAbA,MAaA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,WAAA;AACA;AACA,OAjBA;AAkBA,KAnBA,MAmBA,IAAA,KAAA,MAAA,CAAA,KAAA,CAAA,YAAA,IAAA,EAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,cAAA,CAAA,OAAA,CAAA,cAAA,CAAA;AACA,WAAA,YAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,YAAA;;AACA,UAAA,cAAA,CAAA,OAAA,CAAA,iBAAA,MAAA,EAAA,EAAA;AACA,QAAA,cAAA,CAAA,OAAA,CACA,iBADA,EAEA,IAAA,CAAA,SAAA,CAAA,KAAA,OAAA,CAAA,WAAA,CAAA,kBAAA,CAFA;AAIA,OARA,CASA;;;AACA,WAAA,mBAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA;;AAEA,QAAA,KAAA,UAAA,EAAA;AACA,UAAA,KAAA,SAAA,IAAA,EAAA,EAAA;AACA,aAAA,SAAA,GAAA,gBAAA;AACA;;AACA,WAAA,QAAA,GAAA,KAAA,OAAA,CAAA,KAAA,CAAA,KAAA,SAAA,CAAA;AACA,WAAA,QAAA,GAAA,KAAA,UAAA,CAAA,KAAA,GAAA,GAAA,GAAA,KAAA,SAAA,GAAA,GAAA;AACA,KAlDA,CAoDA;;;AACA,QAAA,KAAA,UAAA,EAAA;AACA,WAAA,QAAA,CAAA,OAAA,GAAA,IAAA,CACA,UAAA,MAAA,EAAA;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,OAAA,CACA,UAAA,QAAA,EAAA;AACA,cAAA,GAAA,GACA,MAAA,QAAA,CAAA,IAAA,CAAA,SAAA,CAAA,CAAA,EAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,CAAA,CADA;;AAGA,cAAA,KAAA,cAAA,CAAA,GAAA,CAAA,GAAA,CAAA,EAAA;AACA,gBAAA,SAAA,GAAA,KAAA,cAAA,CAAA,GAAA,CAAA,GAAA,CAAA;AACA,gBAAA,KAAA,GAAA;AACA,cAAA,IAAA,EAAA,SAAA,CAAA,IADA;AAEA,cAAA,QAAA,EAAA,QAAA,CAAA,IAAA,CAAA,SAAA,CACA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,IAAA,CADA,CAFA;AAKA,cAAA,IAAA,EAAA,QAAA,CAAA,cAAA,EALA;AAMA,cAAA,EAAA,EAAA,SAAA,CAAA,EANA;AAOA,cAAA,KAAA,EAAA,SAAA,CAAA,KAPA;AAQA,cAAA,QAAA,EAAA;AARA,aAAA;AAUA,iBAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,GAAA,EAAA,KAAA;AACA,iBAAA,aAAA,IAAA,SAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA;;AACA,cAAA,KAAA,cAAA,CAAA,GAAA,CAAA,GAAA,CAAA,EAAA;AACA,YAAA,SAAA,GAAA,KAAA,cAAA,CAAA,GAAA,CAAA,GAAA,CAAA;AACA,YAAA,KAAA,GAAA;AACA,cAAA,IAAA,EAAA,SAAA,CAAA,IADA;AAEA,cAAA,QAAA,EAAA,QAAA,CAAA,IAAA,CAAA,SAAA,CACA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,IAAA,CADA,CAFA;AAKA,cAAA,IAAA,EAAA,QAAA,CAAA,cAAA,EALA;AAMA,cAAA,EAAA,EAAA,SAAA,CAAA,EANA;AAOA,cAAA,KAAA,EAAA,SAAA,CAAA,KAPA;AAQA,cAAA,QAAA,EAAA;AARA,aAAA;AAUA,iBAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,GAAA,EAAA,KAAA;AACA,iBAAA,aAAA,IAAA,SAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA;;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,KAAA,cAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,KAAA,cAAA;AACA,SApCA,CAoCA,IApCA,CAoCA,IApCA,CADA;AAuCA,OAxCA,CAwCA,IAxCA,CAwCA,IAxCA,CADA;AA2CA,KAjGA,CAkGA;;AACA,GA9JA;AAgKA,EAAA,UAAA,EAAA;AACA,mBAAA,iBADA;AAEA,qBAAA,aAFA;AAGA,sBAAA,cAHA;AAIA,uBAAA,eAJA;AAKA,mBAAA,WALA;AAMA,IAAA,GAAA,EAAA;AANA,GAhKA;AAyKA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA,QAAA,CAAA,YAAA;AACA,UAAA,KAAA,MAAA,CAAA,QAAA,CAAA,SAAA,CAAA,EAAA;AACA,aAAA,MAAA,GAAA,EAAA;AACA,aAAA,WAAA,CAAA,SAAA;AACA,aAAA,gBAAA;AACA;AACA,KANA,EAMA,IANA;AADA,GAzKA;AAmLA,EAAA,OAAA,EAAA;AACA,IAAA,QAAA,EAAA,kBAAA,KAAA,EAAA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AAEA,UAAA,IAAA,GAAA,KAAA,CAAA,CAAA,CAAA;AAEA,UAAA,MAAA,GAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,OAAA,CAAA;AAEA,WAAA,cAAA,GAAA,IAAA;AACA,WAAA,iBAAA,GAAA,IAAA;AACA,WAAA,iBAAA,GAAA,IAAA;AAEA,WAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,WAAA,OAAA,CAAA,aAAA,GAAA,IAAA;AAEA,UAAA,cAAA,GAAA,IAAA,UAAA,EAAA;;AAEA,MAAA,cAAA,CAAA,MAAA,GAAA,YAAA;AACA;AAEA,QAAA,MAAA,CAAA,OAAA,CAAA,aAAA,GAAA,IAAA,aAAA,CACA,cAAA,CAAA,MADA,EAEA,MAFA,CAAA;AAIA,QAAA,MAAA,CAAA,OAAA,CAAA,WAAA,GAAA,IAAA,WAAA,CACA,MAAA,CAAA,OAAA,CAAA,aAAA,CAAA,KADA,CAAA;AAGA,QAAA,MAAA,CAAA,cAAA,GAAA,MAAA,CAAA,OAAA,CAAA,WAAA,CAAA,SAAA;AACA,QAAA,MAAA,CAAA,cAAA,GAAA,MAAA,CAAA,OAAA,CAAA,WAAA,CAAA,cAAA;AACA,QAAA,MAAA,CAAA,cAAA,GAAA,MAAA,CAAA,OAAA,CAAA,WAAA,CAAA,cAAA;AACA,QAAA,MAAA,CAAA,UAAA,GAAA,MAAA,CAAA,OAAA,CAAA,WAAA,CAAA,kBAAA;AACA,QAAA,MAAA,CAAA,SAAA,GAAA,MAAA,CAAA,OAAA,CAAA,WAAA,CAAA,SAAA,CAAA,IAAA;;AAEA,QAAA,MAAA,CAAA,SAAA;;AAEA,QAAA,MAAA,CAAA,WAAA,CAAA,SAAA;AACA,QAAA,MAAA,CAAA,WAAA,CAAA,iBAAA;AACA,QAAA,MAAA,CAAA,WAAA,CAAA,gBAAA;AACA,QAAA,MAAA,CAAA,WAAA,CAAA,YAAA;AAEA,QAAA,MAAA,CAAA,WAAA,CAAA,MAAA,GAAA,IAAA;;AACA,QAAA,MAAA,CAAA,gBAAA;;AAEA,QAAA,cAAA,CAAA,OAAA,CAAA,cAAA,EAAA,cAAA,CAAA,MAAA;AACA,QAAA,cAAA,CAAA,OAAA,CAAA,eAAA,EAAA,EAAA;;AAEA,QAAA,MAAA,CAAA,mBAAA,CAAA;AAAA,UAAA,IAAA,EAAA,MAAA,CAAA,WAAA,CAAA;AAAA,SAAA;AACA,OA9BA;;AA+BA,MAAA,cAAA,CAAA,UAAA,CAAA,IAAA;AACA,KAjDA;AAmDA,IAAA,YAAA,EAAA,sBAAA,QAAA,EAAA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,WAAA,iBAAA,GAAA,IAAA;AACA,WAAA,iBAAA,GAAA,IAAA;AAEA,WAAA,OAAA,CAAA,WAAA,GAAA,IAAA;AACA,WAAA,OAAA,CAAA,aAAA,GAAA,IAAA;AAEA,WAAA,OAAA,CAAA,aAAA,GAAA,IAAA,aAAA,CAAA,QAAA,EAAA,KAAA,CAAA;AACA,WAAA,OAAA,CAAA,WAAA,GAAA,IAAA,WAAA,CACA,KAAA,OAAA,CAAA,aAAA,CAAA,KADA,CAAA;AAGA,WAAA,cAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,SAAA;AACA,WAAA,cAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,cAAA;AACA,WAAA,cAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,cAAA;AACA,WAAA,UAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,kBAAA;AACA,WAAA,SAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,SAAA,CAAA,IAAA;AAEA,WAAA,SAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,iBAAA;AACA,WAAA,WAAA,CAAA,gBAAA;AACA,WAAA,WAAA,CAAA,YAAA;AAEA,WAAA,WAAA,CAAA,MAAA,GAAA,IAAA;AACA,WAAA,gBAAA;AAEA,WAAA,mBAAA,CAAA;AAAA,QAAA,IAAA,EAAA,KAAA,WAAA,CAAA;AAAA,OAAA;AACA,KAhFA;AAkFA,IAAA,iBAAA,EAAA,6BAAA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,gBAAA;AAEA,MAAA,KAAA,CAAA,GAAA,CAAA,8BAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,IAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,YAAA,CAAA,QAAA,CAAA,IAAA;;AACA,UAAA,cAAA,CAAA,OAAA,CACA,iBADA,EAEA,IAAA,CAAA,SAAA,CAAA,MAAA,CAAA,OAAA,CAAA,WAAA,CAAA,kBAAA,CAFA;AAIA,UAAA,cAAA,CAAA,OAAA,CAAA,gBAAA,EAAA,KAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,cAAA;AACA,SARA,MAQA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,WAAA;AACA;AACA,OAZA;AAcA,WAAA,mBAAA,CAAA;AAAA,QAAA,IAAA,EAAA,KAAA,WAAA,CAAA;AAAA,OAAA;AACA,KApGA;AAsGA,IAAA,YAAA,EAAA,sBAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,IAAA,EAAA,KAAA,CAAA,IAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,cAAA;AACA,WAAA,gBAAA,GAPA,CASA;;AACA,UAAA,OAAA,GAAA,KAAA,cAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA,CAAA;;AACA,UAAA,KAAA,UAAA,EAAA;AACA,YAAA,SAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,KAAA,CAAA,OAAA,CAAA,QADA,CAAA;AAGA,QAAA,SAAA,CAAA,MAAA,GAAA,IAAA,CAAA,YAAA;AACA,eAAA,MAAA,GACA,eAAA,KAAA,CAAA,IAAA,CAAA,QAAA,GAAA,0BADA;AAEA,SAHA;AAIA,aAAA,aAAA,IAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,aAAA,aAAA,IAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;;AAEA,YAAA,KAAA,aAAA,GAAA,KAAA,cAAA,EAAA;AACA,eAAA,aAAA,IAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,eAAA,aAAA,IAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,eAAA,MAAA,GACA,qFADA;AAGA,eAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,IAAA,EAAA,KAAA,CAAA,OAAA;AACA,eAAA,WAAA,CAAA,SAAA;AACA,eAAA,WAAA,CAAA,cAAA;AACA,eAAA,gBAAA;AACA,SAVA,MAUA;AACA,cAAA,MAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,KAAA,CAAA,IAAA,CAAA,QADA,CAAA;AAGA,UAAA,MAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA,EAAA,IAAA,CACA,YAAA;AACA,iBAAA,MAAA,GACA,gBAAA,KAAA,CAAA,IAAA,CAAA,QAAA,GAAA,cADA;AAEA,gBAAA,GAAA,GAAA;AACA,cAAA,IAAA,EAAA,KAAA,CAAA,IAAA,CAAA,IADA;AAEA,cAAA,QAAA,EAAA,KAAA,CAAA,IAAA,CAAA,QAFA;AAGA,cAAA,IAAA,EAAA,MAAA,CAAA,cAAA,EAHA;AAIA,cAAA,KAAA,EAAA,OAAA,CAAA,KAJA;AAKA,cAAA,EAAA,EAAA,OAAA,CAAA,EALA;AAMA,cAAA,QAAA,EAAA;AANA,aAAA;AAQA,iBAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,IAAA,EAAA,GAAA;AAEA,iBAAA,WAAA,CAAA,SAAA;AACA,iBAAA,WAAA,CAAA,cAAA;AACA,iBAAA,gBAAA;AAEA,YAAA,OAAA,CAAA,GAAA,CAAA,KAAA,cAAA;AACA,WAlBA,CAkBA,IAlBA,CAkBA,IAlBA,CADA;AAqBA;AACA,OA1DA,CA2DA;;AACA,KAlKA;AAoKA,IAAA,YAAA,EAAA,sBAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,IAAA,EAAA,KAAA,CAAA,IAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,cAAA;AACA,WAAA,gBAAA,GAPA,CASA;;AACA,UAAA,OAAA,GAAA,KAAA,cAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA,CAAA;;AACA,UAAA,KAAA,UAAA,EAAA;AACA,YAAA,SAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,KAAA,CAAA,OAAA,CAAA,QADA,CAAA;AAGA,QAAA,SAAA,CAAA,MAAA,GAAA,IAAA,CAAA,YAAA;AACA,eAAA,MAAA,GACA,eAAA,KAAA,CAAA,IAAA,CAAA,QAAA,GAAA,0BADA;AAEA,SAHA;AAIA,aAAA,aAAA,IAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,aAAA,aAAA,IAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;;AAEA,YAAA,KAAA,aAAA,GAAA,KAAA,cAAA,EAAA;AACA,eAAA,aAAA,IAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,eAAA,aAAA,IAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,eAAA,MAAA,GACA,qFADA;AAGA,eAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,IAAA,EAAA,KAAA,CAAA,OAAA;AACA,eAAA,WAAA,CAAA,SAAA;AACA,eAAA,WAAA,CAAA,cAAA;AACA,eAAA,gBAAA;AACA,SAVA,MAUA;AACA,cAAA,MAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,KAAA,CAAA,IAAA,CAAA,QADA,CAAA;AAGA,UAAA,MAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA,EAAA,IAAA,CACA,YAAA;AACA,iBAAA,MAAA,GACA,gBACA,KAAA,CAAA,IAAA,CAAA,QADA,GAEA,oCAHA;AAIA,gBAAA,GAAA,GAAA;AACA,cAAA,IAAA,EAAA,KAAA,CAAA,IAAA,CAAA,IADA;AAEA,cAAA,QAAA,EAAA,KAAA,CAAA,IAAA,CAAA,QAFA;AAGA,cAAA,IAAA,EAAA,MAAA,CAAA,cAAA,EAHA;AAIA,cAAA,KAAA,EAAA,OAAA,CAAA,KAJA;AAKA,cAAA,EAAA,EAAA,OAAA,CAAA,EALA;AAMA,cAAA,QAAA,EAAA;AANA,aAAA;AAQA,iBAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,IAAA,EAAA,GAAA;AAEA,iBAAA,WAAA,CAAA,SAAA;AACA,iBAAA,WAAA,CAAA,cAAA;AACA,iBAAA,gBAAA;AAEA,YAAA,OAAA,CAAA,GAAA,CAAA,KAAA,cAAA;AACA,WApBA,CAoBA,IApBA,CAoBA,IApBA,CADA;AAuBA;AACA,OA5DA,CA6DA;;AACA,KAlOA;AAoOA,IAAA,gBAAA,EAAA,0BAAA,KAAA,EAAA;AACA,UAAA,OAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,uBAAA,CAAA,KAAA,CAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,cAAA;AACA,WAAA,gBAAA,GAPA,CASA;;AACA,UAAA,QAAA,GAAA,KAAA,CAAA,QAAA;;AACA,UAAA,KAAA,UAAA,IAAA,OAAA,EAAA;AACA,YAAA,SAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,QADA,CAAA;AAGA,QAAA,SAAA,CAAA,MAAA;AACA,YAAA,OAAA,GAAA,KAAA,cAAA,CAAA,GAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AACA,YAAA,MAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,QADA,CAAA;AAGA,QAAA,MAAA,CAAA,GAAA,CAAA,OAAA,CAAA,IAAA,EAAA,IAAA,CACA,YAAA;AACA,eAAA,MAAA,GAAA,uCAAA;;AAEA,cAAA,OAAA,CAAA,IAAA,CAAA,CAAA,CAAA,QAAA,CAAA,MAAA,CAAA,EAAA;AACA,YAAA,GAAA,CAAA,eAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA;AACA;;AAEA,cAAA,GAAA,GAAA;AACA,YAAA,IAAA,EAAA,OAAA,CAAA,IADA;AAEA,YAAA,QAAA,EAAA,QAFA;AAGA,YAAA,IAAA,EAAA,MAAA,CAAA,cAAA,EAHA;AAIA,YAAA,KAAA,EAAA,OAAA,CAAA,KAJA;AAKA,YAAA,EAAA,EAAA,OAAA,CAAA,EALA;AAMA,YAAA,QAAA,EAAA;AANA,WAAA;AAQA,eAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,OAAA,EAAA,GAAA;AAEA,eAAA,WAAA,CAAA,SAAA;AACA,eAAA,WAAA,CAAA,cAAA;AACA,eAAA,gBAAA,GAnBA,CAqBA;AACA,SAtBA,CAsBA,IAtBA,CAsBA,IAtBA,CADA;AAyBA,OA7CA,CA8CA;;AACA,KAnRA;AAqRA,IAAA,gBAAA,EAAA,0BAAA,KAAA,EAAA;AACA,UAAA,OAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,uBAAA,CAAA,KAAA,CAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,cAAA;AACA,WAAA,gBAAA,GAPA,CASA;;AACA,UAAA,QAAA,GAAA,KAAA,CAAA,QAAA;;AACA,UAAA,KAAA,UAAA,IAAA,OAAA,EAAA;AACA,YAAA,SAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,QADA,CAAA;AAGA,QAAA,SAAA,CAAA,MAAA;AACA,YAAA,OAAA,GAAA,KAAA,cAAA,CAAA,GAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AACA,YAAA,MAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,QADA,CAAA;AAGA,QAAA,MAAA,CAAA,GAAA,CAAA,OAAA,CAAA,IAAA,EAAA,IAAA,CACA,YAAA;AACA,eAAA,MAAA,GAAA,uCAAA;;AAEA,cAAA,OAAA,CAAA,IAAA,CAAA,CAAA,CAAA,QAAA,CAAA,MAAA,CAAA,EAAA;AACA,YAAA,GAAA,CAAA,eAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA;AACA;;AAEA,cAAA,GAAA,GAAA;AACA,YAAA,IAAA,EAAA,OAAA,CAAA,IADA;AAEA,YAAA,QAAA,EAAA,QAFA;AAGA,YAAA,IAAA,EAAA,MAAA,CAAA,cAAA,EAHA;AAIA,YAAA,KAAA,EAAA,OAAA,CAAA,KAJA;AAKA,YAAA,EAAA,EAAA,OAAA,CAAA,EALA;AAMA,YAAA,QAAA,EAAA;AANA,WAAA;AAQA,eAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,OAAA,EAAA,GAAA;AAEA,eAAA,WAAA,CAAA,SAAA;AACA,eAAA,WAAA,CAAA,cAAA;AACA,eAAA,gBAAA;AAEA,UAAA,OAAA,CAAA,GAAA,CAAA,KAAA,cAAA;AACA,SAtBA,CAsBA,IAtBA,CAsBA,IAtBA,CADA;AAyBA,OA7CA,CA8CA;;AACA,KApUA;AAsUA,IAAA,gBAAA,EAAA,0BAAA,KAAA,EAAA;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,aAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA;;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,YAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,cAAA;AACA,WAAA,gBAAA,GAVA,CAYA;;AACA,UAAA,KAAA,UAAA,EAAA;AACA,aAAA,cAAA,CAAA,OAAA,CACA,UAAA,KAAA,EAAA,GAAA,EAAA;AACA,eAAA,MAAA,GACA,eAAA,KAAA,CAAA,QAAA,GAAA,0BADA;AAEA,UAAA,OAAA,CAAA,GAAA,CAAA,cAAA,KAAA,CAAA,QAAA;;AAEA,cAAA,KAAA,CAAA,QAAA,IAAA,KAAA,EAAA;AACA,gBAAA,YAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,GAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,KAAA,CAAA,QADA,CAAA;AAGA,gBAAA,IAAA,GAAA,KAAA,CAAA,IAAA;AACA,iBAAA,aAAA,IAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;;AACA,gBAAA,KAAA,aAAA,GAAA,KAAA,cAAA,EAAA;AACA,mBAAA,aAAA,IAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,mBAAA,MAAA,GACA,oFADA,CAFA,CAIA;;AACA,mBAAA,mBAAA,CAAA;AACA,gBAAA,IAAA,EAAA,GADA;AAEA,gBAAA,QAAA,EAAA,KAAA,CAAA,QAFA;AAGA,gBAAA,IAAA,EAAA,KAAA,CAAA;AAHA,eAAA;AAKA,aAVA,MAUA;AACA,cAAA,YAAA,CAAA,GAAA,CAAA,IAAA,EAAA,IAAA,CACA,YAAA;AACA,qBAAA,MAAA,GACA,gBACA,KAAA,CAAA,QADA,GAEA,oCAHA;;AAKA,oBAAA,KAAA,CAAA,IAAA,CAAA,CAAA,CAAA,QAAA,CAAA,MAAA,CAAA,EAAA;AACA,kBAAA,GAAA,CAAA,eAAA,CAAA,KAAA,CAAA,IAAA,CAAA,CAAA;AACA;;AAEA,oBAAA,GAAA,GAAA;AACA,kBAAA,IAAA,EAAA,KAAA,CAAA,IADA;AAEA,kBAAA,QAAA,EAAA,KAAA,CAAA,QAFA;AAGA,kBAAA,IAAA,EAAA,YAAA,CAAA,cAAA,EAHA;AAIA,kBAAA,KAAA,EAAA,KAAA,CAAA,KAJA;AAKA,kBAAA,EAAA,EAAA,KAAA,CAAA,EALA;AAMA,kBAAA,QAAA,EAAA;AANA,iBAAA;AAQA,qBAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,GAAA,EAAA,GAAA,EAlBA,CAmBA;AACA;;AAEA,qBAAA,WAAA,CAAA,SAAA;AACA,qBAAA,WAAA,CAAA,cAAA;AACA,qBAAA,gBAAA;AACA,eAzBA,CAyBA,IAzBA,CAyBA,IAzBA,CADA;AA4BA;AACA;AACA,SApDA,CAoDA,IApDA,CAoDA,IApDA,CADA;AAuDA,OArEA,CAsEA;;AACA,KA7YA;AA+YA,IAAA,gBAAA,EAAA,0BAAA,KAAA,EAAA;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,aAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA;;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,YAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,cAAA;AACA,WAAA,gBAAA,GAVA,CAYA;;AACA,UAAA,KAAA,UAAA,EAAA;AACA,aAAA,cAAA,CAAA,OAAA,CACA,UAAA,KAAA,EAAA,GAAA,EAAA;AACA,eAAA,MAAA,GACA,eAAA,KAAA,CAAA,QAAA,GAAA,0BADA;AAEA,UAAA,OAAA,CAAA,GAAA,CAAA,cAAA,KAAA,CAAA,QAAA;;AAEA,cAAA,KAAA,CAAA,QAAA,IAAA,KAAA,EAAA;AACA,gBAAA,UAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,GAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,KAAA,CAAA,QADA,CAAA;AAGA,gBAAA,IAAA,GAAA,KAAA,CAAA,IAAA;AACA,iBAAA,aAAA,IAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;;AACA,gBAAA,KAAA,aAAA,GAAA,KAAA,cAAA,EAAA;AACA,mBAAA,aAAA,IAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,mBAAA,MAAA,GACA,oFADA,CAFA,CAIA;;AACA,mBAAA,mBAAA,CAAA;AACA,gBAAA,IAAA,EAAA,GADA;AAEA,gBAAA,QAAA,EAAA,KAAA,CAAA,QAFA;AAGA,gBAAA,IAAA,EAAA,KAAA,CAAA;AAHA,eAAA;AAKA,aAVA,MAUA;AACA,cAAA,UAAA,CAAA,GAAA,CAAA,IAAA,EAAA,IAAA,CACA,YAAA;AACA,qBAAA,MAAA,GACA,gBACA,KAAA,CAAA,QADA,GAEA,oCAHA;;AAKA,oBAAA,KAAA,CAAA,IAAA,CAAA,CAAA,CAAA,QAAA,CAAA,MAAA,CAAA,EAAA;AACA,kBAAA,GAAA,CAAA,eAAA,CAAA,KAAA,CAAA,IAAA,CAAA,CAAA;AACA;;AAEA,oBAAA,GAAA,GAAA;AACA,kBAAA,IAAA,EAAA,KAAA,CAAA,IADA;AAEA,kBAAA,QAAA,EAAA,KAAA,CAAA,QAFA;AAGA,kBAAA,IAAA,EAAA,UAAA,CAAA,cAAA,EAHA;AAIA,kBAAA,KAAA,EAAA,KAAA,CAAA,KAJA;AAKA,kBAAA,EAAA,EAAA,KAAA,CAAA,EALA;AAMA,kBAAA,QAAA,EAAA;AANA,iBAAA;AAQA,qBAAA,OAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,GAAA,EAAA,GAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,cAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,aAAA;AAEA,qBAAA,WAAA,CAAA,SAAA;AACA,qBAAA,WAAA,CAAA,cAAA;AACA,qBAAA,gBAAA;AACA,eAzBA,CAyBA,IAzBA,CAyBA,IAzBA,CADA;AA4BA;AACA;AACA,SApDA,CAoDA,IApDA,CAoDA,IApDA,CADA;AAuDA,OArEA,CAsEA;;AACA,KAtdA;AAwdA,IAAA,mBAAA,EAAA,6BAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,mBAAA,CAAA,KAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,cAAA;AACA,WAAA,gBAAA,GAPA,CASA;;AACA,UAAA,KAAA,UAAA,EAAA;AACA,YAAA,SAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,KAAA,CAAA,QADA,CAAA;AAGA,QAAA,SAAA,CAAA,MAAA,GAAA,IAAA,CAAA,YAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,SAAA;AACA,SAFA;AAGA,aAAA,cAAA;AACA,aAAA,aAAA,IAAA,KAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,OAnBA,CAoBA;;AACA,KA7eA;AA+eA,IAAA,mBAAA,EAAA,6BAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,mBAAA,CAAA,KAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,cAAA;AACA,WAAA,gBAAA,GAPA,CASA;;AACA,UAAA,KAAA,UAAA,EAAA;AACA,YAAA,SAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CACA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,EAAA,EAAA,IAAA,GAAA,GAAA,KAAA,CAAA,QADA,CAAA;AAGA,QAAA,SAAA,CAAA,MAAA,GAAA,IAAA,CAAA,YAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,SAAA;AACA,SAFA;AAGA,aAAA,cAAA;AACA,aAAA,aAAA,IAAA,KAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,OAnBA,CAoBA;;AACA,KApgBA;AAsgBA,IAAA,cAtgBA,0BAsgBA,KAtgBA,EAsgBA;AACA,UAAA,IAAA,GAAA;AACA,QAAA,IAAA,EAAA,KAAA,CAAA,IADA;AAEA,QAAA,QAAA,EAAA,KAAA,UAAA,CAAA,KAAA,WAAA,GAAA,CAAA,EAAA;AAFA,OAAA;AAIA,WAAA,OAAA,CAAA,WAAA,CAAA,cAAA,CAAA,IAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,gBAAA;AACA,KAjhBA;AAmhBA,IAAA,cAnhBA,0BAmhBA,KAnhBA,EAmhBA;AACA,UAAA,IAAA,GAAA;AACA,QAAA,IAAA,EAAA,KAAA,CAAA,IADA;AAEA,QAAA,QAAA,EAAA,KAAA,UAAA,CAAA,KAAA,WAAA,GAAA,CAAA,EAAA;AAFA,OAAA;AAIA,WAAA,OAAA,CAAA,WAAA,CAAA,cAAA,CAAA,IAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,gBAAA;AACA,KA9hBA;AAgiBA,IAAA,mBAhiBA,+BAgiBA,KAhiBA,EAgiBA;AACA,UAAA,IAAA,GAAA;AACA,QAAA,IAAA,EAAA,KAAA,CAAA,IADA;AAEA,QAAA,QAAA,EAAA,KAAA,UAAA,CAAA,KAAA,WAAA,GAAA,CAAA,EAAA;AAFA,OAAA;AAIA,WAAA,OAAA,CAAA,WAAA,CAAA,mBAAA,CAAA,IAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,gBAAA;AACA,KA3iBA;AA6iBA,IAAA,mBA7iBA,+BA6iBA,KA7iBA,EA6iBA;AACA,UAAA,IAAA,GAAA;AACA,QAAA,IAAA,EAAA,KAAA,CAAA,IADA;AAEA,QAAA,QAAA,EAAA,KAAA,UAAA,CAAA,KAAA,WAAA,GAAA,CAAA,EAAA;AAFA,OAAA;AAIA,WAAA,OAAA,CAAA,WAAA,CAAA,mBAAA,CAAA,IAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,gBAAA;AACA,KAxjBA;AA0jBA,IAAA,QAAA,EAAA,kBAAA,KAAA,EAAA;AACA,WAAA,YAAA,CAAA,IAAA,CAAA,KAAA,WAAA;;AAEA,UAAA,KAAA,CAAA,QAAA,GAAA,KAAA,UAAA,CAAA,MAAA,EAAA;AACA,aAAA,WAAA,GAAA,KAAA,CAAA,QAAA,GAAA,CAAA;AACA;;AACA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,eAAA;AACA,WAAA,gBAAA;AACA,KAnkBA;AAqkBA,IAAA,SAAA,EAAA,qBAAA;AACA,WAAA,YAAA,GAAA,EAAA;;AAEA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,KAAA,UAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,KAAA,UAAA,CAAA,CAAA,EAAA,WAAA,CAAA,IAAA,CAAA,QAAA,CAAA,OAAA,CAAA,EAAA;AACA,eAAA,WAAA,GAAA,CAAA,GAAA,CAAA;AACA;AACA;AACA;;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,eAAA;AACA,WAAA,gBAAA;AACA,KAllBA;AAolBA,IAAA,YAAA,EAAA,sBAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,YAAA,CAAA,KAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,eAAA;AACA,WAAA,gBAAA;AACA,KA5lBA;AA8lBA,IAAA,QAAA,EAAA,oBAAA;AACA,UAAA,KAAA,YAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,WAAA,GAAA,KAAA,YAAA,CAAA,KAAA,YAAA,CAAA,MAAA,GAAA,CAAA,CAAA;AACA,aAAA,YAAA,CAAA,GAAA;AACA,OAHA,MAGA;AACA,eAAA,KAAA;AACA;;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,eAAA;AACA,WAAA,gBAAA;AAEA,aAAA,IAAA;AACA,KA3mBA;AA6mBA,IAAA,OAAA,EAAA,iBAAA,KAAA,EAAA;AACA,WAAA,UAAA,CAAA,KAAA,WAAA,GAAA,CAAA,EAAA,WAAA,CAAA,IAAA,IACA,SAAA,KAAA,CAAA,IAAA,GAAA,IADA;AAEA,UAAA,gBAAA,GAAA,KAAA,UAAA,CACA,KAAA,WAAA,GAAA,CADA,EAEA,WAFA,CAEA,IAFA,CAEA,QAFA,CAEA,WAFA,CAAA;AAGA,WAAA,aAAA,CAAA;AACA,QAAA,IAAA,EAAA,KAAA,UAAA,CAAA,KAAA,WAAA,GAAA,CAAA,EAAA,WAAA,CAAA,IADA;AAEA,QAAA,IAAA,EAAA,KAAA,UAAA,CAAA,KAAA,WAAA,GAAA,CAAA,EAAA,WAAA,CAAA,IAFA;AAGA,QAAA,WAAA,EAAA;AAHA,OAAA;AAMA,WAAA,OAAA,CAAA,WAAA,CAAA,OAAA,CAAA;AACA,QAAA,IAAA,EAAA,KAAA,CAAA,IADA;AAEA,QAAA,QAAA,EAAA,KAAA,UAAA,CAAA,KAAA,WAAA,GAAA,CAAA,EAAA,WAAA,CAAA;AAFA,OAAA;AAKA,WAAA,cAAA;AAEA,WAAA,QAAA,CAAA,KAAA;AACA,KAjoBA;AAmoBA,IAAA,QAAA,EAAA,kBAAA,KAAA,EAAA;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,KAAA,UAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,KAAA,UAAA,CAAA,CAAA,EAAA,WAAA,CAAA,IAAA,IAAA,KAAA,CAAA,IAAA,EAAA;AACA,eAAA,WAAA,GAAA,CAAA,GAAA,CAAA;AACA;AACA;AACA;;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,gBAAA;AACA,KA7oBA;AA+oBA,IAAA,UAAA,EAAA,sBAAA;AACA,WAAA,SAAA,GAAA,IAAA;AAEA,WAAA,mBAAA,CAAA;AAAA,QAAA,IAAA,EAAA,KAAA,WAAA,CAAA;AAAA,OAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,eAAA;AACA,WAAA,gBAAA;AACA,KAvpBA;AAypBA,IAAA,UAAA,EAAA,sBAAA;AACA,WAAA,SAAA,GAAA,KAAA;AAEA,WAAA,mBAAA,CAAA;AAAA,QAAA,IAAA,EAAA,KAAA,WAAA,CAAA;AAAA,OAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,eAAA;AACA,WAAA,gBAAA;AACA,KAjqBA;AAmqBA,IAAA,QAAA,EAAA,kBAAA,KAAA,EAAA;AACA,WAAA,UAAA,CAAA,KAAA,WAAA,GAAA,CAAA,EAAA,KAAA,GACA,WAAA,KAAA,CAAA,SAAA,GAAA,oBAAA,GAAA,KAAA,CAAA,OADA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,eAAA;AACA,WAAA,gBAAA;AACA,KAzqBA;AA2qBA,IAAA,WAAA,EAAA,qBAAA,KAAA,EAAA;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,UAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,aAAA,UAAA,CAAA,CAAA,EAAA,KAAA,GACA,WAAA,KAAA,CAAA,SAAA,GAAA,oBAAA,GAAA,KAAA,CAAA,OADA;AAEA;;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,eAAA;AACA,WAAA,gBAAA;AACA,KAprBA;AAsrBA,IAAA,WAAA,EAAA,qBAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,eAAA,CAAA,KAAA,CAAA,IAAA,EAAA,KAAA,CAAA,KAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,gBAAA;AACA,KA7rBA;AA+rBA,IAAA,eAAA,EAAA,yBAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,sBAAA,CAAA,KAAA;AAEA,WAAA,cAAA;AACA,WAAA,WAAA,CAAA,iBAAA;AACA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,gBAAA;AACA,KAtsBA;AAwsBA,IAAA,cAAA,EAAA,wBAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,kBAAA,CAAA,KAAA;AAEA,WAAA,cAAA;AACA,WAAA,WAAA,CAAA,iBAAA;AACA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,gBAAA;AACA,KA/sBA;AAitBA,IAAA,mBAAA,EAAA,6BAAA,KAAA,EAAA;AACA,WAAA,WAAA,CAAA,MAAA,GAAA,KAAA,CAAA,IAAA;AAEA,WAAA,OAAA,CAAA,WAAA,CAAA,iBAAA,CACA,KAAA,WAAA,CAAA,MADA,EAEA,KAAA,WAAA,CAAA,gBAFA,EAGA,KAAA,WAAA,CAAA,aAHA;AAKA,WAAA,cAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,SAAA;AACA,WAAA,cAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,cAAA;AACA,WAAA,cAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,cAAA;AACA,WAAA,UAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,kBAAA;AACA,WAAA,SAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,SAAA,CAAA,IAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,gBAAA;AACA,KAjuBA;AAmuBA,IAAA,cAAA,EAAA,wBAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,eAAA,CAAA,KAAA;AACA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,iBAAA;AACA,WAAA,gBAAA;AACA,KA1uBA;AA4uBA,IAAA,OAAA,EAAA,iBAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,OAAA,CAAA;AACA,QAAA,QAAA,EAAA,KAAA,UAAA,CAAA,KAAA,WAAA,GAAA,CAAA,EAAA,QADA;AAEA,QAAA,IAAA,EAAA,KAAA,CAAA;AAFA,OAAA;AAKA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,gBAAA;AACA,WAAA,gBAAA;AACA,KAvvBA;AAyvBA,IAAA,UAAA,EAAA,oBAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,UAAA,CAAA,KAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,gBAAA;AACA,KAhwBA;AAkwBA,IAAA,aAAA,EAAA,uBAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,UAAA,CAAA,KAAA,CAAA,IAAA,EAAA,KAAA,CAAA,IAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,gBAAA;;AAEA,UAAA,KAAA,CAAA,WAAA,EAAA;AACA,aAAA,WAAA,CAAA,iBAAA;AACA;;AAEA,WAAA,gBAAA;AACA,KA/wBA;AAixBA,IAAA,iBAAA,EAAA,2BAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,iBAAA,CAAA,KAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,WAAA,CAAA,gBAAA;AACA,WAAA,gBAAA;AACA,KAzxBA;AA2xBA,IAAA,aAAA,EAAA,uBAAA,KAAA,EAAA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,aAAA,CAAA,KAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,gBAAA;;AAEA,UAAA,CAAA,KAAA,QAAA,EAAA,EAAA;AACA,aAAA,SAAA;AACA;AACA,KAryBA;AAuyBA,IAAA,eAvyBA,2BAuyBA,KAvyBA,EAuyBA;AACA,WAAA,OAAA,CAAA,WAAA,CAAA,eAAA,CAAA,KAAA;AAEA,WAAA,cAAA;AAEA,WAAA,WAAA,CAAA,SAAA;AACA,WAAA,gBAAA;AACA,KA9yBA;AAgzBA,IAAA,iBAAA,EAAA,6BAAA;AACA,UAAA,SAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,iBAAA,EAAA;AACA,WAAA,OAAA,CAAA,aAAA,CAAA,KAAA,GAAA,SAAA;AAEA,UAAA,QAAA,GAAA,KAAA,OAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAEA,UAAA,MAAA,GAAA,IAAA,IAAA,CAAA,CAAA,QAAA,CAAA,EAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA,CAAA;AAEA,UAAA,IAAA,GAAA,QAAA,CAAA,aAAA,CAAA,GAAA,CAAA;AACA,MAAA,IAAA,CAAA,IAAA,GAAA,GAAA,CAAA,eAAA,CAAA,MAAA,CAAA;AACA,MAAA,IAAA,CAAA,MAAA,GAAA,QAAA;AACA,MAAA,IAAA,CAAA,YAAA,CACA,UADA,EAEA,KAAA,OAAA,CAAA,WAAA,CAAA,SAAA,CAAA,IAAA,GAAA,OAFA;AAIA,MAAA,IAAA,CAAA,KAAA;AACA,MAAA,GAAA,CAAA,eAAA,CAAA,IAAA,CAAA,IAAA,EAhBA,CAiBA;AACA,KAl0BA;AAo0BA,IAAA,kBAp0BA,gCAo0BA;AACA,UAAA,UAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,iBAAA,EAAA;AACA,WAAA,OAAA,CAAA,aAAA,CAAA,KAAA,GAAA,UAAA;AACA,UAAA,QAAA,GAAA,KAAA,OAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAEA,UAAA,CAAA,GAAA,IAAA,IAAA,EAAA;AACA,UAAA,QAAA,GAAA;AACA,QAAA,IAAA,EAAA,QADA;AAEA,QAAA,WAAA,EACA,CAAA,CAAA,QAAA,KAAA,CAAA,GAAA,GAAA,GAAA,CAAA,CAAA,OAAA,EAAA,GAAA,GAAA,GAAA,CAAA,CAAA,WAAA,EAHA;AAIA,QAAA,OAAA,EAAA,cAAA,CAAA,OAAA,CAAA,iBAAA;AAJA,OAAA;;AAMA,UACA,EAAA,CAAA,GAAA,CACA,cACA,QAAA,CAAA,IAAA,GAAA,WAAA,CAAA,GADA,GAEA,UAFA,GAGA,KAAA,OAAA,CAAA,WAAA,CAAA,SAAA,CAAA,IAJA,CADA,EAOA;AACA,QAAA,EAAA,CAAA,GAAA,CACA,cACA,QAAA,CAAA,IAAA,GAAA,WAAA,CAAA,GADA,GAEA,UAFA,GAGA,KAAA,OAAA,CAAA,WAAA,CAAA,SAAA,CAAA,IAJA,EAKA,MALA,CAKA,QALA;AAMA,OAdA,MAcA;AACA,QAAA,EAAA,CAAA,GAAA,CACA,cACA,QAAA,CAAA,IAAA,GAAA,WAAA,CAAA,GADA,GAEA,UAFA,GAGA,KAAA,OAAA,CAAA,WAAA,CAAA,SAAA,CAAA,IAJA,EAKA,IALA,CAKA,QALA;AAMA;;AACA,MAAA,KAAA,CAAA,oCAAA,CAAA;AACA,KAv2BA;AAy2BA,IAAA,aAz2BA,2BAy2BA;AACA,UAAA,UAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,oBAAA,EAAA;AACA,WAAA,OAAA,CAAA,aAAA,CAAA,KAAA,GAAA,UAAA;AACA,UAAA,QAAA,GAAA,KAAA,OAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,oBAAA,EAAA,QAAA;AACA,KA92BA;AAg3BA,IAAA,aAAA,EAAA,yBAAA;AACA,UAAA,SAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,iBAAA,CAAA,IAAA,CAAA;AACA,WAAA,OAAA,CAAA,aAAA,CAAA,KAAA,GAAA,SAAA;AACA,UAAA,QAAA,GAAA,KAAA,OAAA,CAAA,aAAA,CAAA,IAAA,CACA,KAAA,OAAA,CAAA,WAAA,CAAA,GADA,EAEA,EAFA,CAAA;AAKA,MAAA,SAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,iBAAA,EAAA;AACA,WAAA,OAAA,CAAA,aAAA,CAAA,KAAA,GAAA,SAAA;AACA,UAAA,QAAA,GAAA,KAAA,OAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAEA,UAAA,GAAA,GAAA,IAAA,KAAA,EAAA;AACA,MAAA,GAAA,CAAA,IAAA,CAAA,KAAA,SAAA,GAAA,OAAA,EAAA,QAAA;AACA,MAAA,GAAA,CAAA,IAAA,CAAA,KAAA,SAAA,GAAA,OAAA,EAAA,QAAA;AACA,MAAA,GAAA,CAAA,IAAA,CACA,YADA,EAEA,2MAFA;AAKA,UAAA,IAAA,GAAA,KAAA,SAAA;AAEA,MAAA,GAAA,CAAA,aAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA,EAAA,IAAA,CAAA,UAAA,OAAA,EAAA;AACA;AACA,QAAA,SAAA,CAAA,MAAA,CAAA,OAAA,EAAA,IAAA,GAAA,MAAA;AACA,OAHA,EAtBA,CA0BA;AACA,KA34BA;AA64BA,IAAA,aAAA,EAAA,yBAAA;AACA,UAAA,SAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,iBAAA,CAAA,IAAA,CAAA;AACA,WAAA,OAAA,CAAA,aAAA,CAAA,KAAA,GAAA,SAAA,CAFA,CAIA;;AAEA,UAAA,QAAA,GAAA,KAAA,OAAA,CAAA,aAAA,CAAA,IAAA,CACA,KAAA,OAAA,CAAA,WAAA,CAAA,GADA,EAEA,EAFA,CAAA;AAKA,UAAA,IAAA,GAAA,QAAA,CAAA,aAAA,CAAA,GAAA,CAAA;AACA,MAAA,IAAA,CAAA,IAAA,GAAA,GAAA,CAAA,eAAA,CACA,IAAA,IAAA,CAAA,CAAA,QAAA,CAAA,EAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA,CADA,CAAA;AAGA,MAAA,IAAA,CAAA,MAAA,GAAA,QAAA,CAfA,CAgBA;;AACA,MAAA,IAAA,CAAA,KAAA;AACA,MAAA,GAAA,CAAA,eAAA,CAAA,IAAA,CAAA,IAAA,EAlBA,CAmBA;AACA,KAj6BA;;AAm6BA;;;;;;;;AASA,IAAA,gBAAA,EAAA,4BAAA;AACA,UAAA,eAAA,GAAA,KAAA,gBAAA,EAAA;;AACA,UACA,cAAA,CAAA,OAAA,CAAA,gBAAA,MAAA,KAAA,IACA,eAAA,KAAA,IAFA,EAGA;AACA,aAAA,mBAAA;AACA;AACA,KAp7BA;AAs7BA,IAAA,mBAAA,EAAA,+BAAA;AAAA;;AACA,UAAA,SAAA,GAAA,IAAA;;AACA,UAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AACA,UAAA,SAAA,GAAA,IAAA,SAAA,CAAA,MAAA,CAAA;AACA,QAAA,KAAA,EAAA,CACA;AACA;AACA;AACA;AACA;AACA,UAAA,IAAA,EAAA,sCALA;AAMA,UAAA,IAAA,EAAA,KANA;AAOA,UAAA,QAAA,EAAA;AAPA,SADA,CADA;AAaA;AACA,QAAA,MAAA,EAAA;AAdA,OAAA,CAAA;AAiBA,MAAA,SAAA,CACA,WADA,CACA,SADA,EAEA,QAFA,GAGA,IAHA,CAGA,UAAA,IAAA,EAAA;AACA,YAAA,OAAA,GAAA,IAAA,CAAA,aAAA;;AADA,mCAEA,CAFA;AAGA,UAAA,SAAA,CACA,WADA,CACA,SADA,EAEA,SAFA,CAEA,CAAA,CAAA,QAAA,EAFA,EAGA,QAHA,GAIA,IAJA,CAIA,UAAA,IAAA,EAAA;AACA,gBAAA,cAAA,GAAA,IAAA,aAAA,CAAA,IAAA,CAAA,IAAA,EAAA,KAAA,CAAA;AACA,gBAAA,YAAA,GAAA,IAAA,WAAA,CAAA,cAAA,CAAA,KAAA,CAAA;AACA,gBAAA,EAAA,GAAA,EAAA;AACA,gBAAA,EAAA,GAAA,EAAA;;AACA,iBACA,IAAA,EAAA,GAAA,CADA,EAEA,EAAA,GAAA,YAAA,CAAA,kBAAA,CAAA,MAFA,EAGA,EAAA,EAHA,EAIA;AACA,cAAA,EAAA,IAAA,YAAA,CAAA,kBAAA,CAAA,EAAA,EAAA,WAAA,CAAA,IAAA;AACA;;AACA,iBAAA,IAAA,GAAA,GAAA,CAAA,EAAA,GAAA,GAAA,MAAA,CAAA,UAAA,CAAA,MAAA,EAAA,GAAA,EAAA,EAAA;AACA,cAAA,EAAA,IAAA,MAAA,CAAA,UAAA,CAAA,GAAA,EAAA,WAAA,CAAA,IAAA;AACA;;AACA,gBACA,YAAA,CAAA,kBAAA,CAAA,MAAA,GACA,MAAA,CAAA,UAAA,CAAA,MAFA,EAGA;AACA,mBACA,IAAA,GAAA,GAAA,YAAA,CAAA,kBAAA,CAAA,MADA,EAEA,GAAA,GAAA,MAAA,CAAA,UAAA,CAAA,MAFA,EAGA,GAAA,EAHA,EAIA;AACA,oBAAA,iBAAA,GAAA,MAAA,CAAA,UAAA,CACA,GADA,EAEA,WAFA,CAEA,IAFA,CAEA,OAFA,CAEA,IAFA,CAAA;;AAGA,oBAAA,kBAAA,GAAA,MAAA,CAAA,UAAA,CACA,GADA,EAEA,WAFA,CAEA,IAFA,CAEA,OAFA,CAEA,IAFA,CAAA;;AAGA,oBAAA,QAAA,GAAA,MAAA,CAAA,UAAA,CAAA,GAAA,EAAA,WAAA,CAAA,IAAA;;AACA,oBAAA,iBAAA,IAAA,CAAA,CAAA,EAAA;AACA,sBAAA,UAAA,GAAA,MAAA,CAAA,UAAA,CACA,GADA,EAEA,WAFA,CAEA,IAFA,CAEA,SAFA,CAGA,iBAHA,EAIA,kBAAA,GAAA,CAJA,CAAA;;AAMA,kBAAA,QAAA,GAAA,MAAA,CAAA,UAAA,CAAA,GAAA,EAAA,WAAA,CAAA,IAAA,CAAA,OAAA,CACA,UADA,EAEA,EAFA,CAAA;AAIA;;AACA,oBACA,MAAA,CAAA,UAAA,CAAA,GAAA,EAAA,WAAA,CAAA,IAAA,CAAA,QAAA,CACA,0DADA,KAGA,QAAA,CAAA,OAAA,CAAA,KAAA,EAAA,EAAA,MAAA,EAJA,EAKA;AACA,kBAAA,KAAA,CAAA,sCAAA,CAAA;AACA;AACA;;AACA,gBAAA,EAAA,IAAA,QAAA;AACA;AACA;;AACA,gBAAA,eAAA,GAAA,MAAA,CAAA,UAAA,CAAA,EAAA,EAAA,EAAA,CAAA,CAvDA,CAwDA;;;AACA,gBAAA,eAAA,GAAA,IAAA,EAAA;AACA,cAAA,SAAA,GAAA,KAAA;AACA,cAAA,KAAA,CACA,4FADA,CAAA;AAGA;AACA;;AACA,gBACA,eAAA,IAAA,IAAA,IACA,CAAA,KAAA,OAAA,GAAA,CADA,IAEA,SAAA,KAAA,IAHA,EAIA;AACA,cAAA,KAAA,CACA,wDADA,CAAA;AAGA;AACA;AACA,WA9EA;AAHA;;AAEA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,OAAA,GAAA,CAAA,EAAA,CAAA,EAAA,EAAA;AAAA,gBAAA,CAAA;AAgFA;AACA,OAtFA;AAuFA,KAjiCA;AAmiCA;AACA,IAAA,gBAAA,EAAA,4BAAA;AACA,UAAA,EAAA,GAAA,EAAA;AACA,UAAA,EAAA,GAAA,EAAA;;AACA,WACA,IAAA,CAAA,GAAA,CADA,EAEA,CAAA,GAAA,IAAA,CAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,EAAA,MAFA,EAGA,CAAA,EAHA,EAIA;AACA,QAAA,EAAA,IAAA,IAAA,CAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,EACA,WADA,CACA,IADA;AAEA;;AACA,WAAA,IAAA,GAAA,GAAA,CAAA,EAAA,GAAA,GAAA,KAAA,UAAA,CAAA,MAAA,EAAA,GAAA,EAAA,EAAA;AACA,QAAA,EAAA,IAAA,KAAA,UAAA,CAAA,GAAA,EAAA,WAAA,CAAA,IAAA;AACA;;AACA,UACA,IAAA,CAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,EAAA,MAAA,GACA,KAAA,UAAA,CAAA,MAFA,EAGA;AACA,aACA,IAAA,GAAA,GAAA,IAAA,CAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,EAAA,MADA,EAEA,GAAA,GAAA,KAAA,UAAA,CAAA,MAFA,EAGA,GAAA,EAHA,EAIA;AACA,cAAA,iBAAA,GAAA,KAAA,UAAA,CAAA,GAAA,EAAA,WAAA,CAAA,IAAA,CAAA,OAAA,CACA,IADA,CAAA;;AAGA,cAAA,kBAAA,GAAA,KAAA,UAAA,CAAA,GAAA,EAAA,WAAA,CAAA,IAAA,CAAA,OAAA,CACA,IADA,CAAA;;AAGA,cAAA,QAAA,GAAA,KAAA,UAAA,CAAA,GAAA,EAAA,WAAA,CAAA,IAAA;;AACA,cAAA,iBAAA,IAAA,CAAA,CAAA,EAAA;AACA,gBAAA,UAAA,GAAA,KAAA,UAAA,CAAA,GAAA,EAAA,WAAA,CAAA,IAAA,CAAA,SAAA,CACA,iBADA,EAEA,kBAAA,GAAA,CAFA,CAAA;;AAIA,YAAA,QAAA,GAAA,KAAA,UAAA,CAAA,GAAA,EAAA,WAAA,CAAA,IAAA,CAAA,OAAA,CACA,UADA,EAEA,EAFA,CAAA;AAIA;;AACA,cACA,KAAA,UAAA,CAAA,GAAA,EAAA,WAAA,CAAA,IAAA,CAAA,QAAA,CACA,0DADA,KAGA,QAAA,CAAA,OAAA,CAAA,KAAA,EAAA,EAAA,MAAA,EAJA,EAKA;AACA,YAAA,KAAA,CAAA,sCAAA,CAAA;AACA,mBAAA,KAAA;AACA;;AACA,UAAA,EAAA,IAAA,QAAA;AACA;AACA;;AACA,UAAA,eAAA,GAAA,KAAA,UAAA,CAAA,EAAA,EAAA,EAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,eAAA;;AACA,UAAA,eAAA,GAAA,IAAA,EAAA;AACA,QAAA,KAAA,CACA,qEADA,CAAA;AAGA,eAAA,KAAA;AACA;;AACA,UAAA,cAAA,CAAA,OAAA,CAAA,gBAAA,KAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,+CAAA,CAAA;AACA,OAFA,MAEA;AACA,eAAA,IAAA;AACA;AACA,KArmCA;AAumCA;AACA,IAAA,UAAA,EAAA,oBAAA,EAAA,EAAA,EAAA,EAAA;AACA,UAAA,MAAA,GAAA,EAAA,CAAA,WAAA,GAAA,OAAA,CAAA,KAAA,EAAA,EAAA,CAAA;AACA,UAAA,OAAA,GAAA,EAAA,CAAA,WAAA,GAAA,OAAA,CAAA,KAAA,EAAA,EAAA,CAAA;;AACA,UAAA,EAAA,CAAA,MAAA,GAAA,EAAA,CAAA,MAAA,EAAA;AACA,QAAA,MAAA,GAAA,EAAA;AACA,QAAA,OAAA,GAAA,EAAA;AACA;;AACA,UAAA,YAAA,GAAA,MAAA,CAAA,MAAA;;AACA,UAAA,YAAA,IAAA,CAAA,EAAA;AACA,eAAA,GAAA;AACA;;AACA,aACA,CAAA,YAAA,GAAA,KAAA,YAAA,CAAA,MAAA,EAAA,OAAA,CAAA,IACA,UAAA,CAAA,YAAA,CAFA;AAIA,KAvnCA;AAynCA,IAAA,YAAA,EAAA,sBAAA,EAAA,EAAA,EAAA,EAAA;AACA,UAAA,KAAA,GAAA,IAAA,KAAA,EAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,IAAA,EAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,SAAA,GAAA,CAAA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,IAAA,EAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,CAAA,IAAA,CAAA,EAAA;AACA,YAAA,KAAA,CAAA,CAAA,CAAA,GAAA,CAAA;AACA,WAFA,MAEA;AACA,gBAAA,CAAA,GAAA,CAAA,EAAA;AACA,kBAAA,QAAA,GAAA,KAAA,CAAA,CAAA,GAAA,CAAA,CAAA;;AACA,kBAAA,EAAA,CAAA,MAAA,CAAA,CAAA,GAAA,CAAA,KAAA,EAAA,CAAA,MAAA,CAAA,CAAA,GAAA,CAAA,CAAA,EAAA;AACA,gBAAA,QAAA,GACA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,GAAA,CAAA,QAAA,EAAA,SAAA,CAAA,EAAA,KAAA,CAAA,CAAA,CAAA,IAAA,CADA;AAEA;;AACA,cAAA,KAAA,CAAA,CAAA,GAAA,CAAA,CAAA,GAAA,SAAA;AACA,cAAA,SAAA,GAAA,QAAA;AACA;AACA;AACA;;AACA,YAAA,CAAA,GAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,EAAA,CAAA,MAAA,CAAA,GAAA,SAAA;AACA;AACA;;AACA,aAAA,KAAA,CAAA,EAAA,CAAA,MAAA,CAAA;AACA,KAjpCA;AAmpCA,IAAA,cAAA,EAAA,0BAAA;AACA,UAAA,SAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,iBAAA,EAAA;AACA,WAAA,OAAA,CAAA,aAAA,CAAA,KAAA,GAAA,SAAA;AAEA,UAAA,QAAA,GAAA,KAAA,OAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AACA,MAAA,cAAA,CAAA,OAAA,CAAA,cAAA,EAAA,QAAA;AACA,MAAA,cAAA,CAAA,OAAA,CAAA,eAAA,EAAA,EAAA,EANA,CAQA;;AAEA,WAAA,OAAA,CAAA,WAAA,CAAA,iBAAA,CACA,KAAA,WAAA,CAAA,MADA,EAEA,KAAA,WAAA,CAAA,gBAFA,EAGA,KAAA,WAAA,CAAA,aAHA;AAKA,WAAA,cAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,SAAA;AACA,WAAA,cAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,cAAA;AACA,WAAA,cAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,cAAA;AACA,WAAA,UAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,kBAAA;AACA,WAAA,SAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAAA,SAAA,CAAA,IAAA;AACA,KAvqCA;AAyqCA,IAAA,gBAAA,EAAA,4BAAA;AACA,UAAA,KAAA,WAAA,CAAA,SAAA,GAAA,EAAA,EAAA;AACA,aAAA,WAAA,CAAA,SAAA,GAAA,CAAA;AACA;;AAEA,UAAA,KAAA,WAAA,CAAA,iBAAA,GAAA,EAAA,EAAA;AACA,aAAA,WAAA,CAAA,iBAAA,GAAA,CAAA;AACA;;AAEA,UAAA,KAAA,WAAA,CAAA,eAAA,GAAA,EAAA,EAAA;AACA,aAAA,WAAA,CAAA,eAAA,GAAA,CAAA;AACA;;AAEA,UAAA,KAAA,WAAA,CAAA,gBAAA,GAAA,EAAA,EAAA;AACA,aAAA,WAAA,CAAA,gBAAA,GAAA,CAAA;AACA;;AAEA,UAAA,KAAA,WAAA,CAAA,YAAA,GAAA,EAAA,EAAA;AACA,aAAA,WAAA,CAAA,YAAA,GAAA,CAAA;AACA;;AAEA,UAAA,KAAA,WAAA,CAAA,cAAA,GAAA,EAAA,EAAA;AACA,aAAA,WAAA,CAAA,cAAA,GAAA,CAAA;AACA;AACA,KAjsCA;AAmsCA,IAAA,SAAA,EAAA,qBAAA;AACA,UAAA,KAAA,UAAA,IAAA,WAAA,EAAA;AACA,aAAA,UAAA,GAAA,KAAA;AACA,aAAA,SAAA,GAAA,KAAA;AACA,aAAA,QAAA,GAAA,IAAA;AACA,aAAA,UAAA,GAAA,UAAA;AACA,OALA,MAKA;AACA,aAAA,UAAA,GAAA,KAAA;AACA,aAAA,SAAA,GAAA,KAAA;AACA,aAAA,QAAA,GAAA,KAAA;AACA,aAAA,UAAA,GAAA,WAAA;AACA;AACA,KA/sCA;AAitCA,IAAA,YAAA,EAAA,wBAAA;AACA;;;;;;;;;;;AAYA,UAAA,CAAA,KAAA,UAAA,EAAA;AACA,aAAA,KAAA,CAAA,WAAA;AACA,aAAA,UAAA,GAAA,IAAA;AACA,aAAA,UAAA,GAAA,qBAAA;AACA,aAAA,aAAA,GAAA,OAAA;AACA,OALA,MAKA;AACA,aAAA,KAAA,CAAA,aAAA;AACA,aAAA,UAAA,GAAA,KAAA;AACA,aAAA,UAAA,GAAA,gBAAA;AACA,aAAA,aAAA,GAAA,MAAA;AACA;AACA,KAzuCA;AA2uCA,IAAA,YAAA,EAAA,sBAAA,KAAA,EAAA;AACA,WAAA,SAAA,GAAA,KAAA;AACA;AA7uCA,GAnLA;AAm6CA,EAAA,aAAA,EAAA,yBAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,WAAA;AACA,SAAA,OAAA,CAAA,WAAA,CAAA,OAAA;AACA,GAt6CA;AAw6CA,EAAA,MAAA,EAAA,CAAA,UAAA,EAAA,aAAA;AAx6CA,CAAA","sourcesContent":["<template>\n  <div class=\"editor\">\n    <v-card\n      fluid\n      outlined\n      class=\"column\"\n      id=\"toolBar\"\n      :width=\"this.toolsWidth\"\n      :height=\"this.contentHeight\"\n    >\n      <gso\n        v-bind:key=\"this.renderHints.gsoRenderKey\"\n        v-bind:isLoggedIn=\"this.isLoggedIn\"\n        v-bind:storyName=\"this.storyName\"\n        v-bind:minimized=\"this.hideItem\"\n        v-on:evtDownloadStory=\"downloadStory\"\n        v-on:evtViewHTML=\"viewStoryHTML\"\n        v-on:evtNewStoryName=\"changeStoryName\"\n        v-on:evtSave=\"saveStoryToProfile\"\n        v-on:evtPublish=\"getExportFile\"\n        v-on:evtNewStory=\"loadTwee\"\n        v-on:evtCreateNewStory=\"loadStoryTemplate\"\n      />\n\n      <v-toolbar color=\"orange darken-2\" flat dark>\n        <v-toolbar-title>\n          <h4>TOOLS</h4>\n        </v-toolbar-title>\n        <v-spacer />\n        <v-btn fab light x-small @click=\"hideTools\">\n          <v-icon>{{toolButton}}</v-icon>\n        </v-btn>\n      </v-toolbar>\n\n      <v-tabs vertical color=\"orange darken-2\">\n        <v-tab\n          v-on:click=\"renderHints.inVariableEditor = true; renderHints.inMediaEditor = false; hideThemes(); \"\n        >\n          <h5>Text</h5>\n        </v-tab>\n\n        <v-tab\n          v-on:click=\"renderHints.inVariableEditor = false; renderHints.inMediaEditor = true; hideThemes(); \"\n        >\n          <h5>Media</h5>\n        </v-tab>\n\n        <v-tab\n          v-on:click=\"renderHints.inVariableEditor = false; renderHints.inMediaEditor = false; showThemes(); \"\n        >\n          <h5>Themes</h5>\n        </v-tab>\n\n        <v-tab\n          v-on:click=\"renderHints.inVariableEditor = false; renderHints.inMediaEditor = false; hideThemes(); \"\n        >\n          <h5>Passages</h5>\n        </v-tab>\n\n        <v-tab-item :hidden=\"this.hideItem\">\n          <v-card flat>\n            <v-card-text>\n              <var-sidebar\n                id=\"var_sidebar\"\n                v-bind:key=\"this.renderHints.variableRenderKey\"\n                v-bind:storyVars=\"this.storyVariables\"\n                v-on:evtVarValueChange=\"setVariable\"\n                v-on:evtVarNameChange=\"setVariableName\"\n                v-on:evtDelete=\"deleteVariable\"\n                v-on:evtDispVars=\"regenerateStoryText\"\n                v-on:evtNewVar=\"addNewVariable\"\n              ></var-sidebar>\n            </v-card-text>\n          </v-card>\n        </v-tab-item>\n\n        <v-tab-item :hidden=\"this.hideItem\">\n          <v-card flat>\n            <v-card-text>\n              <media-sidebar\n                id=\"media_sidebar\"\n                v-bind:key=\"this.renderHints.mediaRenderKey\"\n                v-bind:imageVars=\"this.imageVariables\"\n                v-bind:audioVars=\"this.audioVariables\"\n                v-bind:status=\"this.status\"\n                v-on:evtDispVars=\"regenerateStoryText\"\n                v-on:evtReplaceImage=\"replaceImage\"\n                v-on:evtReplaceAudio=\"replaceAudio\"\n                v-on:evtAudioNameChange=\"replaceAudioName\"\n                v-on:evtImageNameChange=\"replaceImageName\"\n                v-on:evtNewImageVariable=\"addImageVariable\"\n                v-on:evtNewAudioVariable=\"addAudioVariable\"\n                v-on:evtAddImage=\"addImageToPage\"\n                v-on:evtAddAudio=\"addAudioToPage\"\n                v-on:evtRemoveImage=\"removeImageVariable\"\n                v-on:evtRemoveAudio=\"removeAudioVariable\"\n              ></media-sidebar>\n            </v-card-text>\n          </v-card>\n        </v-tab-item>\n\n        <v-tab-item :hidden=\"this.hideItem\">\n          <v-card flat>\n            <v-card-text>\n              <themes-sidebar\n                id=\"themes_sidebar\"\n                v-on:evtNewTheme=\"setTheme\"\n                v-on:evtNewThemeAll=\"setThemeAll\"\n                v-bind:backgroundColor=\"this.storyPages[this.currentPage - 1].extractCSSProperty('background-color')\"\n                v-bind:textColor=\"this.storyPages[this.currentPage - 1].extractCSSProperty('color')\"\n              ></themes-sidebar>\n            </v-card-text>\n          </v-card>\n        </v-tab-item>\n        <v-tab-item :hidden=\"this.hideItem\">\n          <v-card flat>\n            <v-card-text>\n              <passage-sidebar\n                id=\"passage_sidebar\"\n                v-bind:storyPages=\"this.storyPages\"\n                v-bind:currPassage=\"this.storyPages[this.currentPage - 1].pageName\"\n                v-bind:key=\"this.renderHints.passageRenderKey\"\n                v-on:evtNewPassageName=\"updatePassageName\"\n                v-on:evtRemoveLink=\"removeLink\"\n                v-on:evtAddLink=\"addLink\"\n                v-on:evtGoToPage=\"goToPage\"\n                v-on:evtCreateNew=\"addPage\"\n                v-on:evtDelete=\"deletePassage\"\n              ></passage-sidebar>\n            </v-card-text>\n          </v-card>\n        </v-tab-item>\n      </v-tabs>\n\n      <div style=\"border-top: solid 2px lightgray; padding: 10px;\">\n        <v-card-text>\n          Need help using the editor? Visit\n          <a href=\"MyTale Guide.html\" target=\"_blank\">Support</a>.\n        </v-card-text>\n      </div>\n    </v-card>\n\n    <v-card\n      outlined\n      class=\"column\"\n      id=\"storyPage\"\n      :width=\"this.pageWidth\"\n      :height=\"this.contentHeight\"\n    >\n      <page-layout\n        id=\"page_layout\"\n        v-bind:key=\"this.renderHints.renderKey\"\n        v-bind:page=\"this.storyPages[this.currentPage - 1]\"\n        v-bind:imageVars=\"this.imageVariables\"\n        v-bind:audioVars=\"this.audioVariables\"\n        v-bind:themeView=\"this.themeView\"\n        v-on:evtNext=\"nextPage\"\n        v-on:evtStart=\"goToStart\"\n        v-on:evtPrev=\"prevPage\"\n        v-on:evtPassageNameChange=\"updatePassageName\"\n        v-on:evtPassageChange=\"updatePassage\"\n        v-on:evtDelete=\"deletePassage\"\n        v-on:evtMinHeight=\"setMinHeight\"\n        v-on:evtStartPage=\"setStartPage\"\n        v-on:removeImageFromPage=\"removeImageFromPage\"\n        v-on:removeAudioFromPage=\"removeAudioFromPage\"\n      ></page-layout>\n\n      <v-tooltip bottom>\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn v-bind=\"attrs\" v-on=\"on\" top left absolute icon light @click=\"goFullScreen\">\n            <v-icon>{{fullButton}}</v-icon>\n          </v-btn>\n        </template>\n        <span>{{!inFullMode ? \"Full Screen\": \"Exit Full Screen\"}}</span>\n      </v-tooltip>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport Sidebar_Variables from \"./tools/variables/Sidebar_Variables.vue\";\nimport Sidebar_Media from \"./tools/media/Sidebar_Media.vue\";\nimport Sidebar_Themes from \"./tools/themes/Sidebar_Themes.vue\";\nimport Sidebar_Passage from \"./tools/passage/Sidebar_Passage.vue\";\nimport Global_Story_Options from \"./tools/options/Global_Story_Options.vue\";\nimport Page_Layout from \"./Page_Layout.vue\";\n\nimport FileConverter from \"@/js/extwee_utils/FileConverter.js\";\nimport StoryEditor from \"@/js/extwee_utils/StoryEditor.js\";\nimport firebase from \"firebase\";\nimport { db } from \"@/firebaseConfig\";\nimport storyMixin from \"../../mixins/storyMixin\";\nimport tweeConverter from \"../../mixins/tweeConverterMixin\";\nimport Axios from \"axios\";\nimport FileSaver from \"browser-filesaver\";\nimport debounce from \"debounce\";\n\nvar JSZip = require(\"jszip\");\n\nexport default {\n  name: \"editor\",\n\n  data() {\n    return {\n      isLoggedIn: false,\n\n      /////\n      userRef: null,\n      storyRef: null,\n      basePath: \"\",\n      totalFileSize: 0,\n      maxStorageSize: 15,\n      status: \"\",\n      /////\n\n      storyName: \"\",\n      storyPages: Array,\n      storyVariables: Map,\n      imageVariables: Map,\n      audioVariables: Map,\n\n      currentPage: 1,\n      pagesVisited: [],\n\n      toolsWidth: \"30%\",\n\n      pageWidth: \"70%\",\n      contentHeight: \"74vh\",\n      minHeight: \"500px\",\n      hideItem: false,\n      toolButton: \"mdi-minus\",\n      fullButton: \"mdi-fullscreen\",\n      inFullMode: false,\n\n      themeView: false,\n\n      handles: {\n        storyEditor: StoryEditor,\n        fileConverter: FileConverter\n      },\n\n      renderHints: {\n        renderKey: 1,\n        variableRenderKey: 1,\n        themesRenderKey: 1,\n        passageRenderKey: 1,\n        gsoRenderKey: 1,\n        mediaRenderKey: 1,\n        hidden: true,\n        inVariableEditor: true,\n        inMediaEditor: false\n      },\n\n      hi: \"Hello\",\n      exportFile: \"\"\n    };\n  },\n\n  created: function() {\n    /////\n    if (firebase.auth().currentUser) {\n      this.isLoggedIn = true;\n    }\n    if (this.isLoggedIn) {\n      var storageRef = firebase.storage().ref();\n      var userID = firebase.auth().currentUser.email;\n      this.userRef = storageRef.child(userID);\n    }\n    /////\n\n    if (this.$store.state.storyLocation != \"\") {\n      Axios.get(this.$store.state.storyLocation).then(response => {\n        if (response.data != null) {\n          this.loadContents(response.data);\n          if (\n            sessionStorage.getItem(\"OGstoryPassages\") === \"\" ||\n            sessionStorage.getItem(\"OGstoryPassages\") === null\n          ) {\n            sessionStorage.setItem(\n              \"OGstoryPassages\",\n              JSON.stringify(this.handles.storyEditor.exportedStoryPages)\n            );\n          }\n          sessionStorage.setItem(\"createTemplate\", \"yes\");\n          console.log(\"Read Success\");\n        } else {\n          console.log(\"Read Fail\");\n        }\n      });\n    } else if (this.$store.state.storyContent != \"\") {\n      console.log(sessionStorage.getItem(\"storyContent\"));\n      this.loadContents(this.$store.state.storyContent);\n      if (sessionStorage.getItem(\"OGstoryPassages\") === \"\") {\n        sessionStorage.setItem(\n          \"OGstoryPassages\",\n          JSON.stringify(this.handles.storyEditor.exportedStoryPages)\n        );\n      }\n      //this.handles.storyEditor.removeVariableInject();\n      this.regenerateStoryText({ disp: true });\n    }\n\n    if (this.isLoggedIn) {\n      if (this.storyName == \"\") {\n        this.storyName = \"Story Template\";\n      }\n      this.storyRef = this.userRef.child(this.storyName);\n      this.basePath = this.isLoggedIn.email + \"/\" + this.storyName + \"/\";\n    }\n\n    /////\n    if (this.isLoggedIn) {\n      this.storyRef.listAll().then(\n        function(result) {\n          result.items.forEach(\n            function(mediaRef) {\n              var key =\n                \"@\" + mediaRef.name.substring(0, mediaRef.name.indexOf(\"=\"));\n\n              if (this.imageVariables.has(key)) {\n                var currValue = this.imageVariables.get(key);\n                var value = {\n                  file: currValue.file,\n                  fileName: mediaRef.name.substring(\n                    mediaRef.name.indexOf(\"=\") + 1\n                  ),\n                  path: mediaRef.getDownloadURL(),\n                  id: currValue.id,\n                  color: currValue.color,\n                  uploaded: true\n                };\n                this.handles.storyEditor.setImageVariable(key, value);\n                this.totalFileSize += currValue.file.size / 1024 / 1024;\n              }\n              if (this.audioVariables.has(key)) {\n                currValue = this.audioVariables.get(key);\n                value = {\n                  file: currValue.file,\n                  fileName: mediaRef.name.substring(\n                    mediaRef.name.indexOf(\"=\") + 1\n                  ),\n                  path: mediaRef.getDownloadURL(),\n                  id: currValue.id,\n                  color: currValue.color,\n                  uploaded: true\n                };\n                this.handles.storyEditor.setAudioVariable(key, value);\n                this.totalFileSize += currValue.file.size / 1024 / 1024;\n              }\n              console.log(this.imageVariables);\n              console.log(this.audioVariables);\n            }.bind(this)\n          );\n        }.bind(this)\n      );\n    }\n    /////\n  },\n\n  components: {\n    \"var-sidebar\": Sidebar_Variables,\n    \"media-sidebar\": Sidebar_Media,\n    \"themes-sidebar\": Sidebar_Themes,\n    \"passage-sidebar\": Sidebar_Passage,\n    \"page-layout\": Page_Layout,\n    gso: Global_Story_Options\n  },\n\n  watch: {\n    status: debounce(function() {\n      if (this.status.includes(\"success\")) {\n        this.status = \"\";\n        this.renderHints.renderKey++;\n        this.checkRenderHints();\n      }\n    }, 3000)\n  },\n\n  methods: {\n    loadTwee: function(files) {\n      console.log(files);\n\n      const file = files[0];\n\n      var isHTML = file.name.includes(\".html\");\n\n      this.storyVariables = null;\n      this.storyLinkPassages = null;\n      this.storyDispPassages = null;\n\n      this.handles.storyEditor = null;\n      this.handles.fileConverter = null;\n\n      const tempFileReader = new FileReader();\n\n      tempFileReader.onload = () => {\n        // alert(tempFileReader.result);\n\n        this.handles.fileConverter = new FileConverter(\n          tempFileReader.result,\n          isHTML\n        );\n        this.handles.storyEditor = new StoryEditor(\n          this.handles.fileConverter.story\n        );\n        this.storyVariables = this.handles.storyEditor.variables;\n        this.imageVariables = this.handles.storyEditor.imageVariables;\n        this.audioVariables = this.handles.storyEditor.audioVariables;\n        this.storyPages = this.handles.storyEditor.exportedStoryPages;\n        this.storyName = this.handles.storyEditor.baseStory.name;\n\n        this.goToStart();\n\n        this.renderHints.renderKey++;\n        this.renderHints.variableRenderKey++;\n        this.renderHints.passageRenderKey++;\n        this.renderHints.gsoRenderKey++;\n\n        this.renderHints.hidden = true;\n        this.checkRenderHints();\n\n        sessionStorage.setItem(\"storyContent\", tempFileReader.result);\n        sessionStorage.setItem(\"storyLocation\", \"\");\n\n        this.regenerateStoryText({ disp: this.renderHints.hidden });\n      };\n      tempFileReader.readAsText(file);\n    },\n\n    loadContents: function(contents) {\n      this.storyVariables = null;\n      this.storyLinkPassages = null;\n      this.storyDispPassages = null;\n\n      this.handles.storyEditor = null;\n      this.handles.fileConverter = null;\n\n      this.handles.fileConverter = new FileConverter(contents, false);\n      this.handles.storyEditor = new StoryEditor(\n        this.handles.fileConverter.story\n      );\n      this.storyVariables = this.handles.storyEditor.variables;\n      this.imageVariables = this.handles.storyEditor.imageVariables;\n      this.audioVariables = this.handles.storyEditor.audioVariables;\n      this.storyPages = this.handles.storyEditor.exportedStoryPages;\n      this.storyName = this.handles.storyEditor.baseStory.name;\n\n      this.goToStart();\n\n      this.renderHints.renderKey++;\n      this.renderHints.variableRenderKey++;\n      this.renderHints.passageRenderKey++;\n      this.renderHints.gsoRenderKey++;\n\n      this.renderHints.hidden = true;\n      this.checkRenderHints();\n\n      this.regenerateStoryText({ disp: this.renderHints.hidden });\n    },\n\n    loadStoryTemplate: function() {\n      console.log(\"story template\");\n\n      Axios.get(\"/stories/Story Template.twee\").then(response => {\n        if (response.data != null) {\n          this.loadContents(response.data);\n          sessionStorage.setItem(\n            \"OGstoryPassages\",\n            JSON.stringify(this.handles.storyEditor.exportedStoryPages)\n          );\n          sessionStorage.setItem(\"createTemplate\", \"yes\");\n          console.log(\"Read Success\");\n        } else {\n          console.log(\"Read Fail\");\n        }\n      });\n\n      this.regenerateStoryText({ disp: this.renderHints.hidden });\n    },\n\n    replaceImage: function(event) {\n      this.handles.storyEditor.setImageVariable(event.name, event.data);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.mediaRenderKey++;\n      this.checkRenderHints();\n\n      /////\n      var imgData = this.imageVariables.get(event.name);\n      if (this.isLoggedIn) {\n        var removeRef = this.storyRef.child(\n          event.name.replace(\"@\", \"\") + \"=\" + event.oldData.fileName\n        );\n        removeRef.delete().then(function() {\n          this.status =\n            \"Uploading \" + event.data.fileName + \"... please be patient :)\";\n        });\n        this.totalFileSize -= event.oldData.file.size / 1024 / 1024;\n        this.totalFileSize += event.data.file.size / 1024 / 1024;\n\n        if (this.totalFileSize > this.maxStorageSize) {\n          this.totalFileSize -= event.data.file.size / 1024 / 1024;\n          this.totalFileSize += event.oldData.file.size / 1024 / 1024;\n          this.status =\n            \"Sorry! It looks like you've run out of storage space. Try uploading a smaller file!\";\n\n          this.handles.storyEditor.setImageVariable(event.name, event.oldData);\n          this.renderHints.renderKey++;\n          this.renderHints.mediaRenderKey++;\n          this.checkRenderHints();\n        } else {\n          var newRef = this.storyRef.child(\n            event.name.replace(\"@\", \"\") + \"=\" + event.data.fileName\n          );\n          newRef.put(event.data.file).then(\n            function() {\n              this.status =\n                \"Upload for \" + event.data.fileName + \" successful!\";\n              var obj = {\n                file: event.data.file,\n                fileName: event.data.fileName,\n                path: newRef.getDownloadURL(),\n                color: imgData.color,\n                id: imgData.id,\n                uploaded: true\n              };\n              this.handles.storyEditor.setImageVariable(event.name, obj);\n\n              this.renderHints.renderKey++;\n              this.renderHints.mediaRenderKey++;\n              this.checkRenderHints();\n\n              console.log(this.imageVariables);\n            }.bind(this)\n          );\n        }\n      }\n      /////\n    },\n\n    replaceAudio: function(event) {\n      this.handles.storyEditor.setAudioVariable(event.name, event.data);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.mediaRenderKey++;\n      this.checkRenderHints();\n\n      /////\n      var audData = this.audioVariables.get(event.name);\n      if (this.isLoggedIn) {\n        var removeRef = this.storyRef.child(\n          event.name.replace(\"@\", \"\") + \"=\" + event.oldData.fileName\n        );\n        removeRef.delete().then(function() {\n          this.status =\n            \"Uploading \" + event.data.fileName + \"... please be patient :)\";\n        });\n        this.totalFileSize -= event.oldData.file.size / 1024 / 1024;\n        this.totalFileSize += event.data.file.size / 1024 / 1024;\n\n        if (this.totalFileSize > this.maxStorageSize) {\n          this.totalFileSize -= event.data.file.size / 1024 / 1024;\n          this.totalFileSize += event.oldData.file.size / 1024 / 1024;\n          this.status =\n            \"Sorry! It looks like you've run out of storage space. Try uploading a smaller file!\";\n\n          this.handles.storyEditor.setAudioVariable(event.name, event.oldData);\n          this.renderHints.renderKey++;\n          this.renderHints.mediaRenderKey++;\n          this.checkRenderHints();\n        } else {\n          var newRef = this.storyRef.child(\n            event.name.replace(\"@\", \"\") + \"=\" + event.data.fileName\n          );\n          newRef.put(event.data.file).then(\n            function() {\n              this.status =\n                \"Upload for \" +\n                event.data.fileName +\n                \" successful... thanks for waiting!\";\n              var obj = {\n                file: event.data.file,\n                fileName: event.data.fileName,\n                path: newRef.getDownloadURL(),\n                color: audData.color,\n                id: audData.id,\n                uploaded: true\n              };\n              this.handles.storyEditor.setAudioVariable(event.name, obj);\n\n              this.renderHints.renderKey++;\n              this.renderHints.mediaRenderKey++;\n              this.checkRenderHints();\n\n              console.log(this.audioVariables);\n            }.bind(this)\n          );\n        }\n      }\n      /////\n    },\n\n    replaceImageName: function(event) {\n      var process = this.handles.storyEditor.changeImageVariableName(event);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.mediaRenderKey++;\n      this.checkRenderHints();\n\n      /////\n      var fileName = event.fileName;\n      if (this.isLoggedIn && process) {\n        var removeRef = this.storyRef.child(\n          event.prevName.replace(\"@\", \"\") + \"=\" + fileName\n        );\n        removeRef.delete();\n        var imgData = this.imageVariables.get(event.newName);\n        var newRef = this.storyRef.child(\n          event.newName.replace(\"@\", \"\") + \"=\" + fileName\n        );\n        newRef.put(imgData.file).then(\n          function() {\n            this.status = \"Your changes were saved successfully!\";\n\n            if (imgData.path.i.includes(\"blob\")) {\n              URL.revokeObjectURL(imgData.path.i);\n            }\n\n            var obj = {\n              file: imgData.file,\n              fileName: fileName,\n              path: newRef.getDownloadURL(),\n              color: imgData.color,\n              id: imgData.id,\n              uploaded: true\n            };\n            this.handles.storyEditor.setImageVariable(event.newName, obj);\n\n            this.renderHints.renderKey++;\n            this.renderHints.mediaRenderKey++;\n            this.checkRenderHints();\n\n            //console.log(this.imageVariables);\n          }.bind(this)\n        );\n      }\n      /////\n    },\n\n    replaceAudioName: function(event) {\n      var process = this.handles.storyEditor.changeAudioVariableName(event);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.mediaRenderKey++;\n      this.checkRenderHints();\n\n      /////\n      var fileName = event.fileName;\n      if (this.isLoggedIn && process) {\n        var removeRef = this.storyRef.child(\n          event.prevName.replace(\"@\", \"\") + \"=\" + fileName\n        );\n        removeRef.delete();\n        var audData = this.audioVariables.get(event.newName);\n        var newRef = this.storyRef.child(\n          event.newName.replace(\"@\", \"\") + \"=\" + fileName\n        );\n        newRef.put(audData.file).then(\n          function() {\n            this.status = \"Your changes were saved successfully!\";\n\n            if (audData.path.i.includes(\"blob\")) {\n              URL.revokeObjectURL(audData.path.i);\n            }\n\n            var obj = {\n              file: audData.file,\n              fileName: fileName,\n              path: newRef.getDownloadURL(),\n              color: audData.color,\n              id: audData.id,\n              uploaded: true\n            };\n            this.handles.storyEditor.setAudioVariable(event.newName, obj);\n\n            this.renderHints.renderKey++;\n            this.renderHints.mediaRenderKey++;\n            this.checkRenderHints();\n\n            console.log(this.audioVariables);\n          }.bind(this)\n        );\n      }\n      /////\n    },\n\n    addImageVariable: function(event) {\n      for (var i = 0; i < event.length; i++) {\n        this.handles.storyEditor.addImageVariable(event[i]);\n      }\n      this.handles.storyEditor.reparseMedia();\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.mediaRenderKey++;\n      this.checkRenderHints();\n\n      /////\n      if (this.isLoggedIn) {\n        this.imageVariables.forEach(\n          function(value, key) {\n            this.status =\n              \"Uploading \" + value.fileName + \"... please be patient :)\";\n            console.log(\"Uploaded:\" + value.uploaded);\n\n            if (value.uploaded == false) {\n              var currImageRef = this.storyRef.child(\n                key.replace(\"@\", \"\") + \"=\" + value.fileName\n              );\n              var file = value.file;\n              this.totalFileSize += file.size / 1024 / 1024;\n              if (this.totalFileSize > this.maxStorageSize) {\n                this.totalFileSize -= file.size / 1024 / 1024;\n                this.status =\n                  \"Sorry! It looks like you've run out of storage space. Try uploading smaller files!\";\n                //this.handles.storyEditor.deleteImageVariable(key);\n                this.removeImageVariable({\n                  name: key,\n                  fileName: value.fileName,\n                  file: value.file\n                });\n              } else {\n                currImageRef.put(file).then(\n                  function() {\n                    this.status =\n                      \"Upload for \" +\n                      value.fileName +\n                      \" successful... thanks for waiting!\";\n\n                    if (value.path.i.includes(\"blob\")) {\n                      URL.revokeObjectURL(value.path.i);\n                    }\n\n                    var obj = {\n                      file: value.file,\n                      fileName: value.fileName,\n                      path: currImageRef.getDownloadURL(),\n                      color: value.color,\n                      id: value.id,\n                      uploaded: true\n                    };\n                    this.handles.storyEditor.setImageVariable(key, obj);\n                    //console.log(this.imageVariables);\n                    //console.log(this.totalFileSize);\n\n                    this.renderHints.renderKey++;\n                    this.renderHints.mediaRenderKey++;\n                    this.checkRenderHints();\n                  }.bind(this)\n                );\n              }\n            }\n          }.bind(this)\n        );\n      }\n      /////\n    },\n\n    addAudioVariable: function(event) {\n      for (var i = 0; i < event.length; i++) {\n        this.handles.storyEditor.addAudioVariable(event[i]);\n      }\n      this.handles.storyEditor.reparseMedia();\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.mediaRenderKey++;\n      this.checkRenderHints();\n\n      /////\n      if (this.isLoggedIn) {\n        this.audioVariables.forEach(\n          function(value, key) {\n            this.status =\n              \"Uploading \" + value.fileName + \"... please be patient :)\";\n            console.log(\"Uploaded:\" + value.uploaded);\n\n            if (value.uploaded == false) {\n              var currAudRef = this.storyRef.child(\n                key.replace(\"@\", \"\") + \"=\" + value.fileName\n              );\n              var file = value.file;\n              this.totalFileSize += file.size / 1024 / 1024;\n              if (this.totalFileSize > this.maxStorageSize) {\n                this.totalFileSize -= file.size / 1024 / 1024;\n                this.status =\n                  \"Sorry! It looks like you've run out of storage space. Try uploading smaller files!\";\n                //this.handles.storyEditor.deleteAudioVariable(key);\n                this.removeAudioVariable({\n                  name: key,\n                  fileName: value.fileName,\n                  file: value.file\n                });\n              } else {\n                currAudRef.put(file).then(\n                  function() {\n                    this.status =\n                      \"Upload for \" +\n                      value.fileName +\n                      \" successful... thanks for waiting!\";\n\n                    if (value.path.i.includes(\"blob\")) {\n                      URL.revokeObjectURL(value.path.i);\n                    }\n\n                    var obj = {\n                      file: value.file,\n                      fileName: value.fileName,\n                      path: currAudRef.getDownloadURL(),\n                      color: value.color,\n                      id: value.id,\n                      uploaded: true\n                    };\n                    this.handles.storyEditor.setAudioVariable(key, obj);\n                    console.log(this.audioVariables);\n                    console.log(this.totalFileSize);\n\n                    this.renderHints.renderKey++;\n                    this.renderHints.mediaRenderKey++;\n                    this.checkRenderHints();\n                  }.bind(this)\n                );\n              }\n            }\n          }.bind(this)\n        );\n      }\n      /////\n    },\n\n    removeImageVariable: function(event) {\n      this.handles.storyEditor.deleteImageVariable(event);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.mediaRenderKey++;\n      this.checkRenderHints();\n\n      /////\n      if (this.isLoggedIn) {\n        var removeRef = this.storyRef.child(\n          event.name.replace(\"@\", \"\") + \"=\" + event.fileName\n        );\n        removeRef.delete().then(function() {\n          console.log(\"DELETED\");\n        });\n        this.writeToStorage();\n        this.totalFileSize -= event.file.size / 1024 / 1024;\n      }\n      /////\n    },\n\n    removeAudioVariable: function(event) {\n      this.handles.storyEditor.deleteAudioVariable(event);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.mediaRenderKey++;\n      this.checkRenderHints();\n\n      /////\n      if (this.isLoggedIn) {\n        var removeRef = this.storyRef.child(\n          event.name.replace(\"@\", \"\") + \"=\" + event.fileName\n        );\n        removeRef.delete().then(function() {\n          console.log(\"DELETED\");\n        });\n        this.writeToStorage();\n        this.totalFileSize -= event.file.size / 1024 / 1024;\n      }\n      /////\n    },\n\n    addImageToPage(event) {\n      var data = {\n        name: event.name,\n        pageName: this.storyPages[this.currentPage - 1].pageName\n      };\n      this.handles.storyEditor.addImageToPage(data);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.checkRenderHints();\n    },\n\n    addAudioToPage(event) {\n      var data = {\n        name: event.name,\n        pageName: this.storyPages[this.currentPage - 1].pageName\n      };\n      this.handles.storyEditor.addAudioToPage(data);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.checkRenderHints();\n    },\n\n    removeImageFromPage(event) {\n      var data = {\n        name: event.name,\n        pageName: this.storyPages[this.currentPage - 1].pageName\n      };\n      this.handles.storyEditor.removeImageFromPage(data);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.checkRenderHints();\n    },\n\n    removeAudioFromPage(event) {\n      var data = {\n        name: event.name,\n        pageName: this.storyPages[this.currentPage - 1].pageName\n      };\n      this.handles.storyEditor.removeAudioFromPage(data);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.checkRenderHints();\n    },\n\n    nextPage: function(event) {\n      this.pagesVisited.push(this.currentPage);\n\n      if (event.location < this.storyPages.length) {\n        this.currentPage = event.location + 1;\n      }\n      this.renderHints.renderKey++;\n      this.renderHints.themesRenderKey++;\n      this.checkRenderHints();\n    },\n\n    goToStart: function() {\n      this.pagesVisited = [];\n\n      for (var i = 0; this.storyPages.length; i++) {\n        if (this.storyPages[i].linkPassage.tags.includes(\"start\")) {\n          this.currentPage = i + 1;\n          break;\n        }\n      }\n\n      this.renderHints.renderKey++;\n      this.renderHints.themesRenderKey++;\n      this.checkRenderHints();\n    },\n\n    setStartPage: function(event) {\n      this.handles.storyEditor.setStartPage(event);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.themesRenderKey++;\n      this.checkRenderHints();\n    },\n\n    prevPage: function() {\n      if (this.pagesVisited.length > 0) {\n        this.currentPage = this.pagesVisited[this.pagesVisited.length - 1];\n        this.pagesVisited.pop();\n      } else {\n        return false;\n      }\n\n      this.renderHints.renderKey++;\n      this.renderHints.themesRenderKey++;\n      this.checkRenderHints();\n\n      return true;\n    },\n\n    addPage: function(event) {\n      this.storyPages[this.currentPage - 1].linkPassage.text +=\n        \"\\n[[\" + event.name + \"]]\";\n      var variablesPassage = this.storyPages[\n        this.currentPage - 1\n      ].linkPassage.tags.includes(\"variables\");\n      this.updatePassage({\n        name: this.storyPages[this.currentPage - 1].linkPassage.name,\n        text: this.storyPages[this.currentPage - 1].linkPassage.text,\n        isVariables: variablesPassage\n      });\n\n      this.handles.storyEditor.addPage({\n        name: event.name,\n        prevLink: this.storyPages[this.currentPage - 1].linkPassage.name\n      });\n\n      this.writeToStorage();\n\n      this.goToPage(event);\n    },\n\n    goToPage: function(event) {\n      for (var i = 0; this.storyPages.length; i++) {\n        if (this.storyPages[i].linkPassage.name == event.name) {\n          this.currentPage = i + 1;\n          break;\n        }\n      }\n\n      this.renderHints.renderKey++;\n      this.checkRenderHints();\n    },\n\n    showThemes: function() {\n      this.themeView = true;\n\n      this.regenerateStoryText({ disp: this.renderHints.hidden });\n\n      this.renderHints.renderKey++;\n      this.renderHints.themesRenderKey++;\n      this.checkRenderHints();\n    },\n\n    hideThemes: function() {\n      this.themeView = false;\n\n      this.regenerateStoryText({ disp: this.renderHints.hidden });\n\n      this.renderHints.renderKey++;\n      this.renderHints.themesRenderKey++;\n      this.checkRenderHints();\n    },\n\n    setTheme: function(event) {\n      this.storyPages[this.currentPage - 1].theme =\n        \"color:\" + event.textColor + \";background-color:\" + event.bgColor;\n      this.renderHints.renderKey++;\n      this.renderHints.themesRenderKey++;\n      this.checkRenderHints();\n    },\n\n    setThemeAll: function(event) {\n      for (var i = 0; i < this.storyPages.length; i++) {\n        this.storyPages[i].theme =\n          \"color:\" + event.textColor + \";background-color:\" + event.bgColor;\n      }\n\n      this.renderHints.renderKey++;\n      this.renderHints.themesRenderKey++;\n      this.checkRenderHints();\n    },\n\n    setVariable: function(event) {\n      this.handles.storyEditor.setTextVariable(event.name, event.value);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.checkRenderHints();\n    },\n\n    setVariableName: function(event) {\n      this.handles.storyEditor.changeTextVariableName(event);\n\n      this.writeToStorage();\n      this.renderHints.variableRenderKey++;\n      this.renderHints.renderKey++;\n      this.checkRenderHints();\n    },\n\n    deleteVariable: function(event) {\n      this.handles.storyEditor.deleteTextVariable(event);\n\n      this.writeToStorage();\n      this.renderHints.variableRenderKey++;\n      this.renderHints.renderKey++;\n      this.checkRenderHints();\n    },\n\n    regenerateStoryText: function(event) {\n      this.renderHints.hidden = event.disp;\n\n      this.handles.storyEditor.generateStoryText(\n        this.renderHints.hidden,\n        this.renderHints.inVariableEditor,\n        this.renderHints.inMediaEditor\n      );\n      this.storyVariables = this.handles.storyEditor.variables;\n      this.imageVariables = this.handles.storyEditor.imageVariables;\n      this.audioVariables = this.handles.storyEditor.audioVariables;\n      this.storyPages = this.handles.storyEditor.exportedStoryPages;\n      this.storyName = this.handles.storyEditor.baseStory.name;\n\n      this.renderHints.renderKey++;\n      this.checkRenderHints();\n    },\n\n    addNewVariable: function(event) {\n      this.handles.storyEditor.addTextVariable(event);\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.variableRenderKey++;\n      this.checkRenderHints();\n    },\n\n    addLink: function(event) {\n      this.handles.storyEditor.addLink({\n        pageName: this.storyPages[this.currentPage - 1].pageName,\n        name: event.name\n      });\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.passageRenderKey++;\n      this.checkRenderHints();\n    },\n\n    removeLink: function(event) {\n      this.handles.storyEditor.removeLink(event);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.checkRenderHints();\n    },\n\n    updatePassage: function(event) {\n      this.handles.storyEditor.setPassage(event.name, event.text);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.passageRenderKey++;\n\n      if (event.isVariables) {\n        this.renderHints.variableRenderKey++;\n      }\n\n      this.checkRenderHints();\n    },\n\n    updatePassageName: function(event) {\n      this.handles.storyEditor.changePassageName(event);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.renderHints.passageRenderKey++;\n      this.checkRenderHints();\n    },\n\n    deletePassage: function(event) {\n      this.handles.storyEditor.deletePassage(event);\n\n      this.writeToStorage();\n\n      this.renderHints.passageRenderKey++;\n\n      if (!this.prevPage()) {\n        this.goToStart();\n      }\n    },\n\n    changeStoryName(event) {\n      this.handles.storyEditor.changeStoryName(event);\n\n      this.writeToStorage();\n\n      this.renderHints.renderKey++;\n      this.checkRenderHints();\n    },\n\n    downloadStoryTwee: function() {\n      var storyView = this.handles.storyEditor.generateSaveStory();\n      this.handles.fileConverter.story = storyView;\n\n      var tweeBlob = this.handles.fileConverter.twee();\n\n      var dlblob = new Blob([tweeBlob], { type: \"text/plain\" });\n\n      const link = document.createElement(\"a\");\n      link.href = URL.createObjectURL(dlblob);\n      link.target = \"_blank\";\n      link.setAttribute(\n        \"download\",\n        this.handles.storyEditor.baseStory.name + \".twee\"\n      );\n      link.click();\n      URL.revokeObjectURL(link.href);\n      //this.handles.storyEditor.removeVariableInject();\n    },\n\n    saveStoryToProfile() {\n      var cloudStory = this.handles.storyEditor.generateSaveStory();\n      this.handles.fileConverter.story = cloudStory;\n      var tweeBlob = this.handles.fileConverter.twee();\n\n      var d = new Date();\n      var draftObj = {\n        text: tweeBlob,\n        dateUpdated:\n          d.getMonth() + 1 + \"/\" + d.getDate() + \"/\" + d.getFullYear(),\n        OGstory: sessionStorage.getItem(\"OGstoryPassages\")\n      };\n      if (\n        db.ref(\n          \"accounts/\" +\n            firebase.auth().currentUser.uid +\n            \"/drafts/\" +\n            this.handles.storyEditor.baseStory.name\n        )\n      ) {\n        db.ref(\n          \"accounts/\" +\n            firebase.auth().currentUser.uid +\n            \"/drafts/\" +\n            this.handles.storyEditor.baseStory.name\n        ).update(draftObj);\n      } else {\n        db.ref(\n          \"accounts/\" +\n            firebase.auth().currentUser.uid +\n            \"/drafts/\" +\n            this.handles.storyEditor.baseStory.name\n        ).push(draftObj);\n      }\n      alert(\"Your story was saved successfully!\");\n    },\n\n    getExportFile() {\n      var cloudStory = this.handles.storyEditor.generatePublishStory();\n      this.handles.fileConverter.story = cloudStory;\n      var tweeBlob = this.handles.fileConverter.twee();\n      this.$store.commit(\"updateStoryPublish\", tweeBlob);\n    },\n\n    downloadStory: function() {\n      var storyView = this.handles.storyEditor.generateViewStory(true);\n      this.handles.fileConverter.story = storyView;\n      var htmlBlob = this.handles.fileConverter.html(\n        this.handles.storyEditor.css,\n        \"\"\n      );\n\n      storyView = this.handles.storyEditor.generateSaveStory();\n      this.handles.fileConverter.story = storyView;\n      var tweeBlob = this.handles.fileConverter.twee();\n\n      var zip = new JSZip();\n      zip.file(this.storyName + \".html\", htmlBlob);\n      zip.file(this.storyName + \".twee\", tweeBlob);\n      zip.file(\n        \"readMe.txt\",\n        \"To view the story, double click on the html file.\\nIf the user wants to re-edit the story, they must upload the .twee file to our website.\\nCreate an account to save stories, download stories and more!\"\n      );\n\n      var name = this.storyName;\n\n      zip.generateAsync({ type: \"blob\" }).then(function(content) {\n        // see FileSaver.js\n        FileSaver.saveAs(content, name + \".zip\");\n      });\n      //this.handles.fileConverter.html(event.css, event.js);\n    },\n\n    viewStoryHTML: function() {\n      var storyView = this.handles.storyEditor.generateViewStory(true);\n      this.handles.fileConverter.story = storyView;\n\n      //this.handles.fileConverter.html(event.css, event.js);\n\n      var htmlBlob = this.handles.fileConverter.html(\n        this.handles.storyEditor.css,\n        \"\"\n      );\n\n      const link = document.createElement(\"a\");\n      link.href = URL.createObjectURL(\n        new Blob([htmlBlob], { type: \"text/html\" })\n      );\n      link.target = \"_blank\";\n      //link.setAttribute('download',  this.handles.storyEditor.baseStory.name + '.html');\n      link.click();\n      URL.revokeObjectURL(link.href);\n      //this.handles.storyEditor.removeVariableInject();\n    },\n\n    /*viewHTMLBlob: function(htmlContents){\n            const link = document.createElement('a');\n            link.href = URL.createObjectURL(new Blob([htmlContents], {type: \"text/html\"}));\n            link.target = \"_blank\"\n            //link.setAttribute('download',  this.handles.storyEditor.baseStory.name + '.html');\n            link.click();\n            URL.revokeObjectURL(link.href);\n        },*/\n\n    publishStoryType: function() {\n      var templateChanged = this.checkUniqueStory();\n      if (\n        sessionStorage.getItem(\"createTemplate\") === \"yes\" &&\n        templateChanged === true\n      ) {\n        this.checkUniqueTemplate();\n      }\n    },\n\n    checkUniqueTemplate: function() {\n      let canSubmit = true;\n      const Typesense = require(\"typesense\");\n      const typesense = new Typesense.Client({\n        nodes: [\n          {\n            //host: 'localhost',\n            // host: \"vcm-15431.vm.duke.edu\",\n            // port: \"8108\",\n            // protocol: \"https\"\n            host: \"av2xrki6y54hl3wbp-1.a1.typesense.net\",\n            port: \"443\",\n            protocol: \"https\"\n          }\n        ],\n\n        // apiKey: \"YOYCpFLj9u412ihigstCer5Zs2StzptR\"\n        apiKey: \"I1RDnpfBxdpllDchtj7gslzsqwpmnvmi\"\n      });\n\n      typesense\n        .collections(\"stories\")\n        .retrieve()\n        .then(data => {\n          var numDocs = data.num_documents;\n          for (let i = 0; i < numDocs - 1; i++) {\n            typesense\n              .collections(\"stories\")\n              .documents(i.toString())\n              .retrieve()\n              .then(data => {\n                let aFileConverter = new FileConverter(data.text, false);\n                let aStoryEditor = new StoryEditor(aFileConverter.story);\n                var s1 = \"\";\n                var s2 = \"\";\n                for (\n                  let i = 0;\n                  i < aStoryEditor.exportedStoryPages.length;\n                  i++\n                ) {\n                  s1 += aStoryEditor.exportedStoryPages[i].linkPassage.text;\n                }\n                for (let i = 0; i < this.storyPages.length; i++) {\n                  s2 += this.storyPages[i].linkPassage.text;\n                }\n                if (\n                  aStoryEditor.exportedStoryPages.length <\n                  this.storyPages.length\n                ) {\n                  for (\n                    let i = aStoryEditor.exportedStoryPages.length;\n                    i < this.storyPages.length;\n                    i++\n                  ) {\n                    var indexOpenBrackets = this.storyPages[\n                      i\n                    ].linkPassage.text.indexOf(\"[[\");\n                    var indexCloseBrackets = this.storyPages[\n                      i\n                    ].linkPassage.text.indexOf(\"]]\");\n                    var cleanStr = this.storyPages[i].linkPassage.text;\n                    if (indexOpenBrackets != -1) {\n                      var bracketStr = this.storyPages[\n                        i\n                      ].linkPassage.text.substring(\n                        indexOpenBrackets,\n                        indexCloseBrackets + 2\n                      );\n                      cleanStr = this.storyPages[i].linkPassage.text.replace(\n                        bracketStr,\n                        \"\"\n                      );\n                    }\n                    if (\n                      this.storyPages[i].linkPassage.text.includes(\n                        \"This is a new passage. Edit it to create your own story!\"\n                      ) ||\n                      cleanStr.replace(/\\s/g, \"\") === \"\"\n                    ) {\n                      alert(\"Please edit content in new passages.\");\n                      return;\n                    }\n                    s2 += cleanStr;\n                  }\n                }\n                var similarityScore = this.similarity(s1, s2);\n                //console.log(similarityScore);\n                if (similarityScore > 0.75) {\n                  canSubmit = false;\n                  alert(\n                    \"Story template is too similar to existing template. Please submit a unique story template.\"\n                  );\n                  return;\n                }\n                if (\n                  similarityScore <= 0.75 &&\n                  i === numDocs - 2 &&\n                  canSubmit === true\n                ) {\n                  alert(\n                    \"Story template is unique and is ready to be published!\"\n                  );\n                  return;\n                }\n              });\n          }\n        });\n    },\n\n    // Add support for drafts\n    checkUniqueStory: function() {\n      var s1 = \"\";\n      var s2 = \"\";\n      for (\n        let i = 0;\n        i < JSON.parse(sessionStorage.getItem(\"OGstoryPassages\")).length;\n        i++\n      ) {\n        s1 += JSON.parse(sessionStorage.getItem(\"OGstoryPassages\"))[i]\n          .linkPassage.text;\n      }\n      for (let i = 0; i < this.storyPages.length; i++) {\n        s2 += this.storyPages[i].linkPassage.text;\n      }\n      if (\n        JSON.parse(sessionStorage.getItem(\"OGstoryPassages\")).length <\n        this.storyPages.length\n      ) {\n        for (\n          let i = JSON.parse(sessionStorage.getItem(\"OGstoryPassages\")).length;\n          i < this.storyPages.length;\n          i++\n        ) {\n          var indexOpenBrackets = this.storyPages[i].linkPassage.text.indexOf(\n            \"[[\"\n          );\n          var indexCloseBrackets = this.storyPages[i].linkPassage.text.indexOf(\n            \"]]\"\n          );\n          var cleanStr = this.storyPages[i].linkPassage.text;\n          if (indexOpenBrackets != -1) {\n            var bracketStr = this.storyPages[i].linkPassage.text.substring(\n              indexOpenBrackets,\n              indexCloseBrackets + 2\n            );\n            cleanStr = this.storyPages[i].linkPassage.text.replace(\n              bracketStr,\n              \"\"\n            );\n          }\n          if (\n            this.storyPages[i].linkPassage.text.includes(\n              \"This is a new passage. Edit it to create your own story!\"\n            ) ||\n            cleanStr.replace(/\\s/g, \"\") === \"\"\n          ) {\n            alert(\"Please edit content in new passages.\");\n            return false;\n          }\n          s2 += cleanStr;\n        }\n      }\n      var similarityScore = this.similarity(s1, s2);\n      console.log(similarityScore);\n      if (similarityScore > 0.75) {\n        alert(\n          \"Story is too similar to the original. Please submit a unique story.\"\n        );\n        return false;\n      }\n      if (sessionStorage.getItem(\"createTemplate\") != \"yes\") {\n        alert(\"Story is unique and is ready to be published!\");\n      } else {\n        return true;\n      }\n    },\n\n    // Uses Levenshtein distance algorithm\n    similarity: function(s1, s2) {\n      var longer = s1.toLowerCase().replace(/\\s/g, \"\");\n      var shorter = s2.toLowerCase().replace(/\\s/g, \"\");\n      if (s1.length < s2.length) {\n        longer = s2;\n        shorter = s1;\n      }\n      var longerLength = longer.length;\n      if (longerLength == 0) {\n        return 1.0;\n      }\n      return (\n        (longerLength - this.editDistance(longer, shorter)) /\n        parseFloat(longerLength)\n      );\n    },\n\n    editDistance: function(s1, s2) {\n      var costs = new Array();\n      for (var i = 0; i <= s1.length; i++) {\n        var lastValue = i;\n        for (var j = 0; j <= s2.length; j++) {\n          if (i == 0) {\n            costs[j] = j;\n          } else {\n            if (j > 0) {\n              var newValue = costs[j - 1];\n              if (s1.charAt(i - 1) != s2.charAt(j - 1)) {\n                newValue =\n                  Math.min(Math.min(newValue, lastValue), costs[j]) + 1;\n              }\n              costs[j - 1] = lastValue;\n              lastValue = newValue;\n            }\n          }\n        }\n        if (i > 0) {\n          costs[s2.length] = lastValue;\n        }\n      }\n      return costs[s2.length];\n    },\n\n    writeToStorage: function() {\n      var storyView = this.handles.storyEditor.generateSaveStory();\n      this.handles.fileConverter.story = storyView;\n\n      var tweeBlob = this.handles.fileConverter.twee();\n      sessionStorage.setItem(\"storyContent\", tweeBlob);\n      sessionStorage.setItem(\"storyLocation\", \"\");\n\n      //this.handles.storyEditor.removeVariableInject();\n\n      this.handles.storyEditor.generateStoryText(\n        this.renderHints.hidden,\n        this.renderHints.inVariableEditor,\n        this.renderHints.inMediaEditor\n      );\n      this.storyVariables = this.handles.storyEditor.variables;\n      this.imageVariables = this.handles.storyEditor.imageVariables;\n      this.audioVariables = this.handles.storyEditor.audioVariables;\n      this.storyPages = this.handles.storyEditor.exportedStoryPages;\n      this.storyName = this.handles.storyEditor.baseStory.name;\n    },\n\n    checkRenderHints: function() {\n      if (this.renderHints.renderKey > 10) {\n        this.renderHints.renderKey = 1;\n      }\n\n      if (this.renderHints.variableRenderKey > 10) {\n        this.renderHints.variableRenderKey = 1;\n      }\n\n      if (this.renderHints.themesRenderKey > 10) {\n        this.renderHints.themesRenderKey = 1;\n      }\n\n      if (this.renderHints.passageRenderKey > 10) {\n        this.renderHints.passageRenderKey = 1;\n      }\n\n      if (this.renderHints.gsoRenderKey > 10) {\n        this.renderHints.gsoRenderKey = 1;\n      }\n\n      if (this.renderHints.mediaRenderKey > 10) {\n        this.renderHints.mediaRenderKey = 1;\n      }\n    },\n\n    hideTools: function() {\n      if (this.toolButton == \"mdi-minus\") {\n        this.toolsWidth = \"10%\";\n        this.pageWidth = \"90%\";\n        this.hideItem = true;\n        this.toolButton = \"mdi-plus\";\n      } else {\n        this.toolsWidth = \"30%\";\n        this.pageWidth = \"70%\";\n        this.hideItem = false;\n        this.toolButton = \"mdi-minus\";\n      }\n    },\n\n    goFullScreen: function() {\n      /*\n            var storyPage = document.getElementById(\"storyPage\");\n            if (!document.fullscreen) {\n                storyPage.requestFullscreen();\n                this.fullButton = \"Exit\";\n            }\n            else {\n                document.exitFullscreen();\n                this.fullButton = \"Full Screen\";\n\n            }\n            */\n      if (!this.inFullMode) {\n        this.$emit(\"evtGoFull\");\n        this.inFullMode = true;\n        this.fullButton = \"mdi-fullscreen-exit\";\n        this.contentHeight = \"100vh\";\n      } else {\n        this.$emit(\"evtExitFull\");\n        this.inFullMode = false;\n        this.fullButton = \"mdi-fullscreen\";\n        this.contentHeight = \"74vh\";\n      }\n    },\n\n    setMinHeight: function(event) {\n      this.minHeight = event;\n    }\n  },\n\n  beforeDestroy: function() {\n    console.log(\"Destroyed\");\n    this.handles.storyEditor.destroy();\n  },\n\n  mixins: [storyMixin, tweeConverter]\n};\n</script>\n\n<style scoped>\n@keyframes border_anim {\n  from {\n    border: solid gray;\n  }\n  to {\n    border: solid black;\n  }\n}\n\n.header {\n  text-align: center;\n}\n\n.uploads {\n  text-align: left;\n}\n\n/*\n    .editor{\n        margin-left: 50px;\n        margin-right: 50px;\n    }\n    */\n\n#storyPage,\n#toolBar {\n  overflow: auto;\n}\n\n#page_layout {\n  padding-top: 58px;\n  overflow: auto;\n}\n\n.column {\n  text-align: center;\n  float: left;\n  padding: 5px;\n}\n\n#download_btn {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n}\n\n#downloadTButton {\n  grid-area: downloadT;\n  font-size: 20px;\n  width: 20%;\n}\n\n#downloadHButton {\n  grid-area: downloadH;\n  font-size: 20px;\n  width: 20%;\n}\n\n#viewHButton {\n  grid-area: viewH;\n  font-size: 20px;\n  width: 20%;\n}\n\n.layoutButton {\n  font-size: 50px;\n}\n\n.layoutButton:hover {\n  animation: border_anim;\n  animation-fill-mode: forwards;\n  animation-duration: 500ms;\n}\n</style>\n\n<style>\n* {\n  scrollbar-width: 20px;\n  scrollbar-color: lightgray transparent;\n}\n\n/* Works on Chrome/Edge/Safari */\n*::-webkit-scrollbar {\n  height: 5px;\n  width: 5px;\n}\n*::-webkit-scrollbar-track {\n  background: transparent;\n}\n*::-webkit-scrollbar-thumb {\n  background-color: lightgray;\n  border-radius: 20px;\n}\n\n*::-webkit-scrollbar-thumb:hover {\n  background-color: rgb(200, 200, 200);\n  border-radius: 20px;\n}\n</style>\n"],"sourceRoot":"src/components/editor"}]}