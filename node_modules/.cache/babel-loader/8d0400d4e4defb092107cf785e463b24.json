{"remainingRequest":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/components/comments/addComments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/components/comments/addComments.vue","mtime":1604692362836},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBzdG9yeU1peGluIGZyb20gIkAvbWl4aW5zL3N0b3J5TWl4aW4iOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnOwppbXBvcnQgZmlyZWJhc2VNaXhpbiBmcm9tICJAL21peGlucy9maXJlYmFzZU1peGluIjsKaW1wb3J0IHsgZGIgfSBmcm9tICJAL2ZpcmViYXNlQ29uZmlnIjsKdmFyIGQgPSBuZXcgRGF0ZSgpOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsnZ2l2ZW5TdG9yeVRpdGxlJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5ld0NvbW1lbnQ6IHsKICAgICAgICAic3RvcnlUaXRsZSI6ICcnLAogICAgICAgICJuYW1lIjogJycsCiAgICAgICAgImVtYWlsIjogJycsCiAgICAgICAgImNvbW1lbnQiOiAnJywKICAgICAgICAiZGF0ZU5vdyI6IERhdGUubm93KCksCiAgICAgICAgImRhdGVBZGRlZCI6IGQuZ2V0TW9udGgoKSArIDEgKyAnLycgKyBkLmdldERhdGUoKSArICcvJyArIGQuZ2V0RnVsbFllYXIoKSwKICAgICAgICAiaGVscGZ1bFRhZ3MiOiBbXSwKICAgICAgICAiY29tbWVudEtleSI6ICcnCiAgICAgIH0sCiAgICAgIGlzU3VibWl0dGVkOiBmYWxzZSwKICAgICAgbmFtZUFycmF5OiBbXSwKICAgICAgY29tbWVudENoZWNrZXI6IGZhbHNlLAogICAgICB0YWdzSW5TdG9yeTogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY29tbWVudENvbXBsZXRlOiBmdW5jdGlvbiBjb21tZW50Q29tcGxldGUoKSB7CiAgICAgIHJldHVybiB0aGlzLm5ld0NvbW1lbnQuY29tbWVudCAmJiB0aGlzLm5ld0NvbW1lbnQuc3RvcnlUaXRsZTsKICAgIH0sCiAgICB0YWdzQ29tcGxldGU6IGZ1bmN0aW9uIHRhZ3NDb21wbGV0ZSgpIHsKICAgICAgaWYgKHRoaXMubmV3Q29tbWVudC5oZWxwZnVsVGFncy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFRhZ3M6IGZ1bmN0aW9uIGdldFRhZ3MoKSB7CiAgICAgIHRoaXMudGFnc0luU3RvcnkgPSB0aGlzLnJldHJpZXZlU3RvcnlUYWdzKHRoaXMubmV3Q29tbWVudC5zdG9yeVRpdGxlKTsKICAgICAgdGhpcy5jb21tZW50Q2hlY2tlciA9IHRydWU7CiAgICB9LAogICAgcG9zdDogZnVuY3Rpb24gcG9zdCgpIHsKICAgICAgdmFyIG5ld0tleSA9IGRiLnJlZigpLnB1c2goKS5rZXk7CiAgICAgIHRoaXMubmV3Q29tbWVudC5jb21tZW50S2V5ID0gbmV3S2V5OwogICAgICBkYi5yZWYoJ2FjY291bnRzLycgKyBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkICsgJy9jb21tZW50cy8nICsgbmV3S2V5KS51cGRhdGUodGhpcy5uZXdDb21tZW50KTsKICAgICAgZGIucmVmKCdjb21tZW50cy8nICsgbmV3S2V5KS51cGRhdGUodGhpcy5uZXdDb21tZW50KTsKICAgICAgdGhpcy5pc1N1Ym1pdHRlZCA9IHRydWU7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5uZXdDb21tZW50LnN0b3J5VGl0bGUgPSB0aGlzLmdpdmVuU3RvcnlUaXRsZTsKCiAgICBpZiAoZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyKSB7CiAgICAgIHRoaXMubmV3Q29tbWVudC5uYW1lID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lOwogICAgICB0aGlzLm5ld0NvbW1lbnQuZW1haWwgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIuZW1haWw7CiAgICB9CiAgfSwKICBtaXhpbnM6IFtzdG9yeU1peGluLCBmaXJlYmFzZU1peGluXQp9Ow=="},{"version":3,"sources":["addComments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,OAAA,UAAA,MAAA,qBAAA;AACA,OAAA,QAAA,MAAA,UAAA;AACA,OAAA,aAAA,MAAA,wBAAA;AACA,SAAA,EAAA,QAAA,kBAAA;AAEA,IAAA,CAAA,GAAA,IAAA,IAAA,EAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA,CAAA,iBAAA,CADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,UAAA,EAAA;AACA,sBAAA,EADA;AAEA,gBAAA,EAFA;AAGA,iBAAA,EAHA;AAIA,mBAAA,EAJA;AAKA,mBAAA,IAAA,CAAA,GAAA,EALA;AAMA,qBAAA,CAAA,CAAA,QAAA,KAAA,CAAA,GAAA,GAAA,GAAA,CAAA,CAAA,OAAA,EAAA,GAAA,GAAA,GAAA,CAAA,CAAA,WAAA,EANA;AAOA,uBAAA,EAPA;AAQA,sBAAA;AARA,OADA;AAWA,MAAA,WAAA,EAAA,KAXA;AAYA,MAAA,SAAA,EAAA,EAZA;AAaA,MAAA,cAAA,EAAA,KAbA;AAcA,MAAA,WAAA,EAAA;AAdA,KAAA;AAgBA,GAnBA;AAoBA,EAAA,QAAA,EAAA;AACA,IAAA,eADA,6BACA;AACA,aAAA,KAAA,UAAA,CAAA,OAAA,IAAA,KAAA,UAAA,CAAA,UAAA;AACA,KAHA;AAIA,IAAA,YAJA,0BAIA;AACA,UAAA,KAAA,UAAA,CAAA,WAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,eAAA,IAAA;AACA;;AACA,aAAA,KAAA;AACA;AATA,GApBA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,WAAA,WAAA,GAAA,KAAA,iBAAA,CAAA,KAAA,UAAA,CAAA,UAAA,CAAA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,KAJA;AAKA,IAAA,IALA,kBAKA;AACA,UAAA,MAAA,GAAA,EAAA,CAAA,GAAA,GAAA,IAAA,GAAA,GAAA;AACA,WAAA,UAAA,CAAA,UAAA,GAAA,MAAA;AACA,MAAA,EAAA,CAAA,GAAA,CAAA,cAAA,QAAA,CAAA,IAAA,GAAA,WAAA,CAAA,GAAA,GAAA,YAAA,GAAA,MAAA,EAAA,MAAA,CAAA,KAAA,UAAA;AACA,MAAA,EAAA,CAAA,GAAA,CAAA,cAAA,MAAA,EAAA,MAAA,CAAA,KAAA,UAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA;AAXA,GA/BA;AA4CA,EAAA,OA5CA,qBA4CA;AACA,SAAA,UAAA,CAAA,UAAA,GAAA,KAAA,eAAA;;AACA,QAAA,QAAA,CAAA,IAAA,GAAA,WAAA,EAAA;AACA,WAAA,UAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,GAAA,WAAA,CAAA,WAAA;AACA,WAAA,UAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA,GAAA,WAAA,CAAA,KAAA;AACA;AACA,GAlDA;AAmDA,EAAA,MAAA,EAAA,CAAA,UAAA,EAAA,aAAA;AAnDA,CAAA","sourcesContent":["<template>\n  <div>\n    <form>\n      <v-text-field\n        v-model=\"newComment.comment\"\n        v-if=\"!commentChecker\"\n        :disabled=\"isSubmitted\"\n        label=\"Add a comment...\"\n        required\n      />\n      <button class=\"button\" :disabled=\"!commentComplete\" v-if=\"!commentChecker\" v-on:click=\"getTags()\">Next</button>\n    </form>\n    <div id=\"second-form\">\n      <form>\n      <v-select\n        v-model=\"newComment.helpfulTags\"\n        v-if=\"commentChecker\"\n        :items=\"tagsInStory\"\n        :disabled=\"isSubmitted\"\n        :multiple=\"true\"\n        label=\"Tags that you found were well-represented in this story\"\n        required\n      />\n      <button class=\"button\" :disabled=\"!tagsComplete\" v-if=\"commentChecker && !isSubmitted\" v-on:click=\"post()\">Comment</button>\n      <p v-if=\"isSubmitted\">Thank you for commenting!</p>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport storyMixin from \"@/mixins/storyMixin\"\nimport firebase from 'firebase'\nimport firebaseMixin from \"@/mixins/firebaseMixin\"\nimport { db } from \"@/firebaseConfig\"\n\nvar d = new Date();\n\nexport default {\n  props: ['givenStoryTitle'],\n  data (){\n    return{\n      newComment: {\n        \"storyTitle\": '',\n        \"name\": '',\n        \"email\": '',\n        \"comment\": '',\n        \"dateNow\": Date.now(),\n        \"dateAdded\": d.getMonth()+1+'/'+d.getDate()+'/'+d.getFullYear(), \n        \"helpfulTags\": [],\n        \"commentKey\":'',\n      },\n      isSubmitted: false,\n      nameArray:[],\n      commentChecker: false,\n      tagsInStory: [],\n    }\n  },\n  computed: {\n    commentComplete () {\n      return this.newComment.comment && this.newComment.storyTitle\n    },\n    tagsComplete(){\n      if(this.newComment.helpfulTags.length > 0){\n        return true\n      }\n      return false\n    }\n  },\n  methods: {\n    getTags(){\n      this.tagsInStory = this.retrieveStoryTags(this.newComment.storyTitle)\n      this.commentChecker = true;\n    },\n    post(){\n      var newKey = db.ref().push().key;\n      this.newComment.commentKey = newKey\n      db.ref('accounts/'+firebase.auth().currentUser.uid + '/comments/' + newKey).update(this.newComment);\n      db.ref('comments/' + newKey).update(this.newComment)\n      this.isSubmitted = true;\n    },\n  },\n  created() {\n    this.newComment.storyTitle = this.givenStoryTitle;\n    if(firebase.auth().currentUser){\n      this.newComment.name = firebase.auth().currentUser.displayName\n      this.newComment.email = firebase.auth().currentUser.email\n    }\n  },\n  mixins: [storyMixin, firebaseMixin],\n}\n</script>\n\n<style scoped>\n</style>\n"],"sourceRoot":"src/components/comments"}]}