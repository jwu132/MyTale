{"remainingRequest":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/eslint-loader/index.js??ref--13-0!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/mixins/storyMixin.js","dependencies":[{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/mixins/storyMixin.js","mtime":1604699314537},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2p1c3Rpbnd1L0Rlc2t0b3AvR2l0bGFiX015VGFsZS9teXRhbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBmaXJlc3RvcmVkYiB9IGZyb20gJy4uL2ZpcmViYXNlQ29uZmlnJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBUeXBlc2Vuc2U6IHJlcXVpcmUoJ3R5cGVzZW5zZScpLAogICAgICBjbGllbnQ6ICcnLAogICAgICBzdG9yaWVzOiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZUNsaWVudDogZnVuY3Rpb24gY3JlYXRlQ2xpZW50KCkgewogICAgICB0aGlzLmNsaWVudCA9IG5ldyB0aGlzLlR5cGVzZW5zZS5DbGllbnQoewogICAgICAgICdub2Rlcyc6IFt7CiAgICAgICAgICAvLydob3N0JzogJ2xvY2FsaG9zdCcsCiAgICAgICAgICAvLyAnaG9zdCc6ICd2Y20tMTU0MzEudm0uZHVrZS5lZHUnLAogICAgICAgICAgLy8gJ3BvcnQnOiAnODEwOCcsCiAgICAgICAgICAvLyAncHJvdG9jb2wnOiAnaHR0cHMnLAogICAgICAgICAgJ2hvc3QnOiAnYXYyeHJraTZ5NTRobDN3YnAtMS5hMS50eXBlc2Vuc2UubmV0JywKICAgICAgICAgICdwb3J0JzogJzQ0MycsCiAgICAgICAgICAncHJvdG9jb2wnOiAnaHR0cHMnCiAgICAgICAgfV0sCiAgICAgICAgLy8gJ2FwaUtleSc6ICdZT1lDcEZMajl1NDEyaWhpZ3N0Q2VyNVpzMlN0enB0UicsCiAgICAgICAgJ2FwaUtleSc6ICJJMVJEbnBmQnhkcGxsRGNodGo3Z3NsenNxd3BtbnZtaSIKICAgICAgfSk7CiAgICB9LAogICAgYWRkU3Rvcnk6IGZ1bmN0aW9uIGFkZFN0b3J5KG5ld1N0b3J5KSB7CiAgICAgIHRoaXMuY3JlYXRlQ2xpZW50KCk7CiAgICAgIHZhciBzdG9yZUtleSA9IGZpcmVzdG9yZWRiLmNvbGxlY3Rpb24oJ3N0b3JpZXMnKS5kb2MoKS5pZDsKICAgICAgbmV3U3Rvcnkuc3RvcnlLZXkgPSBzdG9yZUtleTsKICAgICAgdGhpcy5jbGllbnQuY29sbGVjdGlvbnMoJ3N0b3JpZXMnKS5kb2N1bWVudHMoKS5jcmVhdGUobmV3U3RvcnkpOwogICAgICBmaXJlc3RvcmVkYi5jb2xsZWN0aW9uKCdzdG9yaWVzJykuZG9jKHN0b3JlS2V5KS5zZXQobmV3U3RvcnkpOwogICAgICB0aGlzLmlzU3VibWl0dGVkID0gdHJ1ZTsKICAgIH0sCiAgICByZW1vdmVTdG9yeTogZnVuY3Rpb24gcmVtb3ZlU3RvcnkoSUQsIHN0b3J5S2V5KSB7CiAgICAgIGlmIChjb25maXJtKCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgc3Rvcnk/IikpIHsKICAgICAgICB0aGlzLmNyZWF0ZUNsaWVudCgpOwogICAgICAgIHRoaXMuY2xpZW50LmNvbGxlY3Rpb25zKCdzdG9yaWVzJykuZG9jdW1lbnRzKElEKS5kZWxldGUoKTsKICAgICAgICBmaXJlc3RvcmVkYi5jb2xsZWN0aW9uKCdzdG9yaWVzJykuZG9jKHN0b3J5S2V5KS5kZWxldGUoKTsKICAgICAgICB0aGlzLmlzRGVsZXRlZCA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVWaWV3czogZnVuY3Rpb24gdXBkYXRlVmlld3MoaWQsIHRpdGxlLCBhdXRob3IsIHN5bm9wc2lzLCB0YWdzLCB2aWV3cywgZGF0ZU5vdywgZGF0ZUFkZGVkLCB0ZXh0LCBjcmVhdG9yLCBzdG9yeUtleSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdXBkYXRlZFZpZXdzU3Rvcnk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMuY3JlYXRlQ2xpZW50KCk7CgogICAgICAgICAgICAgICAgdXBkYXRlZFZpZXdzU3RvcnkgPSB7CiAgICAgICAgICAgICAgICAgIC8vVGhpcyBpcyB0aGUgc3RvcnkgdGhhdCBpcyBhZGRlZCB3aGVuIHRoZSBidXR0b24gaXMgcHJlc3NlZAogICAgICAgICAgICAgICAgICAiaWQiOiBpZCwKICAgICAgICAgICAgICAgICAgInRpdGxlIjogdGl0bGUsCiAgICAgICAgICAgICAgICAgICJhdXRob3IiOiBhdXRob3IsCiAgICAgICAgICAgICAgICAgICJzeW5vcHNpcyI6IHN5bm9wc2lzLAogICAgICAgICAgICAgICAgICAidGFncyI6IHRhZ3MsCiAgICAgICAgICAgICAgICAgICJ2aWV3cyI6IHZpZXdzICsgMSwKICAgICAgICAgICAgICAgICAgImRhdGVOb3ciOiBkYXRlTm93LAogICAgICAgICAgICAgICAgICAiZGF0ZUFkZGVkIjogZGF0ZUFkZGVkLAogICAgICAgICAgICAgICAgICAidGV4dCI6IHRleHQsCiAgICAgICAgICAgICAgICAgICJjcmVhdG9yIjogY3JlYXRvciwKICAgICAgICAgICAgICAgICAgInN0b3J5S2V5Ijogc3RvcnlLZXkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNsaWVudC5jb2xsZWN0aW9ucygnc3RvcmllcycpLmRvY3VtZW50cyhpZCkuZGVsZXRlKCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJEZWxldGluZyBleGlzdGluZyBzdG9yeS4iKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gODsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMik7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jbGllbnQuY29sbGVjdGlvbnMoJ3N0b3JpZXMnKS5kb2N1bWVudHMoKS5jcmVhdGUodXBkYXRlZFZpZXdzU3RvcnkpLnRoZW4oZnVuY3Rpb24gKHJldHVybkRhdGEpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmV0dXJuRGF0YSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE2OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dFsiY2F0Y2giXSgxMSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dC50MSk7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzIsIDhdLCBbMTEsIDE2XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRTdG9yeTogZnVuY3Rpb24gZ2V0U3RvcnkoSUQpIHsKICAgICAgdGhpcy5jcmVhdGVDbGllbnQoKTsKICAgICAgdmFyIHN0b3J5SG9sZGVyID0gW107CiAgICAgIHRoaXMuY2xpZW50LmNvbGxlY3Rpb25zKCdzdG9yaWVzJykuZG9jdW1lbnRzKElEKS5yZXRyaWV2ZSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBzdG9yeUhvbGRlci5wdXNoKGRhdGEpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHN0b3J5SG9sZGVyOwogICAgfSwKICAgIHJldHJpZXZlVGl0bGVzOiBmdW5jdGlvbiByZXRyaWV2ZVRpdGxlcygpIHsKICAgICAgdGhpcy5jcmVhdGVDbGllbnQoKTsKICAgICAgdmFyIHRpdGxlQXJyYXkgPSBbXTsKICAgICAgdGhpcy5jbGllbnQuY29sbGVjdGlvbnMoJ3N0b3JpZXMnKS5kb2N1bWVudHMoKS5leHBvcnQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHsKICAgICAgICAgIHRpdGxlQXJyYXkucHVzaChKU09OLnBhcnNlKGRhdGFba2V5XSkudGl0bGUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiB0aXRsZUFycmF5OwogICAgfSwKICAgIHJldHJpZXZlU3RvcnlUYWdzOiBmdW5jdGlvbiByZXRyaWV2ZVN0b3J5VGFncyhzdG9yeVRpdGxlKSB7CiAgICAgIHRoaXMuY3JlYXRlQ2xpZW50KCk7CiAgICAgIHZhciB0YWdBcnJheSA9IFtdOwogICAgICB0aGlzLmNsaWVudC5jb2xsZWN0aW9ucygnc3RvcmllcycpLmRvY3VtZW50cygpLmV4cG9ydCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkgewogICAgICAgICAgaWYgKEpTT04ucGFyc2UoZGF0YVtrZXldKS50aXRsZSA9PT0gc3RvcnlUaXRsZSkgewogICAgICAgICAgICBmb3IgKHZhciB0YWcgaW4gSlNPTi5wYXJzZShkYXRhW2tleV0pLnRhZ3MpIHsKICAgICAgICAgICAgICB0YWdBcnJheS5wdXNoKEpTT04ucGFyc2UoZGF0YVtrZXldKS50YWdzW3RhZ10pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHRhZ0FycmF5OwogICAgfSwKICAgIHJldHJpZXZlVXNlclN0b3JpZXM6IGZ1bmN0aW9uIHJldHJpZXZlVXNlclN0b3JpZXModXNlckVtYWlsKSB7CiAgICAgIHRoaXMuY3JlYXRlQ2xpZW50KCk7CiAgICAgIHZhciBzdG9yaWVzQXJyYXkgPSBbXTsKICAgICAgdGhpcy5jbGllbnQuY29sbGVjdGlvbnMoJ3N0b3JpZXMnKS5kb2N1bWVudHMoKS5leHBvcnQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHsKICAgICAgICAgIGlmIChKU09OLnBhcnNlKGRhdGFba2V5XSkuY3JlYXRvciA9PT0gdXNlckVtYWlsKSB7CiAgICAgICAgICAgIHN0b3JpZXNBcnJheS5wdXNoKEpTT04ucGFyc2UoZGF0YVtrZXldKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHN0b3JpZXNBcnJheTsKICAgIH0sCiAgICByZW1vdmVUaXRsZVNwYWNlczogZnVuY3Rpb24gcmVtb3ZlVGl0bGVTcGFjZXModGl0bGUpIHsKICAgICAgdmFyIHJlcGxhY2VkID0gdGl0bGUuc3BsaXQoIiAiKS5qb2luKCItIik7CiAgICAgIHJldHVybiByZXBsYWNlZDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/mixins/storyMixin.js"],"names":["firestoredb","data","Typesense","require","client","stories","methods","createClient","Client","addStory","newStory","storeKey","collection","doc","id","storyKey","collections","documents","create","set","isSubmitted","removeStory","ID","confirm","delete","isDeleted","updateViews","title","author","synopsis","tags","views","dateNow","dateAdded","text","creator","updatedViewsStory","console","log","then","returnData","getStory","storyHolder","retrieve","push","retrieveTitles","titleArray","export","key","JSON","parse","retrieveStoryTags","storyTitle","tagArray","tag","retrieveUserStories","userEmail","storiesArray","removeTitleSpaces","replaced","split","join"],"mappings":"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","sourcesContent":["import { firestoredb } from '../firebaseConfig'\n\nexport default {\n  data() {\n    return {\n      Typesense: require('typesense'),\n      client: '',\n      stories: [],\n    }\n  },\n  methods: {\n    createClient() {\n      this.client = new this.Typesense.Client({\n        'nodes': [{\n          //'host': 'localhost',\n          // 'host': 'vcm-15431.vm.duke.edu',\n          // 'port': '8108',\n          // 'protocol': 'https',\n          'host': 'av2xrki6y54hl3wbp-1.a1.typesense.net',\n          'port': '443',\n          'protocol': 'https',\n        }],\n        // 'apiKey': 'YOYCpFLj9u412ihigstCer5Zs2StzptR',\n        'apiKey': \"I1RDnpfBxdpllDchtj7gslzsqwpmnvmi\",\n      });\n    },\n    addStory(newStory) {\n      this.createClient();\n      const storeKey = firestoredb.collection('stories').doc().id;\n      newStory.storyKey = storeKey;\n      this.client.collections('stories').documents().create(newStory);\n      firestoredb.collection('stories').doc(storeKey).set(newStory);\n      this.isSubmitted = true;\n    },\n    removeStory(ID, storyKey) {\n      if (confirm(\"Are you sure you want to delete this story?\")) {\n        this.createClient();\n        this.client.collections('stories').documents(ID).delete();\n        firestoredb.collection('stories').doc(storyKey).delete();\n        this.isDeleted = true;\n      }\n    },\n    async updateViews(id, title, author, synopsis, tags, views, dateNow, dateAdded, text, creator, storyKey) {\n\n      this.createClient()\n      const updatedViewsStory = { //This is the story that is added when the button is pressed\n        \"id\": id,\n        \"title\": title,\n        \"author\": author,\n        \"synopsis\": synopsis,\n        \"tags\": tags,\n        \"views\": views + 1,\n        \"dateNow\": dateNow,\n        \"dateAdded\": dateAdded,\n        \"text\": text,\n        \"creator\": creator,\n        \"storyKey\": storyKey,\n      }\n\n      try {\n        await this.client.collections('stories').documents(id).delete();\n        console.log(\"Deleting existing story.\");\n      } catch (error) {\n        return;\n      }\n\n      try {\n        await this.client.collections('stories').documents().create(updatedViewsStory).then(function (returnData) {\n          console.log(returnData)\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    getStory(ID) {\n      this.createClient();\n      var storyHolder = [];\n      this.client.collections('stories').documents(ID).retrieve().then(function (data) {\n        storyHolder.push(data);\n      });\n      return storyHolder\n    },\n    retrieveTitles() {\n      this.createClient();\n      var titleArray = [];\n      this.client.collections('stories').documents().export().then(function (data) {\n        for (let key in data) {\n          titleArray.push(JSON.parse(data[key]).title)\n        }\n      });\n      return titleArray;\n    },\n    retrieveStoryTags(storyTitle) {\n      this.createClient();\n      var tagArray = [];\n      this.client.collections('stories').documents().export().then(function (data) {\n        for (let key in data) {\n          if (JSON.parse(data[key]).title === storyTitle) {\n            for (let tag in JSON.parse(data[key]).tags) {\n              tagArray.push(JSON.parse(data[key]).tags[tag]);\n            }\n          }\n        }\n      });\n      return tagArray;\n    },\n    retrieveUserStories(userEmail) {\n      this.createClient();\n      var storiesArray = [];\n      this.client.collections('stories').documents().export().then(function (data) {\n        for (let key in data) {\n          if (JSON.parse(data[key]).creator === userEmail) {\n            storiesArray.push(JSON.parse(data[key]))\n          }\n        }\n      });\n      return storiesArray;\n    },\n    removeTitleSpaces(title) {\n      var replaced = title.split(\" \").join(\"-\");\n      return replaced\n    }\n  }\n}\n"]}]}