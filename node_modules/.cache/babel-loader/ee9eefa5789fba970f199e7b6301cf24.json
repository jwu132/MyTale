{"remainingRequest":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js!/Users/justinwu/Desktop/story_personalization_system/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/justinwu/Desktop/story_personalization_system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/justinwu/Desktop/story_personalization_system/src/components/stories/storyPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/justinwu/Desktop/story_personalization_system/src/components/stories/storyPage.vue","mtime":1604692362841},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5lbnRyaWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9qdXN0aW53dS9EZXNrdG9wL3N0b3J5X3BlcnNvbmFsaXphdGlvbl9zeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnOwppbXBvcnQgc3RvcnlNaXhpbiBmcm9tICJAL21peGlucy9zdG9yeU1peGluIjsKaW1wb3J0IGZpcmViYXNlTWl4aW4gZnJvbSAiQC9taXhpbnMvZmlyZWJhc2VNaXhpbiI7CmltcG9ydCBicm93c2VyRWRpdG9yTWl4aW4gZnJvbSAiQC9taXhpbnMvYnJvd3NlckVkaXRvck1peGluIjsKaW1wb3J0IHsgY29tbWVudHNSZWYgfSBmcm9tICJAL2ZpcmViYXNlQ29uZmlnIjsKaW1wb3J0IGFkZENvbW1lbnQgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1lbnRzL2FkZENvbW1lbnRzLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU3RvcnknLAogIGNvbXBvbmVudHM6IHsKICAgIGFkZENvbW1lbnQ6IGFkZENvbW1lbnQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdG9yeUlEOiAnJywKICAgICAgdGFnc0RhdGE6IFtdLAogICAgICBnaXZlblN0b3J5OiBbe31dLAogICAgICBzdG9yeUNvbW1lbnRzOiBbXSwKICAgICAgZ2l2ZW5TdG9yeUNvbW1lbnRzOiBbXSwKICAgICAgaXNMb2dnZWRJbjogZmFsc2UsCiAgICAgIGlzVmVyaWZpZWQ6IGZhbHNlLAogICAgICBzaG93QWRkQ29tbWVudDogZmFsc2UsCiAgICAgIGlzTXlDb21tZW50OiBmYWxzZSwKICAgICAgdXNlckVtYWlsOiAnJywKICAgICAgdXNlcklEOiAnJywKICAgICAgZWRpdENvbW1lbnRLZXk6ICcnLAogICAgICBjb21tZW50RWRpdDogJycsCiAgICAgIGN1cnJlbnRseUVkaXRpbmc6IGZhbHNlLAogICAgICBpc0RlbGV0ZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgZmlyZWJhc2U6IHsKICAgIHN0b3J5Q29tbWVudHM6IGNvbW1lbnRzUmVmCiAgfSwKICBtZXRob2RzOiB7CiAgICBwb3B1bGF0ZVRhZ3NPYmo6IGZ1bmN0aW9uIHBvcHVsYXRlVGFnc09iaigpIHsKICAgICAgdmFyIGFyciA9IFtdOwogICAgICB2YXIga2V5cyA9IHt9OwogICAgICB2YXIgcXVlcnkgPSBjb21tZW50c1JlZi5vcmRlckJ5S2V5KCk7CiAgICAgIHF1ZXJ5Lm9uY2UoJ3ZhbHVlJykudGhlbihmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZFNuYXBzaG90KSB7CiAgICAgICAgICB2YXIga2V5ID0gY2hpbGRTbmFwc2hvdC52YWwoKS5zdG9yeVRpdGxlOwoKICAgICAgICAgIGlmICh0eXBlb2Yga2V5c1trZXldID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBrZXlzW2tleV0gPSB7fTsKICAgICAgICAgIH0KCiAgICAgICAgICBjaGlsZFNuYXBzaG90LnZhbCgpLmhlbHBmdWxUYWdzLmZvckVhY2goZnVuY3Rpb24gKHRhZykgewogICAgICAgICAgICBpZiAodHlwZW9mIGtleXNba2V5XVt0YWddID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgIGtleXNba2V5XVt0YWddID0gMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAga2V5c1trZXldW3RhZ10gKz0gMTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4ga2V5cykgewogICAgICAgICAga2V5c1trZXldID0gT2JqZWN0LmVudHJpZXMoa2V5c1trZXldKTsKICAgICAgICAgIGtleXNba2V5XS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgIHJldHVybiBiWzFdIC0gYVsxXTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChrZXlzW2tleV0ubGVuZ3RoID4gMykgewogICAgICAgICAgICBrZXlzW2tleV0gPSBrZXlzW2tleV0uc2xpY2UoMCwgMyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBhcnIucHVzaChrZXlzKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBhcnI7CiAgICB9LAogICAgc2hvd0FkZDogZnVuY3Rpb24gc2hvd0FkZCgpIHsKICAgICAgdGhpcy5TaG93QWRkQ29tbWVudHMgPSB0cnVlOwogICAgfSwKICAgIGNvbmZpcm1FZGl0OiBmdW5jdGlvbiBjb25maXJtRWRpdChjb21tZW50S2V5LCBjb21tZW50KSB7CiAgICAgIHRoaXMuZWRpdENvbW1lbnRLZXkgPSBjb21tZW50S2V5OwogICAgICB0aGlzLmNvbW1lbnRFZGl0ID0gY29tbWVudDsKICAgICAgdGhpcy5jdXJyZW50bHlFZGl0aW5nID0gdHJ1ZTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5pc1ZlcmlmaWVkID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLmVtYWlsVmVyaWZpZWQ7CiAgICAgICAgICAgICAgICBfdGhpcy5pc0xvZ2dlZEluID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyOwogICAgICAgICAgICAgICAgX3RoaXMudXNlckVtYWlsID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLmVtYWlsOwogICAgICAgICAgICAgICAgX3RoaXMudXNlcklEID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzLnRhZ3NEYXRhID0gX3RoaXMucG9wdWxhdGVUYWdzT2JqKCk7CiAgICAgICAgICAgICAgX3RoaXMuc3RvcnlJRCA9IF90aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldFN0b3J5KF90aGlzLnN0b3J5SUQpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIF90aGlzLmdpdmVuU3RvcnkgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgbWl4aW5zOiBbc3RvcnlNaXhpbiwgYnJvd3NlckVkaXRvck1peGluLCBmaXJlYmFzZU1peGluXQp9Ow=="},{"version":3,"sources":["storyPage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div v-if=\"givenStory[0]\">\n    <v-card flat class=\"container\" v-if=\"!isDeleted\">\n      <v-card-title v-if=\"givenStory\" class=\"display-1\">\n        {{givenStory[0].title}} \n        <v-spacer></v-spacer>\n        <v-btn outlined v-on:click=\"updateViewsBrowser(givenStory[0])\">View in Browser</v-btn>\n        <v-btn outlined class=\"ml-2\" v-on:click=\"updateViewsEditor(givenStory[0])\">Edit Story</v-btn>\n        <v-btn outlined class=\"ml-2\" v-if=\"givenStory[0].creator === userEmail\" v-on:click=\"removeStory(givenStory[0].id, givenStory[0].storyKey)\">Delete Story</v-btn>\n        \n      </v-card-title>\n\n        <v-card-subtitle>\n        by {{givenStory[0].author}}\n        <v-spacer></v-spacer>\n        Created on {{givenStory[0].dateAdded}} | {{givenStory[0].views}} views\n      </v-card-subtitle>\n\n      <v-card-title>Synopsis</v-card-title>\n      <v-card-text>{{givenStory[0].synopsis}}</v-card-text>\n      \n      <v-card-actions>\n        <v-chip class=\"ml-2\">\n          <v-icon small>mdi-tag</v-icon> Tags\n        </v-chip>\n        <v-chip class=\"ml-2\" color=\"orange\" text-color=\"white\" v-for=\"tag of givenStory[0].tags\" v-bind:key=\"tag['.key']\">\n          {{tag}}\n        </v-chip>\n      </v-card-actions>\n\n      <v-list two-line>\n        <v-card-title class=\"pb-0\">Comments</v-card-title>\n        <div v-for=\"comment of storyComments\" v-bind:key=\"comment['.key']\">\n          <v-list-item class= \"comment\" v-if=\"comment.storyTitle === givenStory[0].title\">\n            <v-list-item-content v-if=\"!currentlyEditing || comment.commentKey !== editCommentKey\">\n              <v-list-item-title class=\"text-wrap\">{{comment.comment}}</v-list-item-title>\n              <v-list-item-subtitle>\n                {{comment.name}} {{comment.dateAdded}}\n              </v-list-item-subtitle>\n            </v-list-item-content>  \n            \n            <v-list-item-action class = \"comment-actions\" v-if=\"!currentlyEditing || comment.commentKey !== editCommentKey\">\n              <v-btn title = \"Edit Comment\" icon v-if=\"userEmail === comment.email\" v-on:click=\"confirmEdit(comment.commentKey, comment.comment)\">\n                <v-icon>mdi-pencil</v-icon>\n              </v-btn>\n            </v-list-item-action>\n            <v-list-item-action class = \"comment-actions\" v-if=\"!currentlyEditing || comment.commentKey !== editCommentKey\">\n              <v-btn title = \"Remove Comment\" icon v-if=\"userEmail === comment.email\" v-on:click=\"removeComment(comment.commentKey, userID)\">\n                <v-icon>mdi-delete</v-icon>\n              </v-btn>\n            </v-list-item-action>\n\n            <v-list-item-content v-if=\"comment.commentKey === editCommentKey\">\n              <form class = \"edit-comment\">\n                <v-text-field v-model=\"commentEdit\"></v-text-field>\n                <v-btn class=\"mb-2\" outlined small v-on:click=\"editComment(comment.commentKey, userID, commentEdit)\">Submit</v-btn>\n              </form>\n            </v-list-item-content>\n          </v-list-item>\n        </div>\n      </v-list>\n\n      <v-card-text class=\"pt-1\">\n        <v-btn outlined small @click=\"showAddComment = true\">Add Comment</v-btn>\n        <div class=\"add-comment\" v-if=\"showAddComment\">\n          <addComment v-if=\"isVerified\" v-bind:givenStoryTitle = \"givenStory[0].title\" />\n          <p v-if=\"!isLoggedIn\"> You need to log in to comment</p>\n        </div>\n      </v-card-text>\n    </v-card>\n\n    <!--<h3>Ratings for Tags:</h3>\n    <div v-for=\"(object,i) in tagsData\" :key=\"i\">\n      <ul v-for=\"(tag,i) in object[givenStory[0].title]\" :key=\"i\">\n        <li>\n          {{tag[0]}}: {{tag[1]}}\n        </li>\n      </ul>\n    </div>-->\n\n    <h3 v-if=\"isDeleted\">This story has been deleted!</h3>\n  </div>\n</template>\n\n<script>\nimport firebase from 'firebase'\nimport storyMixin from \"@/mixins/storyMixin\"\nimport firebaseMixin from \"@/mixins/firebaseMixin\"\nimport browserEditorMixin from \"@/mixins/browserEditorMixin\"\nimport { commentsRef } from \"@/firebaseConfig\"\nimport addComment from '@/components/comments/addComments.vue' \n\nexport default {\n  name: 'Story',\n  components:{\n    addComment,\n  },\n  data (){\n    return{\n      storyID: '',\n      tagsData:[],\n      givenStory:[{}],\n      storyComments: [],\n      givenStoryComments: [],\n      isLoggedIn: false,\n      isVerified: false, \n      showAddComment: false,\n      isMyComment: false,\n      userEmail: '',\n      userID: '',\n      editCommentKey: '',\n      commentEdit: '',\n      currentlyEditing: false,\n      isDeleted: false,\n    }\n  },\n  firebase:{\n    storyComments: commentsRef,\n  },\n  methods: {\n    populateTagsObj(){\n      var arr = []\n      var keys = {}\n      const query = commentsRef.orderByKey();\n      query.once('value')\n        .then(function(snapshot) {\n          snapshot.forEach(function(childSnapshot) {\n            var key = childSnapshot.val().storyTitle;\n            if(typeof keys[key] === \"undefined\"){\n              keys[key] = {}\n            }\n            childSnapshot.val().helpfulTags.forEach(function(tag) {\n              if(typeof keys[key][tag] === \"undefined\"){\n                keys[key][tag] = 0;\n              }\n              keys[key][tag] += 1;\n            })\n          })\n          for(let key in keys){\n            keys[key] = Object.entries(keys[key])\n            keys[key].sort(function(a,b){\n              return b[1]-a[1]\n            })\n            if(keys[key].length>3){\n              keys[key] = keys[key].slice(0,3)\n            }\n          }\n          arr.push(keys)\n        })\n      return arr;\n    },\n    showAdd() {\n      this.ShowAddComments = true;\n    },\n    confirmEdit(commentKey, comment){\n      this.editCommentKey = commentKey;\n      this.commentEdit = comment;\n      this.currentlyEditing = true;\n    },\n  },\n  async created(){\n    if(firebase.auth().currentUser){\n      this.isVerified = firebase.auth().currentUser.emailVerified\n      this.isLoggedIn = firebase.auth().currentUser;\n      this.userEmail = firebase.auth().currentUser.email;\n      this.userID = firebase.auth().currentUser.uid;\n    }\n    this.tagsData = this.populateTagsObj();\n    this.storyID = this.$route.params.id;\n    this.givenStory = await this.getStory(this.storyID)\n\n  \n  },\n  mixins: [storyMixin, browserEditorMixin, firebaseMixin],\n}\n</script>\n\n<style scoped>\n.comment .comment-actions{\n  visibility: hidden;\n}\n.comment:hover .comment-actions{\n  visibility: visible;\n}\n</style>\n"],"sourceRoot":"src/components/stories"}]}