{"remainingRequest":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/components/users/register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/components/users/register.vue","mtime":1604692362841},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7CmltcG9ydCB7IGRiIH0gZnJvbSAiQC9maXJlYmFzZUNvbmZpZyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmV3QWNjb3VudDogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBwcm9maWxlOiB7fQogICAgICB9LAogICAgICBhY2NvdW50UGFzc3dvcmQ6ICcnLAogICAgICBwYXNzd29yZENoZWNrZXI6ICcnLAogICAgICBpc1JlZ2lzdGVyZWQ6IGZhbHNlLAogICAgICBlcnJvcjogJycsCiAgICAgIGlzRXJyb3I6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuaXNFcnJvciA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMuYWNjb3VudFBhc3N3b3JkID09PSB0aGlzLnBhc3N3b3JkQ2hlY2tlciAmJiB0aGlzLmFjY291bnRQYXNzd29yZC5sZW5ndGggPiA1KSB7CiAgICAgICAgZmlyZWJhc2UuYXV0aCgpLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCh0aGlzLm5ld0FjY291bnQuZW1haWwsIHRoaXMuYWNjb3VudFBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIuc2VuZEVtYWlsVmVyaWZpY2F0aW9uKCk7CiAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudXBkYXRlUHJvZmlsZSh7CiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBfdGhpcy5uZXdBY2NvdW50Lm5hbWUKICAgICAgICAgIH0pOwogICAgICAgICAgX3RoaXMubmV3QWNjb3VudC5wcm9maWxlWydhZ2UnXSA9ICcnOwogICAgICAgICAgX3RoaXMubmV3QWNjb3VudC5wcm9maWxlWydob21ldG93biddID0gJyc7CiAgICAgICAgICBfdGhpcy5uZXdBY2NvdW50LnByb2ZpbGVbJ2Zhdm9yaXRlQWN0aXZpdHknXSA9ICcnOwogICAgICAgICAgZGIucmVmKCdhY2NvdW50cy8nICsgZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZCkudXBkYXRlKF90aGlzLm5ld0FjY291bnQpOwogICAgICAgICAgX3RoaXMuaXNSZWdpc3RlcmVkID0gdXNlcjsKICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBfdGhpcy5pc1JlZ2lzdGVyZWQgPSBmYWxzZTsKICAgICAgICAgIF90aGlzLmlzRXJyb3IgPSB0cnVlOwogICAgICAgICAgX3RoaXMuZXJyb3IgPSBlcnIubWVzc2FnZTsKICAgICAgICB9KTsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY2NvdW50UGFzc3dvcmQgIT09IHRoaXMucGFzc3dvcmRDaGVja2VyKSB7CiAgICAgICAgdGhpcy5pc0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yID0gIlBhc3N3b3JkcyBoYXZlIHRvIG1hdGNoIjsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY2NvdW50UGFzc3dvcmQubGVuZ3RoIDwgNikgewogICAgICAgIHRoaXMuaXNFcnJvciA9IHRydWU7CiAgICAgICAgdGhpcy5lcnJvciA9ICJQYXNzd29yZCBoYXMgdG8gYmUgYXQgbGVhc3Qgc2l4IGNoYXJhY3RlcnMiOwogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAyBA,OAAA,QAAA,MAAA,UAAA;AACA,SAAA,EAAA,QAAA,kBAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,UAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA,EAFA;AAGA,QAAA,OAAA,EAAA;AAHA,OADA;AAMA,MAAA,eAAA,EAAA,EANA;AAOA,MAAA,eAAA,EAAA,EAPA;AAQA,MAAA,YAAA,EAAA,KARA;AASA,MAAA,KAAA,EAAA,EATA;AAUA,MAAA,OAAA,EAAA;AAVA,KAAA;AAYA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,CADA,EACA;AAAA;;AACA,WAAA,OAAA,GAAA,KAAA;;AACA,UAAA,KAAA,eAAA,KAAA,KAAA,eAAA,IAAA,KAAA,eAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,QAAA,CAAA,IAAA,GAAA,8BAAA,CAAA,KAAA,UAAA,CAAA,KAAA,EAAA,KAAA,eAAA,EACA,IADA,CAEA,UAAA,IAAA,EAAA;AACA,UAAA,QAAA,CAAA,IAAA,GAAA,WAAA,CAAA,qBAAA;AACA,UAAA,QAAA,CAAA,IAAA,GAAA,WAAA,CAAA,aAAA,CAAA;AACA,YAAA,WAAA,EAAA,KAAA,CAAA,UAAA,CAAA;AADA,WAAA;AAGA,UAAA,KAAA,CAAA,UAAA,CAAA,OAAA,CAAA,KAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,UAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,UAAA,CAAA,OAAA,CAAA,kBAAA,IAAA,EAAA;AACA,UAAA,EAAA,CAAA,GAAA,CAAA,cAAA,QAAA,CAAA,IAAA,GAAA,WAAA,CAAA,GAAA,EAAA,MAAA,CAAA,KAAA,CAAA,UAAA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,IAAA;AACA,SAZA,EAaA,UAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,IAAA;AACA,UAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,OAAA;AACA,SAjBA;AAmBA,QAAA,CAAA,CAAA,cAAA;AACA,OArBA,MAsBA,IAAA,KAAA,eAAA,KAAA,KAAA,eAAA,EAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,aAAA,KAAA,GAAA,yBAAA;AACA,QAAA,CAAA,CAAA,cAAA;AACA,OAJA,MAKA,IAAA,KAAA,eAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,aAAA,KAAA,GAAA,4CAAA;AACA,QAAA,CAAA,CAAA,cAAA;AACA;AACA;AAnCA;AAfA,CAAA","sourcesContent":["<template>\n  <v-app>\n  <div class=\"container\">\n    <form v-if=\"!isRegistered\">\n      <h3>Register</h3>\n      <div class=\"input-field\">\n        <v-text-field label=\"Your Name\" v-model=\"newAccount.name\" />\n        <v-text-field label=\"Email\" v-model=\"newAccount.email\" />\n        <v-text-field type=\"password\" label =\"Password\" v-model=\"accountPassword\" />\n        <v-text-field type=\"password\" label =\"Re-enter password\" v-model=\"passwordChecker\" />\n      </div>\n      <div v-if=\"isError\" class=\"error-message\">\n        {{error}}\n      </div>\n      <v-btn text class=\"button\" v-on:click ='register'>Register</v-btn>\n    </form>\n    <div v-if=\"isRegistered && !isError\" class=\"after-register\">\n      Thank you for registering. Please verify your email before logging in!\n    </div>\n  </div>\n</v-app>\n</template>\n\n<script>\n\nimport firebase from 'firebase'\nimport {db} from \"@/firebaseConfig\"\n\nexport default {\n  data() {\n    return {\n      newAccount: {\n        name: '',\n        email: '',\n        profile: {},\n      },\n      accountPassword: '',\n      passwordChecker: '',\n      isRegistered: false,\n      error: '',\n      isError: false,\n    };\n  },\n  methods: {\n    register(e) {\n      this.isError = false;\n      if(this.accountPassword === this.passwordChecker && this.accountPassword.length>5){\n        firebase.auth().createUserWithEmailAndPassword(this.newAccount.email, this.accountPassword)\n        .then(\n          user => {\n            firebase.auth().currentUser.sendEmailVerification()\n            firebase.auth().currentUser.updateProfile({\n              displayName: this.newAccount.name\n            })\n            this.newAccount.profile['age'] = ''\n            this.newAccount.profile['hometown'] = ''\n            this.newAccount.profile['favoriteActivity'] = ''\n            db.ref('accounts/'+firebase.auth().currentUser.uid).update(this.newAccount)\n            this.isRegistered = user\n          },\n          err => {\n            this.isRegistered = false;\n            this.isError = true;\n            this.error = err.message;\n          }\n        )\n        e.preventDefault();\n      }\n      else if (this.accountPassword !== this.passwordChecker){\n        this.isError = true;\n        this.error = \"Passwords have to match\"\n        e.preventDefault();\n      }\n      else if(this.accountPassword.length<6){\n        this.isError = true;\n        this.error = \"Password has to be at least six characters\"\n        e.preventDefault();\n      }\n    }\n  },\n}\n</script>\n\n<style scoped>\n  form {\n    width: 80%;\n  }\n</style>"],"sourceRoot":"src/components/users"}]}