{"remainingRequest":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js!/Users/justinwu/Desktop/story_personalization_system/node_modules/eslint-loader/index.js??ref--13-0!/Users/justinwu/Desktop/story_personalization_system/src/js/extwee_utils/TweeWriter.js","dependencies":[{"path":"/Users/justinwu/Desktop/story_personalization_system/src/js/extwee_utils/TweeWriter.js","mtime":1604692362843},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiKTsKCnZhciBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciA9IHJlcXVpcmUoIi9Vc2Vycy9qdXN0aW53dS9EZXNrdG9wL3N0b3J5X3BlcnNvbmFsaXphdGlvbl9zeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIpOwoKdmFyIF90eXBlb2YgPSByZXF1aXJlKCIvVXNlcnMvanVzdGlud3UvRGVza3RvcC9zdG9yeV9wZXJzb25hbGl6YXRpb25fc3lzdGVtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZiIpOwoKdmFyIF9jbGFzc0NhbGxDaGVjayA9IHJlcXVpcmUoIi9Vc2Vycy9qdXN0aW53dS9EZXNrdG9wL3N0b3J5X3BlcnNvbmFsaXphdGlvbl9zeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKTsKCnZhciBfY3JlYXRlQ2xhc3MgPSByZXF1aXJlKCIvVXNlcnMvanVzdGlud3UvRGVza3RvcC9zdG9yeV9wZXJzb25hbGl6YXRpb25fc3lzdGVtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIik7CgovKioKICogQGV4dGVybmFsIFN0b3J5CiAqIEBzZWUgU3RvcnkuanMKICovCnZhciBTdG9yeSA9IHJlcXVpcmUoJy4vU3RvcnkuanMnKTsKLyoqCiAqIEBjbGFzcyBUd2VlV3JpdGVyCiAqIEBtb2R1bGUgVHdlZVdyaXRlcgogKi8KCgp2YXIgVHdlZVdyaXRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgInVzZSBzdHJpY3QiOwoKICAvKioKICAgKiBAZnVuY3Rpb24gVHdlZVdyaXRlcgogICAqIEBjbGFzcwogICAqIEBwYXJhbSB7U3Rvcnl9IHN0b3J5IC0gU3Rvcnkgb2JqZWN0IHRvIHdyaXRlCiAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGUgLSBGaWxlIHRvIHdyaXRlIHRvCiAgICovCiAgZnVuY3Rpb24gVHdlZVdyaXRlcihzdG9yeSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFR3ZWVXcml0ZXIpOwoKICAgIGlmICghKHN0b3J5IGluc3RhbmNlb2YgU3RvcnkpKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGEgU3Rvcnkgb2JqZWN0IScpOwogICAgfQoKICAgIHRoaXMub3V0cHV0ID0gbnVsbDsKICAgIHRoaXMud3JpdGVGaWxlKHN0b3J5KTsKICB9CiAgLyoqCiAgICogV3JpdGUgdG8gYSBmaWxlIHVzaW5nIGEgU3Rvcnkgb2JqZWN0CiAgICoKICAgKiBAcGFyYW0ge1N0b3J5fSBzdG9yeSAtIFN0b3J5IGZvcm1hdCB0byB3cml0ZQogICAqIEByZXR1cm5zIHt2b2lkfQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFR3ZWVXcml0ZXIsIFt7CiAgICBrZXk6ICJ3cml0ZUZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHdyaXRlRmlsZShzdG9yeSkgewogICAgICAvLyBXcml0ZSBTdG9yeVRpdGxlIGZpcnN0CiAgICAgIHZhciBvdXRwdXRDb250ZW50cyA9ICc6OiBTdG9yeVRpdGxlXG4nICsgc3RvcnkubmFtZSArICdcblxuJzsgLy8gV3JpdGUgdGhlIFN0b3J5RGF0YSBzZWNvbmQKCiAgICAgIG91dHB1dENvbnRlbnRzICs9ICc6OiBTdG9yeURhdGFcbic7IC8vIFRlc3QgaWYgc3RvcnkubWV0YWRhdGEgaXMgYW4gb2JqZWN0IG9yIG5vdAoKICAgICAgaWYgKF90eXBlb2Yoc3RvcnkubWV0YWRhdGEpID09PSAnb2JqZWN0JykgewogICAgICAgIC8vIFdyaXRlIGFueSBtZXRhZGF0YSBpbiBwcmV0dHkgZm9ybWF0CiAgICAgICAgb3V0cHV0Q29udGVudHMgKz0gJyAnICsgSlNPTi5zdHJpbmdpZnkoc3RvcnkubWV0YWRhdGEsIHVuZGVmaW5lZCwgMik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gSWYsIGZvciB3aGF0ZXZlciByZWFzb24sIHN0b3J5Lm1ldGFkYXRhIGlzIG5vdCBhbiBvYmplY3QsIHRocm93IGVycm9yLgogICAgICAgIHRocm93IG5ldyBFcnJvcignU3RvcnkgTWV0YWRhdGEgTVVTVCBiZSBhbiBvYmplY3QhJyk7CiAgICAgIH0gLy8gQWRkIHR3byBuZXdsaW5lcwoKCiAgICAgIG91dHB1dENvbnRlbnRzICs9ICdcblxuJzsgLy8gQXJlIHRoZXJlIGFueSBwYXNzYWdlcz8KCiAgICAgIGlmIChzdG9yeS5wYXNzYWdlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8gQnVpbGQgdGhlIGNvbnRlbnRzCiAgICAgICAgZm9yICh2YXIgcGFzc2FnZSBpbiBzdG9yeS5wYXNzYWdlcykgewogICAgICAgICAgLy8gV3JpdGUgdGhlIG5hbWUKICAgICAgICAgIG91dHB1dENvbnRlbnRzICs9ICc6OiAnICsgc3RvcnkucGFzc2FnZXNbcGFzc2FnZV0ubmFtZTsgLy8gVGVzdCBpZiBpdCBoYXMgYW55IHRhZ3MKCiAgICAgICAgICBpZiAoc3RvcnkucGFzc2FnZXNbcGFzc2FnZV0udGFncy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIG91dHB1dENvbnRlbnRzICs9ICcgWyc7CgogICAgICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoc3RvcnkucGFzc2FnZXNbcGFzc2FnZV0udGFncyksCiAgICAgICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgIHZhciB0YWcgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgICAgIG91dHB1dENvbnRlbnRzICs9ICcgJyArIHRhZzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0Q29udGVudHMgKz0gJ10nOwogICAgICAgICAgfSAvLyBXcml0ZSBvdXQgYW55IHBhc3NhZ2UgbWV0YWRhdGEKCgogICAgICAgICAgb3V0cHV0Q29udGVudHMgKz0gSlNPTi5zdHJpbmdpZnkoc3RvcnkucGFzc2FnZXNbcGFzc2FnZV0ubWV0YWRhdGEpOyAvLyBBZGQgdGhlIHRleHQgYW5kIHR3byBuZXdsaW5lcwoKICAgICAgICAgIG91dHB1dENvbnRlbnRzICs9ICdcbicgKyBzdG9yeS5wYXNzYWdlc1twYXNzYWdlXS50ZXh0ICsgJ1xuXG4nOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBDcmVhdGUgZW1wdHkgU3RhcnQgcGFzc2FnZQogICAgICAgIG91dHB1dENvbnRlbnRzICs9ICc6OiBTdGFydFxuJzsKICAgICAgfQoKICAgICAgdGhpcy5vdXRwdXQgPSBvdXRwdXRDb250ZW50czsKICAgIH0KICB9XSk7CgogIHJldHVybiBUd2VlV3JpdGVyOwp9KCk7Cgptb2R1bGUuZXhwb3J0cyA9IFR3ZWVXcml0ZXI7"},{"version":3,"sources":["/Users/justinwu/Desktop/story_personalization_system/src/js/extwee_utils/TweeWriter.js"],"names":["Story","require","TweeWriter","story","Error","output","writeFile","outputContents","name","metadata","JSON","stringify","undefined","passages","length","passage","tags","tag","text","module","exports"],"mappings":";;;;;;;;;;AAAA;;;;AAKA,IAAMA,KAAK,GAAGC,OAAO,CAAC,YAAD,CAArB;AAEA;;;;;;IAIMC,U;;;AACJ;;;;;;AAMA,sBAAaC,KAAb,EAAoB;AAAA;;AAClB,QAAI,EAAEA,KAAK,YAAYH,KAAnB,CAAJ,EAA+B;AAC7B,YAAM,IAAII,KAAJ,CAAU,qBAAV,CAAN;AACD;;AAED,SAAKC,MAAL,GAAc,IAAd;AAEA,SAAKC,SAAL,CAAeH,KAAf;AACD;AAED;;;;;;;;;;8BAMWA,K,EAAO;AAChB;AACA,UAAII,cAAc,GAAG,oBAAoBJ,KAAK,CAACK,IAA1B,GAAiC,MAAtD,CAFgB,CAIhB;;AACAD,MAAAA,cAAc,IAAI,gBAAlB,CALgB,CAOhB;;AACA,UAAI,QAAOJ,KAAK,CAACM,QAAb,MAA0B,QAA9B,EAAwC;AACtC;AACAF,QAAAA,cAAc,IAAI,MAAMG,IAAI,CAACC,SAAL,CAAeR,KAAK,CAACM,QAArB,EAA+BG,SAA/B,EAA0C,CAA1C,CAAxB;AACD,OAHD,MAGO;AACL;AACA,cAAM,IAAIR,KAAJ,CAAU,mCAAV,CAAN;AACD,OAde,CAgBhB;;;AACAG,MAAAA,cAAc,IAAI,MAAlB,CAjBgB,CAmBhB;;AACA,UAAIJ,KAAK,CAACU,QAAN,CAAeC,MAAf,GAAwB,CAA5B,EAA+B;AAC7B;AACA,aAAK,IAAMC,OAAX,IAAsBZ,KAAK,CAACU,QAA5B,EAAsC;AACpC;AACAN,UAAAA,cAAc,IAAI,QAAQJ,KAAK,CAACU,QAAN,CAAeE,OAAf,EAAwBP,IAAlD,CAFoC,CAIpC;;AACA,cAAIL,KAAK,CAACU,QAAN,CAAeE,OAAf,EAAwBC,IAAxB,CAA6BF,MAA7B,GAAsC,CAA1C,EAA6C;AAC3CP,YAAAA,cAAc,IAAI,IAAlB;;AAD2C,uDAGzBJ,KAAK,CAACU,QAAN,CAAeE,OAAf,EAAwBC,IAHC;AAAA;;AAAA;AAG3C,kEAAgD;AAAA,oBAArCC,GAAqC;AAC9CV,gBAAAA,cAAc,IAAI,MAAMU,GAAxB;AACD;AAL0C;AAAA;AAAA;AAAA;AAAA;;AAO3CV,YAAAA,cAAc,IAAI,GAAlB;AACD,WAbmC,CAepC;;;AACAA,UAAAA,cAAc,IAAIG,IAAI,CAACC,SAAL,CAAeR,KAAK,CAACU,QAAN,CAAeE,OAAf,EAAwBN,QAAvC,CAAlB,CAhBoC,CAkBpC;;AACAF,UAAAA,cAAc,IAAI,OAAOJ,KAAK,CAACU,QAAN,CAAeE,OAAf,EAAwBG,IAA/B,GAAsC,MAAxD;AACD;AACF,OAvBD,MAuBO;AACL;AACAX,QAAAA,cAAc,IAAI,YAAlB;AACD;;AAED,WAAKF,MAAL,GAAcE,cAAd;AACD;;;;;;AAGHY,MAAM,CAACC,OAAP,GAAiBlB,UAAjB","sourcesContent":["/**\n * @external Story\n * @see Story.js\n */\n\nconst Story = require('./Story.js');\n\n/**\n * @class TweeWriter\n * @module TweeWriter\n */\nclass TweeWriter {\n  /**\n   * @function TweeWriter\n   * @class\n   * @param {Story} story - Story object to write\n   * @param {string} file - File to write to\n   */\n  constructor (story) {\n    if (!(story instanceof Story)) {\n      throw new Error('Not a Story object!');\n    }\n\n    this.output = null;\n\n    this.writeFile(story);\n  }\n\n  /**\n   * Write to a file using a Story object\n   *\n   * @param {Story} story - Story format to write\n   * @returns {void}\n   */\n  writeFile (story) {\n    // Write StoryTitle first\n    let outputContents = ':: StoryTitle\\n' + story.name + '\\n\\n';\n\n    // Write the StoryData second\n    outputContents += ':: StoryData\\n';\n\n    // Test if story.metadata is an object or not\n    if (typeof story.metadata === 'object') {\n      // Write any metadata in pretty format\n      outputContents += ' ' + JSON.stringify(story.metadata, undefined, 2);\n    } else {\n      // If, for whatever reason, story.metadata is not an object, throw error.\n      throw new Error('Story Metadata MUST be an object!');\n    }\n\n    // Add two newlines\n    outputContents += '\\n\\n';\n\n    // Are there any passages?\n    if (story.passages.length > 0) {\n      // Build the contents\n      for (const passage in story.passages) {\n        // Write the name\n        outputContents += ':: ' + story.passages[passage].name;\n\n        // Test if it has any tags\n        if (story.passages[passage].tags.length > 0) {\n          outputContents += ' [';\n\n          for (const tag of story.passages[passage].tags) {\n            outputContents += ' ' + tag;\n          }\n\n          outputContents += ']';\n        }\n\n        // Write out any passage metadata\n        outputContents += JSON.stringify(story.passages[passage].metadata);\n\n        // Add the text and two newlines\n        outputContents += '\\n' + story.passages[passage].text + '\\n\\n';\n      }\n    } else {\n      // Create empty Start passage\n      outputContents += ':: Start\\n';\n    }\n\n    this.output = outputContents;\n  }\n}\n\nmodule.exports = TweeWriter;\n"]}]}