{"remainingRequest":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js!/Users/justinwu/Desktop/story_personalization_system/node_modules/eslint-loader/index.js??ref--13-0!/Users/justinwu/Desktop/story_personalization_system/src/js/tiptap/packages/tiptap/src/Utils/ExtensionManager.js","dependencies":[{"path":"/Users/justinwu/Desktop/story_personalization_system/src/js/tiptap/packages/tiptap/src/Utils/ExtensionManager.js","mtime":1604692362852},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2p1c3Rpbnd1L0Rlc2t0b3Avc3RvcnlfcGVyc29uYWxpemF0aW9uX3N5c3RlbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSAiL1VzZXJzL2p1c3Rpbnd1L0Rlc2t0b3Avc3RvcnlfcGVyc29uYWxpemF0aW9uX3N5c3RlbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfdHlwZW9mIGZyb20gIi9Vc2Vycy9qdXN0aW53dS9EZXNrdG9wL3N0b3J5X3BlcnNvbmFsaXphdGlvbl9zeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9qdXN0aW53dS9EZXNrdG9wL3N0b3J5X3BlcnNvbmFsaXphdGlvbl9zeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9Vc2Vycy9qdXN0aW53dS9EZXNrdG9wL3N0b3J5X3BlcnNvbmFsaXphdGlvbl9zeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvanVzdGlud3UvRGVza3RvcC9zdG9yeV9wZXJzb25hbGl6YXRpb25fc3lzdGVtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2p1c3Rpbnd1L0Rlc2t0b3Avc3RvcnlfcGVyc29uYWxpemF0aW9uX3N5c3RlbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgeyBrZXltYXAgfSBmcm9tICdwcm9zZW1pcnJvci1rZXltYXAnOwoKdmFyIEV4dGVuc2lvbk1hbmFnZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEV4dGVuc2lvbk1hbmFnZXIoKSB7CiAgICB2YXIgZXh0ZW5zaW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107CiAgICB2YXIgZWRpdG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV4dGVuc2lvbk1hbmFnZXIpOwoKICAgIGV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAoZXh0ZW5zaW9uKSB7CiAgICAgIGV4dGVuc2lvbi5iaW5kRWRpdG9yKGVkaXRvcik7CiAgICAgIGV4dGVuc2lvbi5pbml0KCk7CiAgICB9KTsKICAgIHRoaXMuZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRXh0ZW5zaW9uTWFuYWdlciwgW3sKICAgIGtleTogImtleW1hcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGtleW1hcHMoX3JlZikgewogICAgICB2YXIgc2NoZW1hID0gX3JlZi5zY2hlbWE7CiAgICAgIHZhciBleHRlbnNpb25LZXltYXBzID0gdGhpcy5leHRlbnNpb25zLmZpbHRlcihmdW5jdGlvbiAoZXh0ZW5zaW9uKSB7CiAgICAgICAgcmV0dXJuIFsnZXh0ZW5zaW9uJ10uaW5jbHVkZXMoZXh0ZW5zaW9uLnR5cGUpOwogICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGV4dGVuc2lvbikgewogICAgICAgIHJldHVybiBleHRlbnNpb24ua2V5czsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChleHRlbnNpb24pIHsKICAgICAgICByZXR1cm4gZXh0ZW5zaW9uLmtleXMoewogICAgICAgICAgc2NoZW1hOiBzY2hlbWEKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHZhciBub2RlTWFya0tleW1hcHMgPSB0aGlzLmV4dGVuc2lvbnMuZmlsdGVyKGZ1bmN0aW9uIChleHRlbnNpb24pIHsKICAgICAgICByZXR1cm4gWydub2RlJywgJ21hcmsnXS5pbmNsdWRlcyhleHRlbnNpb24udHlwZSk7CiAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZXh0ZW5zaW9uKSB7CiAgICAgICAgcmV0dXJuIGV4dGVuc2lvbi5rZXlzOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKGV4dGVuc2lvbikgewogICAgICAgIHJldHVybiBleHRlbnNpb24ua2V5cyh7CiAgICAgICAgICB0eXBlOiBzY2hlbWFbIiIuY29uY2F0KGV4dGVuc2lvbi50eXBlLCAicyIpXVtleHRlbnNpb24ubmFtZV0sCiAgICAgICAgICBzY2hlbWE6IHNjaGVtYQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZXh0ZW5zaW9uS2V5bWFwcyksIF90b0NvbnN1bWFibGVBcnJheShub2RlTWFya0tleW1hcHMpKS5tYXAoZnVuY3Rpb24gKGtleXMpIHsKICAgICAgICByZXR1cm4ga2V5bWFwKGtleXMpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbnB1dFJ1bGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbnB1dFJ1bGVzKF9yZWYyKSB7CiAgICAgIHZhciBzY2hlbWEgPSBfcmVmMi5zY2hlbWEsCiAgICAgICAgICBleGNsdWRlZEV4dGVuc2lvbnMgPSBfcmVmMi5leGNsdWRlZEV4dGVuc2lvbnM7CiAgICAgIGlmICghKGV4Y2x1ZGVkRXh0ZW5zaW9ucyBpbnN0YW5jZW9mIEFycmF5KSAmJiBleGNsdWRlZEV4dGVuc2lvbnMpIHJldHVybiBbXTsKICAgICAgdmFyIGFsbG93ZWRFeHRlbnNpb25zID0gZXhjbHVkZWRFeHRlbnNpb25zIGluc3RhbmNlb2YgQXJyYXkgPyB0aGlzLmV4dGVuc2lvbnMuZmlsdGVyKGZ1bmN0aW9uIChleHRlbnNpb24pIHsKICAgICAgICByZXR1cm4gIWV4Y2x1ZGVkRXh0ZW5zaW9ucy5pbmNsdWRlcyhleHRlbnNpb24ubmFtZSk7CiAgICAgIH0pIDogdGhpcy5leHRlbnNpb25zOwogICAgICB2YXIgZXh0ZW5zaW9uSW5wdXRSdWxlcyA9IGFsbG93ZWRFeHRlbnNpb25zLmZpbHRlcihmdW5jdGlvbiAoZXh0ZW5zaW9uKSB7CiAgICAgICAgcmV0dXJuIFsnZXh0ZW5zaW9uJ10uaW5jbHVkZXMoZXh0ZW5zaW9uLnR5cGUpOwogICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGV4dGVuc2lvbikgewogICAgICAgIHJldHVybiBleHRlbnNpb24uaW5wdXRSdWxlczsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChleHRlbnNpb24pIHsKICAgICAgICByZXR1cm4gZXh0ZW5zaW9uLmlucHV0UnVsZXMoewogICAgICAgICAgc2NoZW1hOiBzY2hlbWEKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHZhciBub2RlTWFya0lucHV0UnVsZXMgPSBhbGxvd2VkRXh0ZW5zaW9ucy5maWx0ZXIoZnVuY3Rpb24gKGV4dGVuc2lvbikgewogICAgICAgIHJldHVybiBbJ25vZGUnLCAnbWFyayddLmluY2x1ZGVzKGV4dGVuc2lvbi50eXBlKTsKICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChleHRlbnNpb24pIHsKICAgICAgICByZXR1cm4gZXh0ZW5zaW9uLmlucHV0UnVsZXM7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAoZXh0ZW5zaW9uKSB7CiAgICAgICAgcmV0dXJuIGV4dGVuc2lvbi5pbnB1dFJ1bGVzKHsKICAgICAgICAgIHR5cGU6IHNjaGVtYVsiIi5jb25jYXQoZXh0ZW5zaW9uLnR5cGUsICJzIildW2V4dGVuc2lvbi5uYW1lXSwKICAgICAgICAgIHNjaGVtYTogc2NoZW1hCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShleHRlbnNpb25JbnB1dFJ1bGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KG5vZGVNYXJrSW5wdXRSdWxlcykpLnJlZHVjZShmdW5jdGlvbiAoYWxsSW5wdXRSdWxlcywgaW5wdXRSdWxlcykgewogICAgICAgIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFsbElucHV0UnVsZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkoaW5wdXRSdWxlcykpOwogICAgICB9LCBbXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicGFzdGVSdWxlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGFzdGVSdWxlcyhfcmVmMykgewogICAgICB2YXIgc2NoZW1hID0gX3JlZjMuc2NoZW1hLAogICAgICAgICAgZXhjbHVkZWRFeHRlbnNpb25zID0gX3JlZjMuZXhjbHVkZWRFeHRlbnNpb25zOwogICAgICBpZiAoIShleGNsdWRlZEV4dGVuc2lvbnMgaW5zdGFuY2VvZiBBcnJheSkgJiYgZXhjbHVkZWRFeHRlbnNpb25zKSByZXR1cm4gW107CiAgICAgIHZhciBhbGxvd2VkRXh0ZW5zaW9ucyA9IGV4Y2x1ZGVkRXh0ZW5zaW9ucyBpbnN0YW5jZW9mIEFycmF5ID8gdGhpcy5leHRlbnNpb25zLmZpbHRlcihmdW5jdGlvbiAoZXh0ZW5zaW9uKSB7CiAgICAgICAgcmV0dXJuICFleGNsdWRlZEV4dGVuc2lvbnMuaW5jbHVkZXMoZXh0ZW5zaW9uLm5hbWUpOwogICAgICB9KSA6IHRoaXMuZXh0ZW5zaW9uczsKICAgICAgdmFyIGV4dGVuc2lvblBhc3RlUnVsZXMgPSBhbGxvd2VkRXh0ZW5zaW9ucy5maWx0ZXIoZnVuY3Rpb24gKGV4dGVuc2lvbikgewogICAgICAgIHJldHVybiBbJ2V4dGVuc2lvbiddLmluY2x1ZGVzKGV4dGVuc2lvbi50eXBlKTsKICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChleHRlbnNpb24pIHsKICAgICAgICByZXR1cm4gZXh0ZW5zaW9uLnBhc3RlUnVsZXM7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAoZXh0ZW5zaW9uKSB7CiAgICAgICAgcmV0dXJuIGV4dGVuc2lvbi5wYXN0ZVJ1bGVzKHsKICAgICAgICAgIHNjaGVtYTogc2NoZW1hCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB2YXIgbm9kZU1hcmtQYXN0ZVJ1bGVzID0gYWxsb3dlZEV4dGVuc2lvbnMuZmlsdGVyKGZ1bmN0aW9uIChleHRlbnNpb24pIHsKICAgICAgICByZXR1cm4gWydub2RlJywgJ21hcmsnXS5pbmNsdWRlcyhleHRlbnNpb24udHlwZSk7CiAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZXh0ZW5zaW9uKSB7CiAgICAgICAgcmV0dXJuIGV4dGVuc2lvbi5wYXN0ZVJ1bGVzOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKGV4dGVuc2lvbikgewogICAgICAgIHJldHVybiBleHRlbnNpb24ucGFzdGVSdWxlcyh7CiAgICAgICAgICB0eXBlOiBzY2hlbWFbIiIuY29uY2F0KGV4dGVuc2lvbi50eXBlLCAicyIpXVtleHRlbnNpb24ubmFtZV0sCiAgICAgICAgICBzY2hlbWE6IHNjaGVtYQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZXh0ZW5zaW9uUGFzdGVSdWxlcyksIF90b0NvbnN1bWFibGVBcnJheShub2RlTWFya1Bhc3RlUnVsZXMpKS5yZWR1Y2UoZnVuY3Rpb24gKGFsbFBhc3RlUnVsZXMsIHBhc3RlUnVsZXMpIHsKICAgICAgICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhbGxQYXN0ZVJ1bGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHBhc3RlUnVsZXMpKTsKICAgICAgfSwgW10pOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbW1hbmRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21tYW5kcyhfcmVmNCkgewogICAgICB2YXIgc2NoZW1hID0gX3JlZjQuc2NoZW1hLAogICAgICAgICAgdmlldyA9IF9yZWY0LnZpZXc7CiAgICAgIHJldHVybiB0aGlzLmV4dGVuc2lvbnMuZmlsdGVyKGZ1bmN0aW9uIChleHRlbnNpb24pIHsKICAgICAgICByZXR1cm4gZXh0ZW5zaW9uLmNvbW1hbmRzOwogICAgICB9KS5yZWR1Y2UoZnVuY3Rpb24gKGFsbENvbW1hbmRzLCBleHRlbnNpb24pIHsKICAgICAgICB2YXIgbmFtZSA9IGV4dGVuc2lvbi5uYW1lLAogICAgICAgICAgICB0eXBlID0gZXh0ZW5zaW9uLnR5cGU7CiAgICAgICAgdmFyIGNvbW1hbmRzID0ge307CiAgICAgICAgdmFyIHZhbHVlID0gZXh0ZW5zaW9uLmNvbW1hbmRzKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgc2NoZW1hOiBzY2hlbWEKICAgICAgICB9LCBbJ25vZGUnLCAnbWFyayddLmluY2x1ZGVzKHR5cGUpID8gewogICAgICAgICAgdHlwZTogc2NoZW1hWyIiLmNvbmNhdCh0eXBlLCAicyIpXVtuYW1lXQogICAgICAgIH0gOiB7fSkpOwoKICAgICAgICB2YXIgYXBwbHkgPSBmdW5jdGlvbiBhcHBseShjYiwgYXR0cnMpIHsKICAgICAgICAgIGlmICghdmlldy5lZGl0YWJsZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgdmlldy5mb2N1cygpOwogICAgICAgICAgcmV0dXJuIGNiKGF0dHJzKSh2aWV3LnN0YXRlLCB2aWV3LmRpc3BhdGNoLCB2aWV3KTsKICAgICAgICB9OwoKICAgICAgICB2YXIgaGFuZGxlID0gZnVuY3Rpb24gaGFuZGxlKF9uYW1lLCBfdmFsdWUpIHsKICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KF92YWx1ZSkpIHsKICAgICAgICAgICAgY29tbWFuZHNbX25hbWVdID0gZnVuY3Rpb24gKGF0dHJzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgICAgICAgICAgcmV0dXJuIGFwcGx5KGNhbGxiYWNrLCBhdHRycyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdmFsdWUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgY29tbWFuZHNbX25hbWVdID0gZnVuY3Rpb24gKGF0dHJzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGFwcGx5KF92YWx1ZSwgYXR0cnMpOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGlmIChfdHlwZW9mKHZhbHVlKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHZhbHVlKS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmNSkgewogICAgICAgICAgICB2YXIgX3JlZjYgPSBfc2xpY2VkVG9BcnJheShfcmVmNSwgMiksCiAgICAgICAgICAgICAgICBjb21tYW5kTmFtZSA9IF9yZWY2WzBdLAogICAgICAgICAgICAgICAgY29tbWFuZFZhbHVlID0gX3JlZjZbMV07CgogICAgICAgICAgICBoYW5kbGUoY29tbWFuZE5hbWUsIGNvbW1hbmRWYWx1ZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaGFuZGxlKG5hbWUsIHZhbHVlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGFsbENvbW1hbmRzKSwgY29tbWFuZHMpOwogICAgICB9LCB7fSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibm9kZXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmV4dGVuc2lvbnMuZmlsdGVyKGZ1bmN0aW9uIChleHRlbnNpb24pIHsKICAgICAgICByZXR1cm4gZXh0ZW5zaW9uLnR5cGUgPT09ICdub2RlJzsKICAgICAgfSkucmVkdWNlKGZ1bmN0aW9uIChub2RlcywgX3JlZjcpIHsKICAgICAgICB2YXIgbmFtZSA9IF9yZWY3Lm5hbWUsCiAgICAgICAgICAgIHNjaGVtYSA9IF9yZWY3LnNjaGVtYTsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBub2RlcyksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIG5hbWUsIHNjaGVtYSkpOwogICAgICB9LCB7fSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib3B0aW9ucyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIHZpZXcgPSB0aGlzLnZpZXc7CiAgICAgIHJldHVybiB0aGlzLmV4dGVuc2lvbnMucmVkdWNlKGZ1bmN0aW9uIChub2RlcywgZXh0ZW5zaW9uKSB7CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbm9kZXMpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBleHRlbnNpb24ubmFtZSwgbmV3IFByb3h5KGV4dGVuc2lvbi5vcHRpb25zLCB7CiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChvYmosIHByb3AsIHZhbHVlKSB7CiAgICAgICAgICAgIHZhciBjaGFuZ2VkID0gb2JqW3Byb3BdICE9PSB2YWx1ZTsKICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIF9kZWZpbmVQcm9wZXJ0eSh7fSwgcHJvcCwgdmFsdWUpKTsKCiAgICAgICAgICAgIGlmIChjaGFuZ2VkKSB7CiAgICAgICAgICAgICAgdmlldy51cGRhdGVTdGF0ZSh2aWV3LnN0YXRlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSkpKTsKICAgICAgfSwge30pOwogICAgfQogIH0sIHsKICAgIGtleTogIm1hcmtzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5leHRlbnNpb25zLmZpbHRlcihmdW5jdGlvbiAoZXh0ZW5zaW9uKSB7CiAgICAgICAgcmV0dXJuIGV4dGVuc2lvbi50eXBlID09PSAnbWFyayc7CiAgICAgIH0pLnJlZHVjZShmdW5jdGlvbiAobWFya3MsIF9yZWY4KSB7CiAgICAgICAgdmFyIG5hbWUgPSBfcmVmOC5uYW1lLAogICAgICAgICAgICBzY2hlbWEgPSBfcmVmOC5zY2hlbWE7CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFya3MpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBuYW1lLCBzY2hlbWEpKTsKICAgICAgfSwge30pOwogICAgfQogIH0sIHsKICAgIGtleTogInBsdWdpbnMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmV4dGVuc2lvbnMuZmlsdGVyKGZ1bmN0aW9uIChleHRlbnNpb24pIHsKICAgICAgICByZXR1cm4gZXh0ZW5zaW9uLnBsdWdpbnM7CiAgICAgIH0pLnJlZHVjZShmdW5jdGlvbiAoYWxsUGx1Z2lucywgX3JlZjkpIHsKICAgICAgICB2YXIgcGx1Z2lucyA9IF9yZWY5LnBsdWdpbnM7CiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYWxsUGx1Z2lucyksIF90b0NvbnN1bWFibGVBcnJheShwbHVnaW5zKSk7CiAgICAgIH0sIFtdKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBFeHRlbnNpb25NYW5hZ2VyOwp9KCk7CgpleHBvcnQgeyBFeHRlbnNpb25NYW5hZ2VyIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/Users/justinwu/Desktop/story_personalization_system/src/js/tiptap/packages/tiptap/src/Utils/ExtensionManager.js"],"names":["keymap","ExtensionManager","extensions","editor","forEach","extension","bindEditor","init","schema","extensionKeymaps","filter","includes","type","keys","map","nodeMarkKeymaps","name","excludedExtensions","Array","allowedExtensions","extensionInputRules","inputRules","nodeMarkInputRules","reduce","allInputRules","extensionPasteRules","pasteRules","nodeMarkPasteRules","allPasteRules","view","commands","allCommands","value","apply","cb","attrs","editable","focus","state","dispatch","handle","_name","_value","isArray","callback","Object","entries","commandName","commandValue","nodes","Proxy","options","set","obj","prop","changed","assign","updateState","marks","plugins","allPlugins"],"mappings":"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","sourcesContent":["import { keymap } from 'prosemirror-keymap'\n\nexport default class ExtensionManager {\n\n  constructor(extensions = [], editor) {\n    extensions.forEach(extension => {\n      extension.bindEditor(editor)\n      extension.init()\n    })\n    this.extensions = extensions\n  }\n\n  get nodes() {\n    return this.extensions\n      .filter(extension => extension.type === 'node')\n      .reduce((nodes, { name, schema }) => ({\n        ...nodes,\n        [name]: schema,\n      }), {})\n  }\n\n  get options() {\n    const { view } = this\n    return this.extensions\n        .reduce((nodes, extension) => ({\n          ...nodes,\n          [extension.name]: new Proxy(extension.options, {\n            set(obj, prop, value) {\n              const changed = (obj[prop] !== value)\n\n              Object.assign(obj, { [prop]: value })\n\n              if (changed) {\n                view.updateState(view.state)\n              }\n\n              return true\n            },\n          }),\n        }), {})\n  }\n\n  get marks() {\n    return this.extensions\n      .filter(extension => extension.type === 'mark')\n      .reduce((marks, { name, schema }) => ({\n        ...marks,\n        [name]: schema,\n      }), {})\n  }\n\n  get plugins() {\n    return this.extensions\n      .filter(extension => extension.plugins)\n      .reduce((allPlugins, { plugins }) => ([\n        ...allPlugins,\n        ...plugins,\n      ]), [])\n  }\n\n  keymaps({ schema }) {\n    const extensionKeymaps = this.extensions\n      .filter(extension => ['extension'].includes(extension.type))\n      .filter(extension => extension.keys)\n      .map(extension => extension.keys({ schema }))\n\n    const nodeMarkKeymaps = this.extensions\n      .filter(extension => ['node', 'mark'].includes(extension.type))\n      .filter(extension => extension.keys)\n      .map(extension => extension.keys({\n        type: schema[`${extension.type}s`][extension.name],\n        schema,\n      }))\n\n    return [\n      ...extensionKeymaps,\n      ...nodeMarkKeymaps,\n    ].map(keys => keymap(keys))\n  }\n\n  inputRules({ schema, excludedExtensions }) {\n    if (!(excludedExtensions instanceof Array) && excludedExtensions) return []\n\n    const allowedExtensions = (excludedExtensions instanceof Array) ? this.extensions\n        .filter(extension => !excludedExtensions.includes(extension.name)) : this.extensions\n\n    const extensionInputRules = allowedExtensions\n      .filter(extension => ['extension'].includes(extension.type))\n      .filter(extension => extension.inputRules)\n      .map(extension => extension.inputRules({ schema }))\n\n    const nodeMarkInputRules = allowedExtensions\n      .filter(extension => ['node', 'mark'].includes(extension.type))\n      .filter(extension => extension.inputRules)\n      .map(extension => extension.inputRules({\n        type: schema[`${extension.type}s`][extension.name],\n        schema,\n      }))\n\n    return [\n      ...extensionInputRules,\n      ...nodeMarkInputRules,\n    ].reduce((allInputRules, inputRules) => ([\n      ...allInputRules,\n      ...inputRules,\n    ]), [])\n  }\n\n  pasteRules({ schema, excludedExtensions }) {\n    if (!(excludedExtensions instanceof Array) && excludedExtensions) return []\n\n    const allowedExtensions = (excludedExtensions instanceof Array) ? this.extensions\n        .filter(extension => !excludedExtensions.includes(extension.name)) : this.extensions\n\n    const extensionPasteRules = allowedExtensions\n      .filter(extension => ['extension'].includes(extension.type))\n      .filter(extension => extension.pasteRules)\n      .map(extension => extension.pasteRules({ schema }))\n\n    const nodeMarkPasteRules = allowedExtensions\n      .filter(extension => ['node', 'mark'].includes(extension.type))\n      .filter(extension => extension.pasteRules)\n      .map(extension => extension.pasteRules({\n        type: schema[`${extension.type}s`][extension.name],\n        schema,\n      }))\n\n    return [\n      ...extensionPasteRules,\n      ...nodeMarkPasteRules,\n    ].reduce((allPasteRules, pasteRules) => ([\n      ...allPasteRules,\n      ...pasteRules,\n    ]), [])\n  }\n\n  commands({ schema, view }) {\n\n    return this.extensions\n      .filter(extension => extension.commands)\n      .reduce((allCommands, extension) => {\n        const { name, type } = extension\n        const commands = {}\n        const value = extension.commands({\n          schema,\n          ...['node', 'mark'].includes(type) ? {\n            type: schema[`${type}s`][name],\n          } : {},\n        })\n\n        const apply = (cb, attrs) => {\n          if (!view.editable) {\n            return false\n          }\n          view.focus()\n          return cb(attrs)(view.state, view.dispatch, view)\n        }\n\n        const handle = (_name, _value) => {\n          if (Array.isArray(_value)) {\n            commands[_name] = attrs => _value.forEach(callback => apply(callback, attrs))\n          } else if (typeof _value === 'function') {\n            commands[_name] = attrs => apply(_value, attrs)\n          }\n        }\n\n        if (typeof value === 'object') {\n          Object.entries(value).forEach(([commandName, commandValue]) => {\n            handle(commandName, commandValue)\n          })\n        } else {\n          handle(name, value)\n        }\n\n        return {\n          ...allCommands,\n          ...commands,\n        }\n      }, {})\n  }\n\n}\n"]}]}