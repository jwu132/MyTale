{"remainingRequest":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/eslint-loader/index.js??ref--13-0!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/js/extwee_utils/FileConverter.js","dependencies":[{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/js/extwee_utils/FileConverter.js","mtime":1604692362842},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9jbGFzc0NhbGxDaGVjayA9IHJlcXVpcmUoIi9Vc2Vycy9qdXN0aW53dS9EZXNrdG9wL0dpdGxhYl9NeVRhbGUvbXl0YWxlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIik7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gcmVxdWlyZSgiL1VzZXJzL2p1c3Rpbnd1L0Rlc2t0b3AvR2l0bGFiX015VGFsZS9teXRhbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKTsKCnZhciBIVE1MUGFyc2VyID0gcmVxdWlyZSgnLi9IVE1MUGFyc2VyLmpzJyk7Cgp2YXIgVHdlZVdyaXRlciA9IHJlcXVpcmUoJy4vVHdlZVdyaXRlci5qcycpOwoKdmFyIEhUTUxXcml0ZXIgPSByZXF1aXJlKCcuL0hUTUxXcml0ZXIuanMnKTsKCnZhciBUd2VlUGFyc2VyID0gcmVxdWlyZSgnLi9Ud2VlUGFyc2VyLmpzJyk7Cgp2YXIgU3RvcnlGb3JtYXRQYXJzZXIgPSByZXF1aXJlKCcuL1N0b3J5Rm9ybWF0UGFyc2VyJyk7Cgp2YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdheGlvcycpLAogICAgQXhpb3MgPSBfcmVxdWlyZS5kZWZhdWx0OwovKioKICogQGNsYXNzIEZpbGVDb252ZXJ0ZXIKICogQG1vZHVsZSBGaWxlQ29udmVydGVyCiAqLwoKCnZhciBGaWxlQ29udmVydGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAidXNlIHN0cmljdCI7CgogIC8qKgogICAqIEBmdW5jdGlvbiBIVHdlZUZpbGVSZWFkZXIKICAgKiBAY2xhc3MKICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudHMgLSBGaWxlIGNvbnRlbnQgdG8gcGFyc2UKICAqIEBwYXJhbSB7U3RyaW5nfQluU3RvcnlGb3JtYXQtIHN0b3J5IGZvcm1hdCB0byBwYXJzZSBpbnRvCiAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzSFRNTCAtIEZpbGUgaXMgSFRNTAogICAqLwogIGZ1bmN0aW9uIEZpbGVDb252ZXJ0ZXIoY29udGVudHMsIGlzSFRNTCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVDb252ZXJ0ZXIpOwoKICAgIHRoaXMuaHRtbEJsb2IgPSBudWxsOwogICAgdGhpcy50d2VlQmxvYiA9IG51bGw7CiAgICB0aGlzLnN0b3J5ID0gbnVsbDsKICAgIHRoaXMuc3RvcnlGb3JtYXQgPSBudWxsOwogICAgdGhpcy5jb250ZW50cyA9IGNvbnRlbnRzOwogICAgdGhpcy5leHRyYWN0U3RvcnkoaXNIVE1MKTsKICAgIHRoaXMuZXh0cmFjdFN0b3J5Rm9ybWF0KCk7CiAgfQogIC8qKgogICAgICAqIEV4dHJhY3Qgc3RvcnkgZnJvbSBmaWxlIGNvbnRlbnRzCiAgICAgICoKICAgICAgKiBAZnVuY3Rpb24gZXh0cmFjdFN0b3J5CiAgICogQHBhcmFtIHtCb29sZWFufSBpc0hUTUwgLSBGaWxlIGlzIEhUTUwKICAgICAgKiBAcmV0dXJucyB7dm9pZH0KICAgICAgKi8KCgogIF9jcmVhdGVDbGFzcyhGaWxlQ29udmVydGVyLCBbewogICAga2V5OiAiZXh0cmFjdFN0b3J5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBleHRyYWN0U3RvcnkoaXNIVE1MKSB7CiAgICAgIGlmIChpc0hUTUwpIHsKICAgICAgICB2YXIgaHBhcnNlID0gbmV3IEhUTUxQYXJzZXIodGhpcy5jb250ZW50cyk7CiAgICAgICAgdGhpcy5zdG9yeSA9IGhwYXJzZS5zdG9yeTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdHBhcnNlID0gbmV3IFR3ZWVQYXJzZXIodGhpcy5jb250ZW50cyk7CiAgICAgICAgdGhpcy5zdG9yeSA9IHRwYXJzZS5zdG9yeTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBFeHRyYWN0IHN0b3J5Rm9ybWF0IGZyb20gZmlsZSBjb250ZW50cwogICAgICogCiAgICAgKiBAZnVuY3Rpb24gZXh0cmFjdFN0b3J5Rm9ybWF0CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZXh0cmFjdFN0b3J5Rm9ybWF0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBleHRyYWN0U3RvcnlGb3JtYXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBBeGlvcy5nZXQoIi9zdG9yeWZvcm1hdHMvaGFybG93ZS0zL2Zvcm1hdC5qcyIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGZvcm1hdCA9IG5ldyBTdG9yeUZvcm1hdFBhcnNlcihyZXNwb25zZS5kYXRhKTsKICAgICAgICBfdGhpcy5zdG9yeUZvcm1hdCA9IGZvcm1hdC5zdG9yeWZvcm1hdDsKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAgICAqIENvbnZlcnQgZnJvbSBUd2VlIHRvIEhUTUwKICAgICAgICAqCiAgICAgICAgKiBAZnVuY3Rpb24gVHdlZVRvSFRNTAogICAgICogQHBhcmFtIHtzdHJpbmd9IGNzcyAtIEV4dHJhIGNzcwogICAgICogQHBhcmFtIHtzdHJpbmd9IGpzIC0gRXh0cmEganMKICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9CiAgICAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaHRtbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaHRtbChjc3MsIGpzKSB7CiAgICAgIHZhciBodG1sV3JpdGUgPSBuZXcgSFRNTFdyaXRlcih0aGlzLnN0b3J5LCB0aGlzLnN0b3J5Rm9ybWF0LCBjc3MsIGpzKTsKICAgICAgcmV0dXJuIGh0bWxXcml0ZS5vdXRwdXQ7CiAgICB9CiAgICAvKioKICAgICAgICAqIENvbnZlcnQgZnJvbSBIVE1MIHRvIFR3ZWUKICAgICAgICAqCiAgICAgICAgKiBAZnVuY3Rpb24gSFRNTHRvVHdlZQogICAgICAgICogQHJldHVybnMge3N0cmluZ30KICAgICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ0d2VlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0d2VlKCkgewogICAgICB2YXIgdHdyaXRlID0gbmV3IFR3ZWVXcml0ZXIodGhpcy5zdG9yeSk7CiAgICAgIHJldHVybiB0d3JpdGUub3V0cHV0OwogICAgfQogICAgLyoqCiAgICAgICAgKiBDb252ZXJ0IGZyb20gVHdlZSB0byBIVE1MCiAgICAgICAgKgogICAgICAgICogQGZ1bmN0aW9uIFR3ZWVUb0hUTUwKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjc3MgLSBFeHRyYSBjc3MKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqcyAtIEV4dHJhIGpzCiAgICAgICAgKiBAcmV0dXJucyB7dm9pZH0KICAgICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzaHRtbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2h0bWwoc3RvcnkpIHsKICAgICAgdmFyIGNzcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogIiI7CiAgICAgIHZhciBqcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogIiI7CiAgICAgIHZhciBodG1sV3JpdGUgPSBuZXcgSFRNTFdyaXRlcihzdG9yeSwgdGhpcy5zdG9yeUZvcm1hdCwgY3NzLCBqcyk7CiAgICAgIHRoaXMuaHRtbEJsb2IgPSBodG1sV3JpdGUub3V0cHV0OwogICAgfQogICAgLyoqCiAgICAgICAgKiBDb252ZXJ0IGZyb20gSFRNTCB0byBUd2VlCiAgICAgICAgKgogICAgICAgICogQGZ1bmN0aW9uIEhUTUx0b1R3ZWUKICAgICAgICAqIEByZXR1cm5zIHt2b2lkfQogICAgICAgICovCgogIH0sIHsKICAgIGtleTogInN0d2VlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdHdlZShzdG9yeSkgewogICAgICB2YXIgdHdyaXRlID0gbmV3IFR3ZWVXcml0ZXIoc3RvcnkpOwogICAgICB0aGlzLnR3ZWVCbG9iID0gdHdyaXRlLm91dHB1dDsKICAgIH0KICB9XSk7CgogIHJldHVybiBGaWxlQ29udmVydGVyOwp9KCk7Cgptb2R1bGUuZXhwb3J0cyA9IEZpbGVDb252ZXJ0ZXI7"},{"version":3,"sources":["/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/js/extwee_utils/FileConverter.js"],"names":["HTMLParser","require","TweeWriter","HTMLWriter","TweeParser","StoryFormatParser","Axios","default","FileConverter","contents","isHTML","htmlBlob","tweeBlob","story","storyFormat","extractStory","extractStoryFormat","hparse","tparse","get","then","response","format","data","storyformat","css","js","htmlWrite","output","twrite","module","exports"],"mappings":";;;;AAAA,IAAIA,UAAU,GAAGC,OAAO,CAAC,iBAAD,CAAxB;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAC,iBAAD,CAAxB;;AACA,IAAIE,UAAU,GAAGF,OAAO,CAAC,iBAAD,CAAxB;;AACA,IAAIG,UAAU,GAAGH,OAAO,CAAC,iBAAD,CAAxB;;AACA,IAAII,iBAAiB,GAAGJ,OAAO,CAAC,qBAAD,CAA/B;;eAC2BA,OAAO,CAAC,OAAD,C;IAAjBK,K,YAATC,O;AAGR;;;;;;IAIMC,a;;;AACF;;;;;;;AAOH,yBAAYC,QAAZ,EAAsBC,MAAtB,EAA8B;AAAA;;AAC7B,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,KAAL,GAAa,IAAb;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKL,QAAL,GAAgBA,QAAhB;AAEA,SAAKM,YAAL,CAAkBL,MAAlB;AACA,SAAKM,kBAAL;AACA;AAED;;;;;;;;;;;iCAOaN,M,EAAQ;AACpB,UAAIA,MAAJ,EAAY;AACX,YAAIO,MAAM,GAAG,IAAIjB,UAAJ,CAAe,KAAKS,QAApB,CAAb;AACA,aAAKI,KAAL,GAAaI,MAAM,CAACJ,KAApB;AACA,OAHD,MAGO;AACN,YAAIK,MAAM,GAAG,IAAId,UAAJ,CAAe,KAAKK,QAApB,CAAb;AACA,aAAKI,KAAL,GAAaK,MAAM,CAACL,KAApB;AACA;AACD;AAED;;;;;;;;yCAKoB;AAAA;;AAEnBP,MAAAA,KAAK,CAACa,GAAN,CAAU,mCAAV,EAA+CC,IAA/C,CAAoD,UAAAC,QAAQ,EAAI;AAE/D,YAAIC,MAAM,GAAG,IAAIjB,iBAAJ,CAAsBgB,QAAQ,CAACE,IAA/B,CAAb;AACA,QAAA,KAAI,CAACT,WAAL,GAAmBQ,MAAM,CAACE,WAA1B;AACA,OAJD;AAMA;AAGD;;;;;;;;;;;yBAQKC,G,EAAKC,E,EAAI;AACb,UAAIC,SAAS,GAAG,IAAIxB,UAAJ,CAAe,KAAKU,KAApB,EAA2B,KAAKC,WAAhC,EAA6CW,GAA7C,EAAkDC,EAAlD,CAAhB;AACA,aAAOC,SAAS,CAACC,MAAjB;AACA;AAED;;;;;;;;;2BAMO;AACN,UAAIC,MAAM,GAAG,IAAI3B,UAAJ,CAAe,KAAKW,KAApB,CAAb;AACA,aAAOgB,MAAM,CAACD,MAAd;AACA;AAED;;;;;;;;;;;0BAQMf,K,EAA0B;AAAA,UAAnBY,GAAmB,uEAAb,EAAa;AAAA,UAATC,EAAS,uEAAJ,EAAI;AAC/B,UAAIC,SAAS,GAAG,IAAIxB,UAAJ,CAAeU,KAAf,EAAsB,KAAKC,WAA3B,EAAwCW,GAAxC,EAA6CC,EAA7C,CAAhB;AAEA,WAAKf,QAAL,GAAgBgB,SAAS,CAACC,MAA1B;AACA;AAED;;;;;;;;;0BAMMf,K,EAAO;AACZ,UAAIgB,MAAM,GAAG,IAAI3B,UAAJ,CAAeW,KAAf,CAAb;AACA,WAAKD,QAAL,GAAgBiB,MAAM,CAACD,MAAvB;AACA;;;;;;AAGFE,MAAM,CAACC,OAAP,GAAiBvB,aAAjB","sourcesContent":["var HTMLParser = require('./HTMLParser.js');\nvar TweeWriter = require('./TweeWriter.js')\nvar HTMLWriter = require('./HTMLWriter.js');\nvar TweeParser = require('./TweeParser.js')\nvar StoryFormatParser = require('./StoryFormatParser');\nconst { default: Axios } = require('axios');\n\n\n/**\n * @class FileConverter\n * @module FileConverter\n */\nclass FileConverter {\n    /**\n     * @function HTweeFileReader\n     * @class\n     * @param {String} contents - File content to parse\n\t * @param {String}\tnStoryFormat- story format to parse into\n\t * @param {Boolean} isHTML - File is HTML\n     */\n\tconstructor(contents, isHTML) {\n\t\tthis.htmlBlob = null;\n\t\tthis.tweeBlob = null;\n\t\tthis.story = null;\n\t\tthis.storyFormat = null;\n\t\tthis.contents = contents;\n\n\t\tthis.extractStory(isHTML);\n\t\tthis.extractStoryFormat();\n\t}\n\n\t/**\n     * Extract story from file contents\n     *\n     * @function extractStory\n\t * @param {Boolean} isHTML - File is HTML\n     * @returns {void}\n     */\n\textractStory(isHTML) {\n\t\tif (isHTML) {\n\t\t\tvar hparse = new HTMLParser(this.contents);\n\t\t\tthis.story = hparse.story;\n\t\t} else {\n\t\t\tvar tparse = new TweeParser(this.contents);\n\t\t\tthis.story = tparse.story;\n\t\t}\n\t}\n\t\n\t/**\n\t * Extract storyFormat from file contents\n\t * \n\t * @function extractStoryFormat\n\t */\n\textractStoryFormat(){\n\n\t\tAxios.get(\"/storyformats/harlowe-3/format.js\").then(response => {\n\n\t\t\tlet format = new StoryFormatParser(response.data);\n\t\t\tthis.storyFormat = format.storyformat;\n\t\t})\n\n\t}\n\n\n\t/**\n     * Convert from Twee to HTML\n     *\n     * @function TweeToHTML\n\t * @param {string} css - Extra css\n\t * @param {string} js - Extra js\n     * @returns {string}\n     */\n\thtml(css, js) {\n\t\tlet htmlWrite = new HTMLWriter(this.story, this.storyFormat, css, js);\n\t\treturn htmlWrite.output;\n\t}\n\n\t/**\n     * Convert from HTML to Twee\n     *\n     * @function HTMLtoTwee\n     * @returns {string}\n     */\n\ttwee() {\n\t\tlet twrite = new TweeWriter(this.story);\n\t\treturn twrite.output;\n\t}\n\n\t/**\n     * Convert from Twee to HTML\n     *\n     * @function TweeToHTML\n\t * @param {string} css - Extra css\n\t * @param {string} js - Extra js\n     * @returns {void}\n     */\n\tshtml(story, css = \"\", js = \"\") {\n\t\tlet htmlWrite = new HTMLWriter(story, this.storyFormat, css, js);\n\n\t\tthis.htmlBlob = htmlWrite.output;\n\t}\n\n\t/**\n     * Convert from HTML to Twee\n     *\n     * @function HTMLtoTwee\n     * @returns {void}\n     */\n\tstwee(story) {\n\t\tlet twrite = new TweeWriter(story);\n\t\tthis.tweeBlob = twrite.output;\n\t}\n}\n\nmodule.exports = FileConverter;"]}]}