{"remainingRequest":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/eslint-loader/index.js??ref--13-0!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/js/tiptap/packages/tiptap/src/Plugins/MenuBar.js","dependencies":[{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/js/tiptap/packages/tiptap/src/Plugins/MenuBar.js","mtime":1604692362851},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvanVzdGlud3UvRGVza3RvcC9HaXRsYWJfTXlUYWxlL215dGFsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9qdXN0aW53dS9EZXNrdG9wL0dpdGxhYl9NeVRhbGUvbXl0YWxlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCB7IFBsdWdpbiwgUGx1Z2luS2V5IH0gZnJvbSAncHJvc2VtaXJyb3Itc3RhdGUnOwoKdmFyIE1lbnUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIE1lbnUoX3JlZikgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgb3B0aW9ucyA9IF9yZWYub3B0aW9uczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWVudSk7CgogICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICAgIHRoaXMucHJldmVudEhpZGUgPSBmYWxzZTsgLy8gdGhlIG1vdXNlZG93biBldmVudCBpcyBmaXJlZCBiZWZvcmUgYmx1ciBzbyB3ZSBjYW4gcHJldmVudCBpdAoKICAgIHRoaXMubW91c2Vkb3duSGFuZGxlciA9IHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKTsKICAgIHRoaXMub3B0aW9ucy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMubW91c2Vkb3duSGFuZGxlciwgewogICAgICBjYXB0dXJlOiB0cnVlCiAgICB9KTsKCiAgICB0aGlzLmJsdXJIYW5kbGVyID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoX3RoaXMucHJldmVudEhpZGUpIHsKICAgICAgICBfdGhpcy5wcmV2ZW50SGlkZSA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgX3RoaXMub3B0aW9ucy5lZGl0b3IuZW1pdCgnbWVudWJhcjpmb2N1c1VwZGF0ZScsIGZhbHNlKTsKICAgIH07CgogICAgdGhpcy5vcHRpb25zLmVkaXRvci5vbignYmx1cicsIHRoaXMuYmx1ckhhbmRsZXIpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKE1lbnUsIFt7CiAgICBrZXk6ICJoYW5kbGVDbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soKSB7CiAgICAgIHRoaXMucHJldmVudEhpZGUgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImRlc3Ryb3kiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7CiAgICAgIHRoaXMub3B0aW9ucy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMubW91c2Vkb3duSGFuZGxlcik7CiAgICAgIHRoaXMub3B0aW9ucy5lZGl0b3Iub2ZmKCdibHVyJywgdGhpcy5ibHVySGFuZGxlcik7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTWVudTsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKG9wdGlvbnMpIHsKICByZXR1cm4gbmV3IFBsdWdpbih7CiAgICBrZXk6IG5ldyBQbHVnaW5LZXkoJ21lbnVfYmFyJyksCiAgICB2aWV3OiBmdW5jdGlvbiB2aWV3KGVkaXRvclZpZXcpIHsKICAgICAgcmV0dXJuIG5ldyBNZW51KHsKICAgICAgICBlZGl0b3JWaWV3OiBlZGl0b3JWaWV3LAogICAgICAgIG9wdGlvbnM6IG9wdGlvbnMKICAgICAgfSk7CiAgICB9CiAgfSk7Cn0="},{"version":3,"sources":["/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/js/tiptap/packages/tiptap/src/Plugins/MenuBar.js"],"names":["Plugin","PluginKey","Menu","options","preventHide","mousedownHandler","handleClick","bind","element","addEventListener","capture","blurHandler","editor","emit","on","removeEventListener","off","key","view","editorView"],"mappings":";;AAAA,SAASA,MAAT,EAAiBC,SAAjB,QAAkC,mBAAlC;;IAEMC,I;AAEJ,sBAAyB;AAAA;;AAAA,QAAXC,OAAW,QAAXA,OAAW;;AAAA;;AACvB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKC,WAAL,GAAmB,KAAnB,CAFuB,CAIvB;;AACA,SAAKC,gBAAL,GAAwB,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAxB;AACA,SAAKJ,OAAL,CAAaK,OAAb,CAAqBC,gBAArB,CAAsC,WAAtC,EAAmD,KAAKJ,gBAAxD,EAA0E;AAAEK,MAAAA,OAAO,EAAE;AAAX,KAA1E;;AAEA,SAAKC,WAAL,GAAmB,YAAM;AACvB,UAAI,KAAI,CAACP,WAAT,EAAsB;AACpB,QAAA,KAAI,CAACA,WAAL,GAAmB,KAAnB;AACA;AACD;;AAED,MAAA,KAAI,CAACD,OAAL,CAAaS,MAAb,CAAoBC,IAApB,CAAyB,qBAAzB,EAAgD,KAAhD;AACD,KAPD;;AAQA,SAAKV,OAAL,CAAaS,MAAb,CAAoBE,EAApB,CAAuB,MAAvB,EAA+B,KAAKH,WAApC;AACD;;;;kCAEa;AACZ,WAAKP,WAAL,GAAmB,IAAnB;AACD;;;8BAES;AACR,WAAKD,OAAL,CAAaK,OAAb,CAAqBO,mBAArB,CAAyC,WAAzC,EAAsD,KAAKV,gBAA3D;AACA,WAAKF,OAAL,CAAaS,MAAb,CAAoBI,GAApB,CAAwB,MAAxB,EAAgC,KAAKL,WAArC;AACD;;;;;;AAIH,eAAe,UAAUR,OAAV,EAAmB;AAChC,SAAO,IAAIH,MAAJ,CAAW;AAChBiB,IAAAA,GAAG,EAAE,IAAIhB,SAAJ,CAAc,UAAd,CADW;AAEhBiB,IAAAA,IAFgB,gBAEXC,UAFW,EAEC;AACf,aAAO,IAAIjB,IAAJ,CAAS;AAAEiB,QAAAA,UAAU,EAAVA,UAAF;AAAchB,QAAAA,OAAO,EAAPA;AAAd,OAAT,CAAP;AACD;AAJe,GAAX,CAAP;AAMD","sourcesContent":["import { Plugin, PluginKey } from 'prosemirror-state'\n\nclass Menu {\n\n  constructor({ options }) {\n    this.options = options\n    this.preventHide = false\n\n    // the mousedown event is fired before blur so we can prevent it\n    this.mousedownHandler = this.handleClick.bind(this)\n    this.options.element.addEventListener('mousedown', this.mousedownHandler, { capture: true })\n\n    this.blurHandler = () => {\n      if (this.preventHide) {\n        this.preventHide = false\n        return\n      }\n\n      this.options.editor.emit('menubar:focusUpdate', false)\n    }\n    this.options.editor.on('blur', this.blurHandler)\n  }\n\n  handleClick() {\n    this.preventHide = true\n  }\n\n  destroy() {\n    this.options.element.removeEventListener('mousedown', this.mousedownHandler)\n    this.options.editor.off('blur', this.blurHandler)\n  }\n\n}\n\nexport default function (options) {\n  return new Plugin({\n    key: new PluginKey('menu_bar'),\n    view(editorView) {\n      return new Menu({ editorView, options })\n    },\n  })\n}\n"]}]}