{"remainingRequest":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js!/Users/justinwu/Desktop/story_personalization_system/node_modules/eslint-loader/index.js??ref--13-0!/Users/justinwu/Desktop/story_personalization_system/src/js/tiptap/packages/tiptap/src/Plugins/MenuBar.js","dependencies":[{"path":"/Users/justinwu/Desktop/story_personalization_system/src/js/tiptap/packages/tiptap/src/Plugins/MenuBar.js","mtime":1604692362851},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvanVzdGlud3UvRGVza3RvcC9zdG9yeV9wZXJzb25hbGl6YXRpb25fc3lzdGVtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2p1c3Rpbnd1L0Rlc2t0b3Avc3RvcnlfcGVyc29uYWxpemF0aW9uX3N5c3RlbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgeyBQbHVnaW4sIFBsdWdpbktleSB9IGZyb20gJ3Byb3NlbWlycm9yLXN0YXRlJzsKCnZhciBNZW51ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBNZW51KF9yZWYpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1lbnUpOwoKICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICB0aGlzLnByZXZlbnRIaWRlID0gZmFsc2U7IC8vIHRoZSBtb3VzZWRvd24gZXZlbnQgaXMgZmlyZWQgYmVmb3JlIGJsdXIgc28gd2UgY2FuIHByZXZlbnQgaXQKCiAgICB0aGlzLm1vdXNlZG93bkhhbmRsZXIgPSB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyk7CiAgICB0aGlzLm9wdGlvbnMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm1vdXNlZG93bkhhbmRsZXIsIHsKICAgICAgY2FwdHVyZTogdHJ1ZQogICAgfSk7CgogICAgdGhpcy5ibHVySGFuZGxlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLnByZXZlbnRIaWRlKSB7CiAgICAgICAgX3RoaXMucHJldmVudEhpZGUgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIF90aGlzLm9wdGlvbnMuZWRpdG9yLmVtaXQoJ21lbnViYXI6Zm9jdXNVcGRhdGUnLCBmYWxzZSk7CiAgICB9OwoKICAgIHRoaXMub3B0aW9ucy5lZGl0b3Iub24oJ2JsdXInLCB0aGlzLmJsdXJIYW5kbGVyKTsKICB9CgogIF9jcmVhdGVDbGFzcyhNZW51LCBbewogICAga2V5OiAiaGFuZGxlQ2xpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKCkgewogICAgICB0aGlzLnByZXZlbnRIaWRlID0gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZXN0cm95IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkgewogICAgICB0aGlzLm9wdGlvbnMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm1vdXNlZG93bkhhbmRsZXIpOwogICAgICB0aGlzLm9wdGlvbnMuZWRpdG9yLm9mZignYmx1cicsIHRoaXMuYmx1ckhhbmRsZXIpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE1lbnU7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgcmV0dXJuIG5ldyBQbHVnaW4oewogICAga2V5OiBuZXcgUGx1Z2luS2V5KCdtZW51X2JhcicpLAogICAgdmlldzogZnVuY3Rpb24gdmlldyhlZGl0b3JWaWV3KSB7CiAgICAgIHJldHVybiBuZXcgTWVudSh7CiAgICAgICAgZWRpdG9yVmlldzogZWRpdG9yVmlldywKICAgICAgICBvcHRpb25zOiBvcHRpb25zCiAgICAgIH0pOwogICAgfQogIH0pOwp9"},{"version":3,"sources":["/Users/justinwu/Desktop/story_personalization_system/src/js/tiptap/packages/tiptap/src/Plugins/MenuBar.js"],"names":["Plugin","PluginKey","Menu","options","preventHide","mousedownHandler","handleClick","bind","element","addEventListener","capture","blurHandler","editor","emit","on","removeEventListener","off","key","view","editorView"],"mappings":";;AAAA,SAASA,MAAT,EAAiBC,SAAjB,QAAkC,mBAAlC;;IAEMC,I;AAEJ,sBAAyB;AAAA;;AAAA,QAAXC,OAAW,QAAXA,OAAW;;AAAA;;AACvB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKC,WAAL,GAAmB,KAAnB,CAFuB,CAIvB;;AACA,SAAKC,gBAAL,GAAwB,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAxB;AACA,SAAKJ,OAAL,CAAaK,OAAb,CAAqBC,gBAArB,CAAsC,WAAtC,EAAmD,KAAKJ,gBAAxD,EAA0E;AAAEK,MAAAA,OAAO,EAAE;AAAX,KAA1E;;AAEA,SAAKC,WAAL,GAAmB,YAAM;AACvB,UAAI,KAAI,CAACP,WAAT,EAAsB;AACpB,QAAA,KAAI,CAACA,WAAL,GAAmB,KAAnB;AACA;AACD;;AAED,MAAA,KAAI,CAACD,OAAL,CAAaS,MAAb,CAAoBC,IAApB,CAAyB,qBAAzB,EAAgD,KAAhD;AACD,KAPD;;AAQA,SAAKV,OAAL,CAAaS,MAAb,CAAoBE,EAApB,CAAuB,MAAvB,EAA+B,KAAKH,WAApC;AACD;;;;kCAEa;AACZ,WAAKP,WAAL,GAAmB,IAAnB;AACD;;;8BAES;AACR,WAAKD,OAAL,CAAaK,OAAb,CAAqBO,mBAArB,CAAyC,WAAzC,EAAsD,KAAKV,gBAA3D;AACA,WAAKF,OAAL,CAAaS,MAAb,CAAoBI,GAApB,CAAwB,MAAxB,EAAgC,KAAKL,WAArC;AACD;;;;;;AAIH,eAAe,UAAUR,OAAV,EAAmB;AAChC,SAAO,IAAIH,MAAJ,CAAW;AAChBiB,IAAAA,GAAG,EAAE,IAAIhB,SAAJ,CAAc,UAAd,CADW;AAEhBiB,IAAAA,IAFgB,gBAEXC,UAFW,EAEC;AACf,aAAO,IAAIjB,IAAJ,CAAS;AAAEiB,QAAAA,UAAU,EAAVA,UAAF;AAAchB,QAAAA,OAAO,EAAPA;AAAd,OAAT,CAAP;AACD;AAJe,GAAX,CAAP;AAMD","sourcesContent":["import { Plugin, PluginKey } from 'prosemirror-state'\n\nclass Menu {\n\n  constructor({ options }) {\n    this.options = options\n    this.preventHide = false\n\n    // the mousedown event is fired before blur so we can prevent it\n    this.mousedownHandler = this.handleClick.bind(this)\n    this.options.element.addEventListener('mousedown', this.mousedownHandler, { capture: true })\n\n    this.blurHandler = () => {\n      if (this.preventHide) {\n        this.preventHide = false\n        return\n      }\n\n      this.options.editor.emit('menubar:focusUpdate', false)\n    }\n    this.options.editor.on('blur', this.blurHandler)\n  }\n\n  handleClick() {\n    this.preventHide = true\n  }\n\n  destroy() {\n    this.options.element.removeEventListener('mousedown', this.mousedownHandler)\n    this.options.editor.off('blur', this.blurHandler)\n  }\n\n}\n\nexport default function (options) {\n  return new Plugin({\n    key: new PluginKey('menu_bar'),\n    view(editorView) {\n      return new Menu({ editorView, options })\n    },\n  })\n}\n"]}]}