{"remainingRequest":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/components/users/register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/components/users/register.vue","mtime":1604692362841},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnCmltcG9ydCB7ZGJ9IGZyb20gIkAvZmlyZWJhc2VDb25maWciCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5ld0FjY291bnQ6IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBlbWFpbDogJycsCiAgICAgICAgcHJvZmlsZToge30sCiAgICAgIH0sCiAgICAgIGFjY291bnRQYXNzd29yZDogJycsCiAgICAgIHBhc3N3b3JkQ2hlY2tlcjogJycsCiAgICAgIGlzUmVnaXN0ZXJlZDogZmFsc2UsCiAgICAgIGVycm9yOiAnJywKICAgICAgaXNFcnJvcjogZmFsc2UsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcmVnaXN0ZXIoZSkgewogICAgICB0aGlzLmlzRXJyb3IgPSBmYWxzZTsKICAgICAgaWYodGhpcy5hY2NvdW50UGFzc3dvcmQgPT09IHRoaXMucGFzc3dvcmRDaGVja2VyICYmIHRoaXMuYWNjb3VudFBhc3N3b3JkLmxlbmd0aD41KXsKICAgICAgICBmaXJlYmFzZS5hdXRoKCkuY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKHRoaXMubmV3QWNjb3VudC5lbWFpbCwgdGhpcy5hY2NvdW50UGFzc3dvcmQpCiAgICAgICAgLnRoZW4oCiAgICAgICAgICB1c2VyID0+IHsKICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnNlbmRFbWFpbFZlcmlmaWNhdGlvbigpCiAgICAgICAgICAgIGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51cGRhdGVQcm9maWxlKHsKICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogdGhpcy5uZXdBY2NvdW50Lm5hbWUKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5uZXdBY2NvdW50LnByb2ZpbGVbJ2FnZSddID0gJycKICAgICAgICAgICAgdGhpcy5uZXdBY2NvdW50LnByb2ZpbGVbJ2hvbWV0b3duJ10gPSAnJwogICAgICAgICAgICB0aGlzLm5ld0FjY291bnQucHJvZmlsZVsnZmF2b3JpdGVBY3Rpdml0eSddID0gJycKICAgICAgICAgICAgZGIucmVmKCdhY2NvdW50cy8nK2ZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51aWQpLnVwZGF0ZSh0aGlzLm5ld0FjY291bnQpCiAgICAgICAgICAgIHRoaXMuaXNSZWdpc3RlcmVkID0gdXNlcgogICAgICAgICAgfSwKICAgICAgICAgIGVyciA9PiB7CiAgICAgICAgICAgIHRoaXMuaXNSZWdpc3RlcmVkID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuaXNFcnJvciA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnIubWVzc2FnZTsKICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKHRoaXMuYWNjb3VudFBhc3N3b3JkICE9PSB0aGlzLnBhc3N3b3JkQ2hlY2tlcil7CiAgICAgICAgdGhpcy5pc0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yID0gIlBhc3N3b3JkcyBoYXZlIHRvIG1hdGNoIgogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgICBlbHNlIGlmKHRoaXMuYWNjb3VudFBhc3N3b3JkLmxlbmd0aDw2KXsKICAgICAgICB0aGlzLmlzRXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3IgPSAiUGFzc3dvcmQgaGFzIHRvIGJlIGF0IGxlYXN0IHNpeCBjaGFyYWN0ZXJzIgogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgfQogIH0sCn0K"},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/components/users","sourcesContent":["<template>\n  <v-app>\n  <div class=\"container\">\n    <form v-if=\"!isRegistered\">\n      <h3>Register</h3>\n      <div class=\"input-field\">\n        <v-text-field label=\"Your Name\" v-model=\"newAccount.name\" />\n        <v-text-field label=\"Email\" v-model=\"newAccount.email\" />\n        <v-text-field type=\"password\" label =\"Password\" v-model=\"accountPassword\" />\n        <v-text-field type=\"password\" label =\"Re-enter password\" v-model=\"passwordChecker\" />\n      </div>\n      <div v-if=\"isError\" class=\"error-message\">\n        {{error}}\n      </div>\n      <v-btn text class=\"button\" v-on:click ='register'>Register</v-btn>\n    </form>\n    <div v-if=\"isRegistered && !isError\" class=\"after-register\">\n      Thank you for registering. Please verify your email before logging in!\n    </div>\n  </div>\n</v-app>\n</template>\n\n<script>\n\nimport firebase from 'firebase'\nimport {db} from \"@/firebaseConfig\"\n\nexport default {\n  data() {\n    return {\n      newAccount: {\n        name: '',\n        email: '',\n        profile: {},\n      },\n      accountPassword: '',\n      passwordChecker: '',\n      isRegistered: false,\n      error: '',\n      isError: false,\n    };\n  },\n  methods: {\n    register(e) {\n      this.isError = false;\n      if(this.accountPassword === this.passwordChecker && this.accountPassword.length>5){\n        firebase.auth().createUserWithEmailAndPassword(this.newAccount.email, this.accountPassword)\n        .then(\n          user => {\n            firebase.auth().currentUser.sendEmailVerification()\n            firebase.auth().currentUser.updateProfile({\n              displayName: this.newAccount.name\n            })\n            this.newAccount.profile['age'] = ''\n            this.newAccount.profile['hometown'] = ''\n            this.newAccount.profile['favoriteActivity'] = ''\n            db.ref('accounts/'+firebase.auth().currentUser.uid).update(this.newAccount)\n            this.isRegistered = user\n          },\n          err => {\n            this.isRegistered = false;\n            this.isError = true;\n            this.error = err.message;\n          }\n        )\n        e.preventDefault();\n      }\n      else if (this.accountPassword !== this.passwordChecker){\n        this.isError = true;\n        this.error = \"Passwords have to match\"\n        e.preventDefault();\n      }\n      else if(this.accountPassword.length<6){\n        this.isError = true;\n        this.error = \"Password has to be at least six characters\"\n        e.preventDefault();\n      }\n    }\n  },\n}\n</script>\n\n<style scoped>\n  form {\n    width: 80%;\n  }\n</style>"]}]}