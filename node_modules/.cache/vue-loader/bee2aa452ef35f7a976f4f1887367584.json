{"remainingRequest":"/Users/justinwu/Desktop/story_personalization_system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/justinwu/Desktop/story_personalization_system/src/components/editor/tools/variables/Sidebar_Variables.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/justinwu/Desktop/story_personalization_system/src/components/editor/tools/variables/Sidebar_Variables.vue","mtime":1604692362840},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/story_personalization_system/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJwppbXBvcnQgZmlyZWJhc2VNaXhpbiBmcm9tICdAL21peGlucy9maXJlYmFzZU1peGluJwppbXBvcnQgVmFyaWFibGVfRWRpdG9yIGZyb20gIi4vVmFyaWFibGVfRWRpdG9yIgoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogInZhci1zaWRlYmFyIiwKICAgIAogICAgcHJvcHM6ewogICAgICAgIHN0b3J5VmFyczogTWFwCiAgICB9LAoKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaGlkZGVuOiB0cnVlLAogICAgICAgICAgICBhZGQ6IGZhbHNlLAogICAgICAgICAgICBuZXdWYXJOYW1lOiAiIiwKICAgICAgICAgICAgbmV3VmFyVmFsdWU6ICIiLAoKICAgICAgICAgICAgbXlQcm9maWxlOiBbXSwKICAgICAgICAgICAgbXlWYXJOYW1lczogW10sCgogICAgICAgICAgICByZW5kZXJLZXk6IDAsCiAgICAgICAgfQogICAgfSwKCiAgICBjb21wb25lbnRzOiB7ICAgIAogICAgICAgICd2YXItZWRpdG9yJzogVmFyaWFibGVfRWRpdG9yCiAgICB9LAoKICAgIGNvbXB1dGVkOnsKICAgICAgICBzb3J0ZWRLZXlzOiBmdW5jdGlvbigpewogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHNvcnRlZEtleXMgPSBbXTsKICAgICAgICAgICAgdmFyIHZhcmlhYmxlcyA9IHRoaXMuc3RvcnlWYXJzOwoKICAgICAgICAgICAgaWYodmFyaWFibGVzICE9IG51bGwpewogICAgICAgICAgICAgICAgdmFyaWFibGVzLmZvckVhY2goCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odmFsdWUsIGtleSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZEtleXMucHVzaChrZXkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgc29ydGVkS2V5cyA9IHNvcnRlZEtleXMuc29ydChmdW5jdGlvbihhLCBiKXsKICAgICAgICAgICAgICAgICAgICB2YXIgaWRBID0gdmFyaWFibGVzLmdldChhKS5pZDsKICAgICAgICAgICAgICAgICAgICB2YXIgaWRCID0gdmFyaWFibGVzLmdldChiKS5pZDsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkQSAtIGlkQjsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gc29ydGVkS2V5czsKCQl9CiAgICB9LAogICAgCiAgICBtZXRob2RzOiB7CiAgICAgICAgZW1pdERpc3BWYXJzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5oaWRkZW4gPSAhdGhpcy5oaWRkZW47CiAgICAgICAgICAgIHRoaXMuJGVtaXQoImV2dERpc3BWYXJzIiwge2Rpc3A6IHRoaXMuaGlkZGVufSk7CiAgICAgICAgfSwKCiAgICAgICAgZW1pdFZhclZhbHVlQ2hhbmdlOiBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB0aGlzLiRlbWl0KCJldnRWYXJWYWx1ZUNoYW5nZSIsIGV2ZW50KTsKICAgICAgICB9LAoKICAgICAgICBlbWl0VmFyRGVsZXRlOiBmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoImV2dERlbGV0ZSIsIGV2ZW50KTsKICAgICAgICB9LCAKCiAgICAgICAgZW1pdFZhck5hbWVDaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgaWYoZXZlbnQubmV3TmFtZSA9PSAiIil7CiAgICAgICAgICAgICAgICBhbGVydCgiUGxlYXNlIGVudGVyIHNvbWV0aGluZyEiKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYodGhpcy5zb3J0ZWRLZXlzLmluY2x1ZGVzKGV2ZW50Lm5ld05hbWUpKXsKICAgICAgICAgICAgICAgIGFsZXJ0KCJUaGUgdmFyaWFibGUgbmFtZSAiICsgZXZlbnQubmV3TmFtZSArICIgaXMgYWxyZWFkeSBiZWluZyB1c2VkISBQbGVhc2UgcGljayBhbm90aGVyIG5hbWUuIik7CiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcktleSsrOwoKICAgICAgICAgICAgICAgIGlmKHRoaXMucmVuZGVyS2V5ID4gMTApewogICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyS2V5ID0gMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy4kZW1pdCgiZXZ0VmFyTmFtZUNoYW5nZSIsIGV2ZW50KTsKICAgICAgICB9LAoKICAgICAgICBzaG93QWRkOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5hZGQgPSAhdGhpcy5hZGQ7CiAgICAgICAgfSwKCiAgICAgICAgZW1pdE5ld1ZhcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciB4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm5ld1Zhck5hbWUiKTsKICAgICAgICAgICAgdmFyIHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibmV3VmFyVmFsIik7CiAgICAgICAgICAgIHRoaXMubmV3VmFyTmFtZSA9IHgudmFsdWU7CiAgICAgICAgICAgIHRoaXMubmV3VmFyVmFsdWUgPSB5LnZhbHVlOwogICAgICAgICAgICB0aGlzLmFkZCA9ICF0aGlzLmFkZDsKICAgICAgICAgICAgdGhpcy4kZW1pdCgiZXZ0TmV3VmFyIiwgeyBuYW1lOiAnJCcgKyB0aGlzLm5ld1Zhck5hbWUsIHZhbHVlOiB0aGlzLm5ld1ZhclZhbHVlIH0gKTsKICAgICAgICAgICAgdGhpcy5uZXdWYXJOYW1lID0gIiI7CiAgICAgICAgICAgIHRoaXMubmV3VmFyVmFsdWUgPSAiIjsKICAgICAgICB9LAoKICAgICAgICBhdXRvZmlsbFZhcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICBmb3IgKGk9MDsgaTx0aGlzLm15VmFyTmFtZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm5ld1Zhck5hbWUgPT09IHRoaXMubXlWYXJOYW1lc1tpXSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3VmFyVmFsdWUgPSB0aGlzLm15UHJvZmlsZVtpXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgfSwKCiAgICBjcmVhdGVkKCkgewogICAgICAgIC8vdGhpcy51c2VySUQgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkOwogICAgICAgIC8vdGhpcy5teVByb2ZpbGUgPSB0aGlzLmdldFZhclZhbHModGhpcy51c2VySUQpOwogICAgICAgIC8vdGhpcy5teVZhck5hbWVzID0gdGhpcy5nZXRWYXJOYW1lcyh0aGlzLnVzZXJJRCk7CiAgICB9LAogICAgbWl4aW5zOiBbZmlyZWJhc2VNaXhpbl0KfQo="},{"version":3,"sources":["Sidebar_Variables.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Sidebar_Variables.vue","sourceRoot":"src/components/editor/tools/variables","sourcesContent":["<template>\n    <div id = \"var_sidebar\">\n\n         <div id = \"header\" style = \"display:grid; grid-template-columns: 10fr 1fr; text-align:center;\">\n            <h3 style = \"padding-top: 5px;\">Text Variables</h3>\n            <v-btn icon id = \"hide\" v-on:click = \"emitDispVars\"><v-icon>{{this.hidden ? 'mdi-eye':'mdi-eye-off'}}</v-icon></v-btn>\n        </div><br>\n        \n        <div id = \"var_editors\" v-bind:key = \"this.renderKey\">\n            <var-editor class = \"var_editor\" v-for = \"(nVar, index) in this.sortedKeys\" v-bind:key = \"index\"\n                                v-bind:varName = \"nVar\" \n                                v-bind:varColor = \"storyVars.get(nVar).color\"\n                                v-bind:initVarVal = \"storyVars.get(nVar).value\" \n                                v-on:evtGetNextValue = \"emitVarValueChange\"\n                                v-on:evtDelete = \"emitVarDelete\"\n                                v-on:evtNewVarName = \"emitVarNameChange\"></var-editor>\n        </div>\n\n        <br>\n\n        <button class = \"sidebar_button\" id = \"addButton\" v-on:click = \"showAdd\"><v-icon>mdi-plus</v-icon>\n            New Variable</button>\n        <br><br>\n\n        <div v-if = \"this.add\">\n            <v-combobox outlined dense hide-details label=\"Variable Name\" v-model=\"newVarName\" placeholder=\"myVar\" :items=\"this.myVarNames\" id=\"newVarName\" @change=\"autofillVar\"></v-combobox>\n\n            <v-combobox outlined dense hide-details label=\"Value\" v-model=\"newVarValue\" placeholder=\"value\" id=\"newVarVal\" class=\"mt-4 mb-1\"></v-combobox>\n            \n            <v-tooltip bottom>\n                <template v-slot:activator=\"{ on, attrs }\">\n                    <button v-bind=\"attrs\" v-on=\"on\"\n                        class = \"sidebar_button\" id = \"cancel_new_var\"\n                        v-on:click= \"showAdd\">\n                        <v-icon>mdi-close</v-icon>\n                    </button>\n                </template>\n                <span>Cancel</span>\n            </v-tooltip>\n\n            <v-tooltip bottom>\n                <template v-slot:activator=\"{ on, attrs }\">\n                    <button v-bind=\"attrs\" v-on=\"on\"\n                        class = \"sidebar_button\" id = \"confirm_new_var\"\n                        v-on:click= \"emitNewVar\">\n                        <v-icon>mdi-check</v-icon>\n                    </button>\n                </template>\n                <span>Submit</span>\n            </v-tooltip>\n        </div>\n    </div>\n</template>\n\n<script>\n//import firebase from 'firebase'\nimport firebaseMixin from '@/mixins/firebaseMixin'\nimport Variable_Editor from \"./Variable_Editor\"\n\nexport default {\n    name: \"var-sidebar\",\n    \n    props:{\n        storyVars: Map\n    },\n\n    data() {\n        return {\n            hidden: true,\n            add: false,\n            newVarName: \"\",\n            newVarValue: \"\",\n\n            myProfile: [],\n            myVarNames: [],\n\n            renderKey: 0,\n        }\n    },\n\n    components: {    \n        'var-editor': Variable_Editor\n    },\n\n    computed:{\n        sortedKeys: function(){\n            \n            var sortedKeys = [];\n            var variables = this.storyVars;\n\n            if(variables != null){\n                variables.forEach(\n                    function(value, key){\n                        sortedKeys.push(key);\n                    }\n                );\n\n                sortedKeys = sortedKeys.sort(function(a, b){\n                    var idA = variables.get(a).id;\n                    var idB = variables.get(b).id;\n\n                    return idA - idB;\n                });\n            }\n\n            return sortedKeys;\n\t\t}\n    },\n    \n    methods: {\n        emitDispVars: function() {\n            this.hidden = !this.hidden;\n            this.$emit(\"evtDispVars\", {disp: this.hidden});\n        },\n\n        emitVarValueChange: function(event) {\n            this.$emit(\"evtVarValueChange\", event);\n        },\n\n        emitVarDelete: function(event){\n            this.$emit(\"evtDelete\", event);\n        }, \n\n        emitVarNameChange: function(event){\n            if(event.newName == \"\"){\n                alert(\"Please enter something!\");\n                return;\n            }\n\n            if(this.sortedKeys.includes(event.newName)){\n                alert(\"The variable name \" + event.newName + \" is already being used! Please pick another name.\");\n                this.renderKey++;\n\n                if(this.renderKey > 10){\n                    this.renderKey = 0;\n                }\n                return;\n            }\n\n            this.$emit(\"evtVarNameChange\", event);\n        },\n\n        showAdd: function() {\n            this.add = !this.add;\n        },\n\n        emitNewVar: function() {\n            var x = document.getElementById(\"newVarName\");\n            var y = document.getElementById(\"newVarVal\");\n            this.newVarName = x.value;\n            this.newVarValue = y.value;\n            this.add = !this.add;\n            this.$emit(\"evtNewVar\", { name: '$' + this.newVarName, value: this.newVarValue } );\n            this.newVarName = \"\";\n            this.newVarValue = \"\";\n        },\n\n        autofillVar: function() {\n            var i;\n            for (i=0; i<this.myVarNames.length; i++) {\n                if (this.newVarName === this.myVarNames[i]) {\n                    this.newVarValue = this.myProfile[i];\n                    return;\n                }\n            }\n        },\n    },\n\n    created() {\n        //this.userID = firebase.auth().currentUser.uid;\n        //this.myProfile = this.getVarVals(this.userID);\n        //this.myVarNames = this.getVarNames(this.userID);\n    },\n    mixins: [firebaseMixin]\n}\n</script>\n\n<style scoped>\n    #title{\n        display: inline-block;\n    }\n\n    .emitter{\n        display: inline-block;\n        position: absolute;\n        left: 85%;\n        top: 2%;\n    }\n\n   @keyframes border_anim{\n        from{border: solid white;        \n                border-width: 2px;\n                border-radius: 5px;\n                padding: 5px;}\n\n        to{border:solid gray;\n            border-width: 2px;\n            border-radius: 5px;\n            padding: 5px;}\n        }\n\n    .sidebar_button{\n\t\tborder: solid white;\n        border-width: 2px;\n\t\tborder-radius: 5px;\n        padding: 5px;\n\t}\n\n\t.sidebar_button:hover{\n\t\tanimation: border_anim;\n\t\tanimation-fill-mode: forwards;\n\t\tanimation-duration: 500ms;\n\t}\n    #var_sidebar {\n        border-width: 2px;\n        border: black;\n        text-align: center;\n    }\n\n    #var_editors{\n        border-width: 1px;\n        border: solid lightgray;\n        border-radius: 5px;\n        padding: 5px;\n        text-align: center;\n    }\n\n    .var_editor{\n        padding: 5px;\n    }\n\n    ul{\n        list-style-type: none;\n    }\n\n    #addButton {\n        text-align: left;\n    }\n\n    #newVar {\n        text-align: left;\n    }\n\n    .input {\n        border-radius: 5px;\n        border-style: solid;\n        border-color: lightgray;\n        width: 100%;\n    }\n\n    button{\n        outline: none;\n    }\n\n    @keyframes border_anim{\n        from{border: solid white;}\n        to{border:solid #F05E23;}\n\t}\n\n    .sidebar_button{\n\t\tborder: solid white;\n        border-width: 3px;\n\t\tborder-radius: 5px;\n        padding: 2px;\n\t}\n\n\t.sidebar_button:hover{\n        border-width: 2px;\n        border-radius: 5px;\n        padding: 2px;\n\t\tanimation: border_anim;\n\t\tanimation-fill-mode: forwards;\n\t\tanimation-duration: 500ms;\n\t}\n\n    .spacing {\n        width: 100%;\n        height: 5px;\n    }\n\n</style>"]}]}