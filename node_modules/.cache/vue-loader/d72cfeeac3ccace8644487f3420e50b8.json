{"remainingRequest":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/components/editor/tools/media/Sidebar_Media.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/components/editor/tools/media/Sidebar_Media.vue","mtime":1604692362838},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVcGxvYWRfTGlzdCBmcm9tICcuL1VwbG9hZF9MaXN0LnZ1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdtZWRpYS1zaWRlYmFyJywKCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgJ3VwbG9hZC1saXN0JzogVXBsb2FkX0xpc3QsCiAgICB9LAoKICAgIHByb3BzOiB7CiAgICAgICAgc3RhdHVzOiBTdHJpbmcsCiAgICAgICAgaW1hZ2VWYXJzOiBNYXAsCiAgICAgICAgYXVkaW9WYXJzOiBNYXAKICAgIH0sCgogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBoaWRkZW46IHRydWUsCiAgICAgICAgfQogICAgfSwKCiAgICBjcmVhdGVkOiBmdW5jdGlvbigpIHsKICAgIH0sCgogICAgbWV0aG9kczogewogICAgICAgIC8vIGV2ZW50OiB7ZmlsZXMsIG5hbWVzfQogICAgICAgIHByb2Nlc3NJbWFnZXM6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHZhciBmaWxlcyA9IGV2ZW50LmZpbGVzOwogICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50LmRhdGE7CgogICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBmID0gZmlsZXNbaV07CgogICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZl0sIHsgdHlwZTogZi50eXBlfSk7CiAgICAgICAgICAgICAgICB2YXIgc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgICAgICAgIHZhciB0ID0gJ2ltYWdlJzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIG1lZGlhTmFtZSA9ICcnOwogICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IGRhdGEubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBpZihkYXRhW2pdLmZpbGVOYW1lID09IGYubmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICBtZWRpYU5hbWUgPSBkYXRhW2pdLnZhck5hbWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBmaWxlOiBGaWxlIG9iamVjdAogICAgICAgICAgICAgICAgLy8gZmlsZU5hbWU6IG5hbWUgb2YgZmlsZQogICAgICAgICAgICAgICAgLy8gdmFyTmFtZTogdmFyaWFibGUgbmFtZSBhc3NvY2lhdGVkIHdpdGggZmlsZQogICAgICAgICAgICAgICAgLy8gcGF0aDogZmlsZSB1cmwKICAgICAgICAgICAgICAgIC8vIHR5cGU6ICdpbWFnZScKICAgICAgICAgICAgICAgIC8vIGlkOiB1bmlxdWUgaWQgZ2VuZXJhdGVkIGJlZm9yZSBhZGRpbmcgbWVkaWEgdG8gcGFnZQogICAgICAgICAgICAgICAgdGhpcy5hbGxJbWFnZXMucHVzaCh7ZmlsZTogZiwgZmlsZU5hbWU6IGYubmFtZSwgdmFyTmFtZTogbWVkaWFOYW1lLCBwYXRoOiBzcmMsIHR5cGU6IHQsIGlkOiAiIiwgc3RvcmVTdGF0dXM6ICJuZXcifSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuYWxsSW1hZ2VzID0gdGhpcy5hbGxJbWFnZXMuZmlsdGVyKGZ1bmN0aW9uKGltZykgewogICAgICAgICAgICAgICAgaWYoaW1nLnBhdGggIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpbWc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdGhpcy4kZW1pdCgiZXZ0SW1hZ2VVcGRhdGUiLCB0aGlzLmFsbEltYWdlcyk7CiAgICAgICAgfSwKCiAgICAgICAgLy8gZXZlbnQ6IHtmaWxlcywgZGF0YX0KICAgICAgICBwcm9jZXNzQXVkaW86IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHZhciBmaWxlcyA9IGV2ZW50LmZpbGVzOwogICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50LmRhdGE7CgogICAgICAgICAgICB0aGlzLmFsbEF1ZGlvID0gW107CgogICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBmID0gZmlsZXNbaV07CgogICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZl0sIHsgdHlwZTogZi50eXBlfSk7CiAgICAgICAgICAgICAgICB2YXIgc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgICAgICAgIHZhciB0ID0gJ2F1ZGlvJzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIG1lZGlhTmFtZSA9ICcnOwogICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IGRhdGEubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBpZihkYXRhW2pdLmZpbGVOYW1lID09IGYubmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICBtZWRpYU5hbWUgPSBkYXRhW2pdLnZhck5hbWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBmaWxlTmFtZTogbmFtZSBvZiBmaWxlCiAgICAgICAgICAgICAgICAvLyB2YXJOYW1lOiB2YXJpYWJsZSBuYW1lIGFzc29jaWF0ZWQgd2l0aCBmaWxlCiAgICAgICAgICAgICAgICAvLyBwYXRoOiBmaWxlIHVybAogICAgICAgICAgICAgICAgLy8gdHlwZTogJ2F1ZGlvJwogICAgICAgICAgICAgICAgLy8gaWQ6IHVuaXF1ZSBpZCBnZW5lcmF0ZWQgYmVmb3JlIGFkZGluZyBtZWRpYSB0byBwYWdlCiAgICAgICAgICAgICAgICB0aGlzLmFsbEF1ZGlvLnB1c2goe2ZpbGU6IGYsIGZpbGVOYW1lOiBmLm5hbWUsIHZhck5hbWU6IG1lZGlhTmFtZSwgcGF0aDogc3JjLCB0eXBlOiB0LCBpZDogIiJ9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRlbWl0KCJldnRBdWRpb1VwZGF0ZSIsIHRoaXMuYWxsQXVkaW8pOwogICAgICAgIH0sCgogICAgICAgIC8vIGV2ZW50OiB7cHJldk5hbWUsIG5ld05hbWV9CiAgICAgICAgZW1pdEF1ZGlvVmFyTmFtZUNoYW5nZTogZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICB0aGlzLiRlbWl0KCJldnRBdWRpb05hbWVDaGFuZ2UiLCBldmVudCk7CiAgICAgICAgfSwKCiAgICAgICAgLy8gZXZlbnQ6IHtwcmV2TmFtZSwgbmV3TmFtZX0KICAgICAgICBlbWl0SW1hZ2VWYXJOYW1lQ2hhbmdlOiBmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoImV2dEltYWdlTmFtZUNoYW5nZSIsIGV2ZW50KTsKICAgICAgICB9LAoKICAgICAgICAvLyBldmVudDogdmFyQXJyID0ge25hbWUsIGZpbGUsIGZpbGVOYW1lLCBwYXRoLCBjb2xvciwgaWR9CiAgICAgICAgZW1pdE5ld0ltYWdlVmFyaWFibGU6IGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgdGhpcy4kZW1pdCgiZXZ0TmV3SW1hZ2VWYXJpYWJsZSIsIGV2ZW50KTsKICAgICAgICB9LAoKICAgICAgICAvLyBldmVudDogdmFyQXJyID0ge25hbWUsIGZpbGUsIGZpbGVOYW1lLCBwYXRoLCBjb2xvciwgaWR9CiAgICAgICAgZW1pdE5ld0F1ZGlvVmFyaWFibGU6IGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgdGhpcy4kZW1pdCgiZXZ0TmV3QXVkaW9WYXJpYWJsZSIsIGV2ZW50KTsKICAgICAgICB9LAoKICAgICAgICAvLyBldmVudDoge25hbWUsIGRhdGE6IHtmaWxlLCBmaWxlTmFtZSwgcGF0aH19CiAgICAgICAgcmVwbGFjZUltYWdlKGV2ZW50KXsKICAgICAgICAgICAgdGhpcy4kZW1pdCgiZXZ0UmVwbGFjZUltYWdlIiwgZXZlbnQpOwogICAgICAgIH0sCgogICAgICAgIC8vIGV2ZW50OiB7bmFtZSwgZGF0YToge2ZpbGUsIGZpbGVOYW1lLCBwYXRofX0KICAgICAgICByZXBsYWNlQXVkaW8oZXZlbnQpewogICAgICAgICAgICB0aGlzLiRlbWl0KCJldnRSZXBsYWNlQXVkaW8iLCBldmVudCk7CiAgICAgICAgfSwKCiAgICAgICAgLy8gZXZlbnQ6IHtuYW1lLCBmaWxlTmFtZX0KICAgICAgICBlbWl0QWRkSW1hZ2VUb1BhZ2U6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoImV2dEFkZEltYWdlIiwgZXZlbnQpOwogICAgICAgIH0sCgogICAgICAgIC8vIGV2ZW50OiB7bmFtZSwgZmlsZU5hbWV9CiAgICAgICAgZW1pdEFkZEF1ZGlvVG9QYWdlOiBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB0aGlzLiRlbWl0KCJldnRBZGRBdWRpbyIsIGV2ZW50KTsKICAgICAgICB9LAoKICAgICAgICAvLyBldmVudDoge25hbWUsIGZpbGVOYW1lfQogICAgICAgIGVtaXRSZW1vdmVJbWFnZTogZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgiZXZ0UmVtb3ZlSW1hZ2UiLCBldmVudCk7CgogICAgICAgICAgICAvKiBpZihldmVudC50eXBlID09ICJpbWFnZSIpIHsKICAgICAgICAgICAgICAgIHRoaXMuYWxsSW1hZ2VzID0gdGhpcy5hbGxJbWFnZXMuZmlsdGVyKGZ1bmN0aW9uKGltYWdlRGF0YSkgewogICAgICAgICAgICAgICAgICAgIGlmKGltYWdlRGF0YS5maWxlTmFtZSAhPSBldmVudC5maWxlTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW1hZ2VEYXRhOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGV2ZW50LnR5cGUgPT0gImF1ZGlvIikgewogICAgICAgICAgICAgICAgdGhpcy5hbGxBdWRpbyA9IHRoaXMuYWxsQXVkaW8uZmlsdGVyKGZ1bmN0aW9uKGF1ZGlvRGF0YSkgewogICAgICAgICAgICAgICAgICAgIGlmKGF1ZGlvRGF0YS5maWxlTmFtZSAhPSBldmVudC5maWxlTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXVkaW9EYXRhOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9ICovCiAgICAgICAgICAgIC8vdGhpcy5hbGxNZWRpYSA9IFtdOwogICAgICAgICAgICAvL3RoaXMuYWxsTWVkaWEgPSB0aGlzLmFsbEltYWdlcy5jb25jYXQodGhpcy5hbGxBdWRpbyk7CiAgICAgICAgfSwKCiAgICAgICAgZW1pdERpc3BWYXJzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5oaWRkZW4gPSAhdGhpcy5oaWRkZW47CiAgICAgICAgICAgIHRoaXMuJGVtaXQoImV2dERpc3BWYXJzIiwge2Rpc3A6IHRoaXMuaGlkZGVufSk7CiAgICAgICAgfSwKCiAgICAgICAgLy8gZXZlbnQ6IHtuYW1lLCBmaWxlTmFtZX0KICAgICAgICBlbWl0UmVtb3ZlQXVkaW86IGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgdGhpcy4kZW1pdCgiZXZ0UmVtb3ZlQXVkaW8iLCBldmVudCk7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Sidebar_Media.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Sidebar_Media.vue","sourceRoot":"src/components/editor/tools/media","sourcesContent":["<template>\n    <div id = \"media_sidebar\">\n        <div id = \"header\" style = \"display:grid; grid-template-columns: 10fr 1fr; text-align:center;\">\n            <h3 style = \"padding-top: 5px;\">Media Variables</h3>\n            <v-btn icon id = \"hide\" v-on:click = \"emitDispVars\"><v-icon>{{this.hidden ? 'mdi-eye':'mdi-eye-off'}}</v-icon></v-btn>\n        </div><br>\n\n        <div v-if = \"this.status != ''\"><p>{{this.status}}</p></div>\n        \n        <div id = \"spacer\">\n            <upload-list class = \"list\" purpose = \"Images\" :varMap = \"this.imageVars\"\n                        v-on:evtReplaceFile = \"replaceImage\"\n                        v-on:evtNewMediaVariables = \"emitNewImageVariable\" \n                        v-on:evtNewVarName = \"emitImageVarNameChange\"\n                        v-on:evtAdd = \"emitAddImageToPage\"\n                        v-on:evtDelete = \"emitRemoveImage\"></upload-list><br> \n\n            <upload-list class = \"list\" purpose = \"Audio\" :varMap = \"this.audioVars\"\n                        v-on:evtReplaceFile = \"replaceAudio\" \n                        v-on:evtNewMediaVariables = \"emitNewAudioVariable\" \n                        v-on:evtNewVarName = \"emitAudioVarNameChange\"\n                        v-on:evtAdd = \"emitAddAudioToPage\"\n                        v-on:evtDelete = \"emitRemoveAudio\"></upload-list> \n        </div>\n    </div>\n</template>\n\n<script>\nimport Upload_List from './Upload_List.vue'\n\nexport default {\n    name: 'media-sidebar',\n\n    components: {\n        'upload-list': Upload_List,\n    },\n\n    props: {\n        status: String,\n        imageVars: Map,\n        audioVars: Map\n    },\n\n    data() {\n        return {\n            hidden: true,\n        }\n    },\n\n    created: function() {\n    },\n\n    methods: {\n        // event: {files, names}\n        processImages: function(event) {\n            var files = event.files;\n            var data = event.data;\n\n            for(var i = 0; i < files.length; i++) {\n                var f = files[i];\n\n                var blob = new Blob([f], { type: f.type});\n                var src = URL.createObjectURL(blob);\n                var t = 'image';\n                \n                var mediaName = '';\n                for(var j = 0; j < data.length; j++) {\n                    if(data[j].fileName == f.name) {\n                        mediaName = data[j].varName;\n                    }\n                }\n                \n                // file: File object\n                // fileName: name of file\n                // varName: variable name associated with file\n                // path: file url\n                // type: 'image'\n                // id: unique id generated before adding media to page\n                this.allImages.push({file: f, fileName: f.name, varName: mediaName, path: src, type: t, id: \"\", storeStatus: \"new\"});\n            }\n\n            this.allImages = this.allImages.filter(function(img) {\n                if(img.path != null) {\n                    return img;\n                }\n            });\n\n            this.$emit(\"evtImageUpdate\", this.allImages);\n        },\n\n        // event: {files, data}\n        processAudio: function(event) {\n            var files = event.files;\n            var data = event.data;\n\n            this.allAudio = [];\n\n            for(var i = 0; i < files.length; i++) {\n                var f = files[i];\n\n                var blob = new Blob([f], { type: f.type});\n                var src = URL.createObjectURL(blob);\n                var t = 'audio';\n                \n                var mediaName = '';\n                for(var j = 0; j < data.length; j++) {\n                    if(data[j].fileName == f.name) {\n                        mediaName = data[j].varName;\n                    }\n                }\n                \n                // fileName: name of file\n                // varName: variable name associated with file\n                // path: file url\n                // type: 'audio'\n                // id: unique id generated before adding media to page\n                this.allAudio.push({file: f, fileName: f.name, varName: mediaName, path: src, type: t, id: \"\"});\n            }\n            this.$emit(\"evtAudioUpdate\", this.allAudio);\n        },\n\n        // event: {prevName, newName}\n        emitAudioVarNameChange: function(event){\n            this.$emit(\"evtAudioNameChange\", event);\n        },\n\n        // event: {prevName, newName}\n        emitImageVarNameChange: function(event){\n            this.$emit(\"evtImageNameChange\", event);\n        },\n\n        // event: varArr = {name, file, fileName, path, color, id}\n        emitNewImageVariable: function(event){\n            this.$emit(\"evtNewImageVariable\", event);\n        },\n\n        // event: varArr = {name, file, fileName, path, color, id}\n        emitNewAudioVariable: function(event){\n            this.$emit(\"evtNewAudioVariable\", event);\n        },\n\n        // event: {name, data: {file, fileName, path}}\n        replaceImage(event){\n            this.$emit(\"evtReplaceImage\", event);\n        },\n\n        // event: {name, data: {file, fileName, path}}\n        replaceAudio(event){\n            this.$emit(\"evtReplaceAudio\", event);\n        },\n\n        // event: {name, fileName}\n        emitAddImageToPage: function(event) {\n            this.$emit(\"evtAddImage\", event);\n        },\n\n        // event: {name, fileName}\n        emitAddAudioToPage: function(event) {\n            this.$emit(\"evtAddAudio\", event);\n        },\n\n        // event: {name, fileName}\n        emitRemoveImage: function(event) {\n            this.$emit(\"evtRemoveImage\", event);\n\n            /* if(event.type == \"image\") {\n                this.allImages = this.allImages.filter(function(imageData) {\n                    if(imageData.fileName != event.fileName) {\n                        return imageData;\n                    }\n                });\n            }\n            if(event.type == \"audio\") {\n                this.allAudio = this.allAudio.filter(function(audioData) {\n                    if(audioData.fileName != event.fileName) {\n                        return audioData;\n                    }\n                });\n            } */\n            //this.allMedia = [];\n            //this.allMedia = this.allImages.concat(this.allAudio);\n        },\n\n        emitDispVars: function() {\n            this.hidden = !this.hidden;\n            this.$emit(\"evtDispVars\", {disp: this.hidden});\n        },\n\n        // event: {name, fileName}\n        emitRemoveAudio: function(event){\n            this.$emit(\"evtRemoveAudio\", event);\n        }\n    }\n}\n</script>\n\n<style scoped>\n#media_sidebar {\n    text-align: center;\n    padding: 5px;\n}\n\ninput[type=\"file\"] {\n    display: none;\n}\n\n#spacer {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n}\n\n.list {\n    padding: 10px;\n}\n</style>"]}]}