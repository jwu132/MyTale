{"remainingRequest":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/components/search/searchSort.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/src/components/search/searchSort.vue","mtime":1604698071246},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/justinwu/Desktop/Gitlab_MyTale/mytale/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgVHlwZXNlbnNlSW5zdGFudFNlYXJjaEFkYXB0ZXIgZnJvbSAidHlwZXNlbnNlLWluc3RhbnRzZWFyY2gtYWRhcHRlciI7CmltcG9ydCAnaW5zdGFudHNlYXJjaC5jc3MvdGhlbWVzL2FsZ29saWEtbWluLmNzcyc7CmltcG9ydCBzdG9yeU1peGluIGZyb20gIkAvbWl4aW5zL3N0b3J5TWl4aW4iCmltcG9ydCBicm93c2VyRWRpdG9yTWl4aW4gZnJvbSAiQC9taXhpbnMvYnJvd3NlckVkaXRvck1peGluIgppbXBvcnQgc3RhdGVNYW5hZ2VyIGZyb20gIkAvbWl4aW5zL1N0YXRlTWFuYWdlciIKaW1wb3J0IHVzZXJNaXhpbiBmcm9tICJAL21peGlucy91c2VyTWl4aW4iCgogCmNvbnN0IHR5cGVzZW5zZUluc3RhbnRzZWFyY2hBZGFwdGVyID0gbmV3IFR5cGVzZW5zZUluc3RhbnRTZWFyY2hBZGFwdGVyKHsKICBzZXJ2ZXI6IHsKICAgIC8vIEJlIHN1cmUgdG8gdXNlIHRoZSBzZWFyY2gtb25seS1hcGkta2V5CiAgICAvL2FwaUtleTogIkkyWFBRRUZIWlJhNzRCZ3YxdHBBc3dmSnI4anhuaEo5IiwgCiAgICAvL2FwaUtleTogIllPWUNwRkxqOXU0MTJpaGlnc3RDZXI1WnMyU3R6cHRSIiwgCiAgICBhcGlLZXk6ICJuZllyNUkwOG9LWkRqVnhhcEdTcmZGWXF4S0tJNHJGUCIsCiAgICBub2RlczogWwogICAgICB7CiAgICAgICAgLy9ob3N0OiAibG9jYWxob3N0IiwKICAgICAgICAvLyBob3N0OiAidmNtLTE1NDMxLnZtLmR1a2UuZWR1IiwKICAgICAgICAvLyBwb3J0OiAiODEwOCIsCiAgICAgICAgLy8gcHJvdG9jb2w6ICJodHRwcyIKICAgICAgICBob3N0OiAnYXYyeHJraTZ5NTRobDN3YnAtMS5hMS50eXBlc2Vuc2UubmV0JywKICAgICAgICBwb3J0OiAnNDQzJywKICAgICAgICBwcm90b2NvbDogJ2h0dHBzJywKICAgICAgfQogICAgXQogIH0sCiAgYWRkaXRpb25hbFNlYXJjaFBhcmFtZXRlcnM6IHsKICAgIHF1ZXJ5Qnk6ICJ0aXRsZSxhdXRob3IsdGFncyIsCiAgfQp9KTsKY29uc3Qgc2VhcmNoQ2xpZW50ID0gdHlwZXNlbnNlSW5zdGFudHNlYXJjaEFkYXB0ZXIuc2VhcmNoQ2xpZW50OwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hDbGllbnQsCiAgICAgIGNsaWNrZWQxOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikgPT09ICdwYXJlbnQnLAogICAgICBjbGlja2VkMjogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpID09PSAndGVhY2hlcicsCiAgICAgIGNsaWNrZWQzOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikgPT09ICd0aGVyYXBpc3QnLAogICAgICBjbGlja2VkNDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpID09PSAnJyB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikgPT09IG51bGwsCiAgICAgIHN0b3J5Q29tbWVudHM6W10sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdG9nZ2xlVGFncygpewogICAgICB0aGlzLnRhZ3NPbiA9ICF0aGlzLnRhZ3NPbjsKICAgIH0sCiAgfSwKICBtaXhpbnM6IFtzdG9yeU1peGluLCBzdGF0ZU1hbmFnZXIsIGJyb3dzZXJFZGl0b3JNaXhpbiwgdXNlck1peGluXSwgCn07Cg=="},{"version":3,"sources":["searchSort.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"searchSort.vue","sourceRoot":"src/components/search","sourcesContent":["<template>\n<div>\n  <!--<h1 style=\"text-align:center\">I'm a...</h1>-->\n    <v-card flat class=\"justify-center grey lighten-5\">\n      <v-card-actions class=\"justify-center\">\n        <v-btn class=\"button\" v-on:click=\"setUser('parent'), clicked1=true, clicked2=clicked3=clicked4=false\" \n            v-bind:class=\"{'orange white--text': clicked1}\">Parent</v-btn> \n        <v-btn class=\"button\" v-on:click=\"setUser('teacher'),clicked2=true, clicked1=clicked3=clicked4=false\" \n            v-bind:class=\"{'orange white--text': clicked2}\">Teacher</v-btn>\n        <v-btn class=\"button\" v-on:click=\"setUser('therapist'),clicked3=true, clicked1=clicked2=clicked4=false\" \n            v-bind:class=\"{'orange white--text': clicked3}\">Therapist</v-btn>\n        <v-btn class=\"button\" v-on:click=\"setUser(''),clicked4=true, clicked1=clicked2=clicked3=false\" \n            v-bind:class=\"{'orange white--text': clicked4}\">General User</v-btn>\n      </v-card-actions>\n    </v-card>\n    <br>\n  <ais-instant-search :search-client=\"searchClient\" index-name=\"stories\">\n    <div class=\"left-panel\">\n      <ais-clear-refinements />\n      <h2>Tags</h2>\n      <ais-refinement-list attribute=\"tags\" :sort-by=\"['name:asc']\" searchable show-more :show-more-limit=\"20\" \n      :transformItems=\"transformTags\"/>\n    </div>\n\n    <div class=\"right-panel\">\n      <ais-search-box/>\n      <br>\n        <ais-sort-by :items=\"[\n          {value:'stories/', label:'Popularity'},\n          {value:'stories/sort/dateNow:desc', label:'Newest'}\n          ]\"\n        >\n        </ais-sort-by>\n      <ais-hits :transformItems=\"transformItems\">\n        <div slot-scope=\"{ items }\">\n          <v-card v-for=\"(item, i) in items\" :key=\"i\" class=\"single-story brown lighten-5\">\n            <v-card-title id=\"hits-title\">\n              <div>\n                <router-link :to=\"{name: 'Story', params: {title:removeTitleSpaces(item.title), id: item.id}}\" class=\"story-links\"><span class=\"story-title\">{{item.title}}</span></router-link>\n                <span class=\"story-author font-weight-light\">  by {{item.author}} </span>\n              </div>\n              <v-spacer></v-spacer>\n              <div>\n                <v-btn fab small class=\"mr-2 elevation-3\" title=\"View in Browser\" v-on:click=\"updateViewsBrowser(item)\">\n                  <v-icon color=\"orange darken-2\">mdi-eye</v-icon>\n                </v-btn> \n                <v-btn fab small class=\"mr-2 ml-1 elevation-3\" title=\"Edit Story\" v-on:click=\"updateViewsEditor(item)\">\n                  <v-icon color=\"orange darken-2\">mdi-file-document-edit</v-icon>\n                </v-btn>\n              </div>\n            </v-card-title>\n\n            <v-card-actions id=\"hits-actions\">\n            \n              <v-chip class=\"ml-2\" label color=\"orange\" text-color=\"white\" v-for=\"(storyTag, i) in item.tags\" :key=\"i\">{{item.tags[i]}}</v-chip>\n\n              <v-spacer></v-spacer>\n              \n              <span class=\"viewsDaysRating font-weight-light\">\n                {{item.views}} views | {{item.dateAdded}}\n              </span> \n            </v-card-actions>\n          </v-card>\n        </div>\n      </ais-hits>\n      <br>\n      <ais-pagination />\n    </div>\n  </ais-instant-search>\n  <div class=\"py-2\"></div>\n</div>\n</template>\n\n<script>\n\nimport TypesenseInstantSearchAdapter from \"typesense-instantsearch-adapter\";\nimport 'instantsearch.css/themes/algolia-min.css';\nimport storyMixin from \"@/mixins/storyMixin\"\nimport browserEditorMixin from \"@/mixins/browserEditorMixin\"\nimport stateManager from \"@/mixins/StateManager\"\nimport userMixin from \"@/mixins/userMixin\"\n\n \nconst typesenseInstantsearchAdapter = new TypesenseInstantSearchAdapter({\n  server: {\n    // Be sure to use the search-only-api-key\n    //apiKey: \"I2XPQEFHZRa74Bgv1tpAswfJr8jxnhJ9\", \n    //apiKey: \"YOYCpFLj9u412ihigstCer5Zs2StzptR\", \n    apiKey: \"nfYr5I08oKZDjVxapGSrfFYqxKKI4rFP\",\n    nodes: [\n      {\n        //host: \"localhost\",\n        // host: \"vcm-15431.vm.duke.edu\",\n        // port: \"8108\",\n        // protocol: \"https\"\n        host: 'av2xrki6y54hl3wbp-1.a1.typesense.net',\n        port: '443',\n        protocol: 'https',\n      }\n    ]\n  },\n  additionalSearchParameters: {\n    queryBy: \"title,author,tags\",\n  }\n});\nconst searchClient = typesenseInstantsearchAdapter.searchClient;\n\nexport default {\n  data() {\n    return {\n      searchClient,\n      clicked1: sessionStorage.getItem(\"user\") === 'parent',\n      clicked2: sessionStorage.getItem(\"user\") === 'teacher',\n      clicked3: sessionStorage.getItem(\"user\") === 'therapist',\n      clicked4: sessionStorage.getItem(\"user\") === '' || sessionStorage.getItem(\"user\") === null,\n      storyComments:[],\n    };\n  },\n  methods: {\n    toggleTags(){\n      this.tagsOn = !this.tagsOn;\n    },\n  },\n  mixins: [storyMixin, stateManager, browserEditorMixin, userMixin], \n};\n</script>\n\n<style scoped>\n.single-story {\n  padding: 8px 8px 15px 8px;\n  margin-top: 20px;\n  margin-left: 5px;\n  margin-right: 5px;\n  box-sizing: border-box;\n  font-style: normal;\n}\n\n.story-title {\n  font-family: Playfair Display;\n  letter-spacing: 0.5px;\n  font-size: 24px;\n}\n\n.story-links {\n  text-decoration: none;\n  color: black;\n}\n\n.story-links:hover {\n  text-decoration: underline;\n}\n\n.story-author {\n  font-size: 17px;\n}\n\n.viewsDaysRating {\n  font-size: 17px;\n}\n\n.ais-Hits-list {\n  margin-top: 0;\n  margin-bottom: 1em;\n}\n\n.ais-InstantSearch {\n  display: grid;\n  grid-template-columns: 1fr 4fr;\n  grid-gap: 2em;\n}\n\n.left-panel {\n  margin-left: 80px;\n}\n\n.right-panel {\n  margin-right: 80px;\n}\n\n#hits-title {\n  padding-bottom: 12px !important;\n}\n\n#hits-actions {\n  padding-top: 0px !important;\n}\n\n.comments-tags {\n  margin-left: 15px;\n}\n.button {\n  border: none;\n  padding: 4px 10px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  font-size: 14px;\n  margin: 0px 2px 4px 2px;\n  margin-right: 12px;\n  cursor: pointer;\n  border-radius: 12px;\n  width: 15%;\n}\n\n</style>\n"]}]}