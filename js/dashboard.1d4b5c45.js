(function(t){function e(e){for(var r,s,o=e[0],l=e[1],c=e[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);m&&m(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(r=!1)}r&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},i={dashboard:0},n=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/MyTale/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var m=l;n.push([6,"chunk-vendors","chunk-common"]),a()})({6:function(t,e,a){t.exports=a("e804")},"75b7":function(t,e,a){"use strict";var r=a("7d6d"),i=a.n(r);i.a},"7d6d":function(t,e,a){},adde:function(t,e,a){"use strict";var r=a("b0b7"),i=a.n(r);i.a},b0b7:function(t,e,a){},e804:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("NavBar"),a("v-main",[a("div",{attrs:{id:"content"}},[a("router-view")],1)])],1)},n=[],s=a("35e0"),o=a("23e8"),l={title:"MyTale - Make Your Own Social Stories",components:{NavBar:s["a"]},data:function(){return{}},created:function(){this.storageAvailable("sessionStorage")?(console.log("SESSION STORAGE EXISTS"),this.$store.commit("updateDirectory",{searchLocation:sessionStorage.getItem("storyLocation")}),this.$store.commit("updateContent",{content:sessionStorage.getItem("storyContent")})):console.log("NO SESSION STORAGE")},mixins:[o["a"]]},c=l,m=(a("adde"),a("2877")),u=a("6544"),d=a.n(u),v=a("7496"),f=a("f6c4"),y=Object(m["a"])(c,i,n,!1,null,null,null),p=y.exports;d()(y,{VApp:v["a"],VMain:f["a"]});var h=a("402c"),b=a("4360"),V=a("b84b"),g=a("8aa5"),C=a.n(g),_=(a("1543"),a("0ff2")),S=a("8c4f"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"blue-grey lighten-5"},[t.isVerified?a("div",{staticClass:"user-profile"},[a("div",{staticClass:"py-3"}),a("v-card",{staticClass:"container",attrs:{flat:""}},[a("v-card-title",[t._v(" Welcome back, "+t._s(this.userName)+" "),a("v-spacer"),a("v-btn",{attrs:{small:"",outlined:""},on:{click:t.logout}},[t._v("Logout")])],1)],1),a("br"),a("v-card",{staticClass:"container",attrs:{flat:""}},[a("v-card-title",{staticClass:"pb-0"},[t._v("My Stories")]),a("v-list",{attrs:{"two-line":""}},[a("v-row",t._l(t.myStories,(function(e){return a("v-col",{key:e[".key"],attrs:{cols:"12",md:"6"}},[a("v-list-item",{staticClass:"storyEntry"},[a("v-list-item-content",{staticClass:"pa-0"},[a("router-link",{staticClass:"storyLinks",attrs:{to:{name:"Story",params:{title:t.removeTitleSpaces(e.title),id:e.id}}}},[a("v-list-item-title",[t._v(t._s(e.title))])],1),a("v-list-item-subtitle",[t._v("Created on "+t._s(e.dateAdded)+" Views: "+t._s(e.views))])],1)],1)],1)})),1)],1)],1),a("br"),a("v-card",{staticClass:"container",attrs:{flat:""}},[a("v-card-title",{staticClass:"pb-0"},[t._v("Story Drafts")]),t._l(t.myStoryDrafts,(function(e){return a("v-list",{key:e[".key"],attrs:{"two-line":""}},t._l(Object.keys(e),(function(r){return a("v-list-item",{key:r[".key"],staticClass:"storyEntry"},[a("v-list-item-content",{staticClass:"pa-0"},[a("v-list-item-title",[a("strong",[t._v(t._s(r))])]),a("v-list-item-subtitle",[t._v("Updated on "+t._s(e[r].dateUpdated))])],1),a("v-list-item-action",{staticClass:"draft-actions"},[a("v-btn",{attrs:{title:"Edit Draft",icon:""},on:{click:function(a){return t.goToEditor(e[r].text,e[r].OGstory)}}},[a("v-icon",[t._v("mdi-pencil")])],1)],1),a("v-list-item-action",{staticClass:"draft-actions"},[a("v-btn",{attrs:{title:"Delete Draft",icon:""},on:{click:function(e){return t.removeStoryDrafts(r)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1)],1)})),1)}))],2),a("br"),a("v-card",{staticClass:"container",attrs:{flat:""}},[a("v-card-title",{staticClass:"pb-0"},[t._v("My Comments")]),a("v-list",{attrs:{"two-line":""}},t._l(t.myComments,(function(e){return a("v-list-item",{key:e[".key"],staticClass:"comment"},[t.currentlyEditing&&e.commentKey===t.editCommentKey?t._e():a("v-list-item-content",[a("v-list-item-title",{staticClass:"text-wrap"},[t._v(t._s(e.comment))]),a("v-list-item-subtitle",[t._v(" "+t._s(e.storyTitle)+" "+t._s(e.dateAdded)+" ")])],1),t.currentlyEditing&&e.commentKey===t.editCommentKey?t._e():a("v-list-item-action",{staticClass:"comment-actions"},[a("v-btn",{attrs:{title:"Edit Comment",icon:""},on:{click:function(a){return t.confirmEdit(e.commentKey,e.comment)}}},[a("v-icon",[t._v("mdi-pencil")])],1)],1),t.currentlyEditing&&e.commentKey===t.editCommentKey?t._e():a("v-list-item-action",{staticClass:"comment-actions"},[a("v-btn",{attrs:{title:"Remove Comment",icon:""},on:{click:function(a){return t.removeComment(e.commentKey,t.userID)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1),e.commentKey===t.editCommentKey?a("v-list-item-content",[a("form",{staticClass:"edit-comment"},[a("v-text-field",{attrs:{width:"100%"},model:{value:t.commentEdit,callback:function(e){t.commentEdit=e},expression:"commentEdit"}}),a("v-btn",{staticClass:"mb-2",attrs:{outlined:"",small:""},on:{click:function(a){return t.editComment(e.commentKey,t.userID,t.commentEdit)}}},[t._v("Submit")])],1)]):t._e()],1)})),1)],1),a("br"),a("userVariables",{key:t.reloadKey,on:{evtSaveVar:t.saveNewVar,evtSubmit:t.submitForm,evtDelVar:t.deleteVar}}),a("div",{staticClass:"py-10"})],1):t._e(),t.isVerified?t._e():a("div",{staticClass:"not-logged-in"},[a("p",[t._v("Please log in or verify your account")])])])},N=[],k=(a("4160"),a("b0c0"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("159b"),a("ddb0"),a("2b3d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"container",attrs:{flat:""}},[a("v-card-title",[t._v("My Story Variables")]),a("v-card-text",[a("v-form",[t._l(t.myProfile.length,(function(e){return a("v-row",{key:e[".key"]},[a("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"11"}},[a("v-text-field",{attrs:{label:t.myVarNames[e-1]},model:{value:t.myProfile[e-1],callback:function(a){t.$set(t.myProfile,e-1,a)},expression:"myProfile[n-1]"}})],1),a("v-col",{staticClass:"pt-0 pb-0 mt-5",attrs:{cols:"1"}},[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(a){return t.emitDelVar(e)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1)],1)})),a("v-btn",{attrs:{outlined:""},on:{click:function(e){t.openNew=!t.openNew}}},[t._v("Add New Variable")]),t.openNew?a("v-row",{staticClass:"newVar"},[a("v-col",{attrs:{cols:"5.5"}},[a("v-text-field",{attrs:{label:"Name"},model:{value:t.newVarName,callback:function(e){t.newVarName=e},expression:"newVarName"}})],1),a("v-col",{attrs:{cols:"5.5"}},[a("v-text-field",{attrs:{label:"Value"},model:{value:t.newVarVal,callback:function(e){t.newVarVal=e},expression:"newVarVal"}})],1),a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{outlined:"",fab:"",small:""},on:{click:t.emitSaveVar}},[a("v-icon",[t._v("mdi-check")])],1)],1)],1):t._e(),a("br"),a("v-btn",{staticClass:"mt-2",attrs:{outlined:""},on:{click:t.emitSubmit}},[t._v("Save")]),a("div",{attrs:{id:"formMsg"}})],2)],1)],1)}),E=[],x=a("48c3"),I={data:function(){return{userID:C.a.auth().currentUser.uid,myVarNames:[],myProfile:[],openNew:!1,newVarName:"",newVarVal:""}},methods:{emitSaveVar:function(){this.$emit("evtSaveVar",{varName:this.newVarName,varVal:this.newVarVal,varNames:this.myVarNames,profile:this.myProfile})},emitSubmit:function(){this.$emit("evtSubmit",{varNames:this.myVarNames,profile:this.myProfile})},emitDelVar:function(t){this.$emit("evtDelVar",{varName:this.myVarNames[t-1],varNames:this.myVarNames,profile:this.myProfile})}},created:function(){C.a.auth().currentUser&&(this.isVerified=C.a.auth().currentUser.emailVerified),this.myVarNames=this.getVarNames(this.userID),this.myProfile=this.getVarVals(this.userID)},mixins:[x["a"]]},O=I,D=a("8336"),T=a("b0af"),P=a("99d9"),U=a("62ad"),K=a("4bd4"),M=a("132d"),j=a("0fd9"),L=a("8654"),A=Object(m["a"])(O,k,E,!1,null,"1c090cd6",null),$=A.exports;d()(A,{VBtn:D["a"],VCard:T["a"],VCardText:P["c"],VCardTitle:P["d"],VCol:U["a"],VForm:K["a"],VIcon:M["a"],VRow:j["a"],VTextField:L["a"]});var R=a("8b4c"),B={data:function(){return{userID:C.a.auth().currentUser.uid,userEmail:C.a.auth().currentUser.email,userName:C.a.auth().currentUser.displayName,myComments:[],myStories:[],myStoryDrafts:[],hasStories:!1,isVerified:!1,reloadKey:0,editCommentKey:"",commentEdit:"",currentlyEditing:!1}},components:{userVariables:$},methods:{logout:function(){C.a.auth().signOut().then((function(){location.replace("account.html")}))},submitForm:function(t){var e,a={};for(e=0;e<t.profile.length;e++)a[t.varNames[e]]=t.profile[e];var r={};r["/accounts/"+C.a.auth().currentUser.uid+"/profile"]=a,C.a.database().ref().update(r),document.getElementById("formMsg").innerHTML="Your story variables have been successfully updated."},saveNewVar:function(t){var e,a={};for(e=0;e<t.profile.length;e++)a[t.varNames[e]]=t.profile[e];a[t.varName]=t.varVal;var r={};r["/accounts/"+C.a.auth().currentUser.uid+"/profile"]=a,C.a.database().ref().update(r),this.reloadKey+=1},deleteVar:function(t){if(confirm("Are you sure you want to delete this variable?")){var e,a={};for(e=0;e<t.profile.length;e++)a[t.varNames[e]]=t.profile[e];a[t.varName]=null;var r={};r["/accounts/"+C.a.auth().currentUser.uid+"/profile"]=a,C.a.database().ref().update(r),this.reloadKey+=1}},getStoryDrafts:function(){var t=[],e=C.a.storage().ref(this.userEmail);return e.listAll().then((function(e){e.prefixes.forEach((function(e){var a={name:"",date:""};a.name=e.name,e.listAll().then((function(e){e.items.forEach((function(e){e.getMetadata().then((function(e){var r=e.updated.substring(0,10);r=r.substring(5,7)+"/"+r.substring(8,10)+"/"+r.substring(0,4),a.date=r,t.push(a)}))}))}))}))})),t},goToEditor:function(t,e){sessionStorage.setItem("createTemplate",""),sessionStorage.setItem("OGstoryPassages",e),sessionStorage.setItem("storyLocation",""),sessionStorage.setItem("storyContent",t);var a=document.createElement("a");a.href="editor.html",a.click(),URL.revokeObjectURL(a.href)},confirmEdit:function(t,e){this.editCommentKey=t,this.commentEdit=e,this.currentlyEditing=!0}},created:function(){C.a.auth().currentUser&&(this.isVerified=C.a.auth().currentUser.emailVerified),this.myStories=this.retrieveUserStories(this.userEmail),this.myStoryDrafts=this.getStoriesWithDrafts(this.userID),this.myComments=this.getUserComments(this.userID),null==this.userName&&(this.userName=C.a.auth().currentUser.email)},mixins:[x["a"],R["a"]]},F=B,G=(a("75b7"),a("8860")),J=a("da13"),W=a("1800"),Y=a("5d23"),H=a("2fa4"),X=Object(m["a"])(F,w,N,!1,null,"eb392646",null),q=X.exports;d()(X,{VApp:v["a"],VBtn:D["a"],VCard:T["a"],VCardTitle:P["d"],VCol:U["a"],VIcon:M["a"],VList:G["a"],VListItem:J["a"],VListItemAction:W["a"],VListItemContent:Y["a"],VListItemSubtitle:Y["b"],VListItemTitle:Y["c"],VRow:j["a"],VSpacer:H["a"],VTextField:L["a"]});var z=a("8ed9"),Q=[{path:"/",name:"userProfile",component:q},{path:"/story/:title/:id",name:"Story",component:z["a"],params:!0}];r["a"].mixin(V["a"]),r["a"].use(_["a"]),r["a"].use(S["a"]),r["a"].config.productionTip=!1;var Z,tt=new S["a"]({routes:Q});C.a.auth().onAuthStateChanged((function(){Z||(Z=new r["a"]({vuetify:h["a"],store:b["a"],router:tt,render:function(t){return t(p)}}).$mount("#app"))}))}});
//# sourceMappingURL=dashboard.1d4b5c45.js.map