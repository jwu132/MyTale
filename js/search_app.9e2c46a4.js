(function(t){function e(e){for(var r,i,o=e[0],c=e[1],l=e[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],r=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(r=!1)}r&&(n.splice(e--,1),t=i(i.s=s[0]))}return t}var r={},a={search_app:0},n=[];function i(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=r,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/MyTale/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([1,"chunk-vendors","chunk-common"]),s()})({"0e13":function(t,e,s){"use strict";var r=s("4afb"),a=s.n(r);a.a},1:function(t,e,s){t.exports=s("3485")},2:function(t,e){},3485:function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("NavBar"),s("v-main",[s("div",{attrs:{id:"content"}},[s("router-view")],1)])],1)},n=[],i=s("35e0"),o=s("23e8"),c={title:"MyTale - Make Your Own Social Stories",components:{NavBar:i["a"]},data:function(){return{}},mixins:[o["a"]],methods:{},created:function(){this.storageAvailable("sessionStorage")?(console.log("SESSION STORAGE EXISTS"),this.$store.commit("updateDirectory",{searchLocation:sessionStorage.getItem("storyLocation")}),this.$store.commit("updateContent",{content:sessionStorage.getItem("storyContent")})):console.log("NO SESSION STORAGE")}},l=c,u=(s("ef81"),s("2877")),d=s("6544"),f=s.n(d),g=s("7496"),h=s("f6c4"),p=Object(u["a"])(l,a,n,!1,null,null,null),m=p.exports;f()(p,{VApp:g["a"],VMain:h["a"]});var v=s("402c"),b=s("0756"),y=s("4360"),S=(s("1543"),s("b84b")),w=s("28dd"),k=s("0ff2"),_=s("8aa5"),I=s.n(_),C=s("8c4f"),T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"search-bar"}},[s("header",{staticClass:"font-weight-light"},[t._v(" SEARCH FOR A STORY HERE ")]),s("search-sorting")],1)},O=[],x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",{staticClass:"justify-center grey lighten-5",attrs:{flat:""}},[s("v-card-actions",{staticClass:"justify-center"},[s("v-btn",{staticClass:"button",class:{"orange white--text":t.clicked1},on:{click:function(e){t.setUser("parent"),t.clicked1=!0,t.clicked2=t.clicked3=t.clicked4=!1}}},[t._v("Parent")]),s("v-btn",{staticClass:"button",class:{"orange white--text":t.clicked2},on:{click:function(e){t.setUser("teacher"),t.clicked2=!0,t.clicked1=t.clicked3=t.clicked4=!1}}},[t._v("Teacher")]),s("v-btn",{staticClass:"button",class:{"orange white--text":t.clicked3},on:{click:function(e){t.setUser("therapist"),t.clicked3=!0,t.clicked1=t.clicked2=t.clicked4=!1}}},[t._v("Therapist")]),s("v-btn",{staticClass:"button",class:{"orange white--text":t.clicked4},on:{click:function(e){t.setUser(""),t.clicked4=!0,t.clicked1=t.clicked2=t.clicked3=!1}}},[t._v("General User")])],1)],1),s("br"),s("ais-instant-search",{attrs:{"search-client":t.searchClient,"index-name":"stories"}},[s("div",{staticClass:"left-panel"},[s("ais-clear-refinements"),s("h2",[t._v("Tags")]),s("ais-refinement-list",{attrs:{attribute:"tags","sort-by":["name:asc"],searchable:"","show-more":"","show-more-limit":20,transformItems:t.transformTags}})],1),s("div",{staticClass:"right-panel"},[s("ais-search-box"),s("br"),s("ais-sort-by",{attrs:{items:[{value:"stories/",label:"Popularity"},{value:"stories/sort/dateNow:desc",label:"Newest"}]}}),s("ais-hits",{attrs:{transformItems:t.transformItems},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.items;return s("div",{},t._l(r,(function(e,r){return s("v-card",{key:r,staticClass:"single-story brown lighten-5"},[s("v-card-title",{attrs:{id:"hits-title"}},[s("div",[s("router-link",{staticClass:"story-links",attrs:{to:{name:"Story",params:{title:t.removeTitleSpaces(e.title),id:e.id}}}},[s("span",{staticClass:"story-title"},[t._v(t._s(e.title))])]),s("span",{staticClass:"story-author font-weight-light"},[t._v(" by "+t._s(e.author)+" ")])],1),s("v-spacer"),s("div",[s("v-btn",{staticClass:"mr-2 elevation-3",attrs:{fab:"",small:"",title:"View in Browser"},on:{click:function(s){return t.updateViewsBrowser(e)}}},[s("v-icon",{attrs:{color:"orange darken-2"}},[t._v("mdi-eye")])],1),s("v-btn",{staticClass:"mr-2 ml-1 elevation-3",attrs:{fab:"",small:"",title:"Edit Story"},on:{click:function(s){return t.updateViewsEditor(e)}}},[s("v-icon",{attrs:{color:"orange darken-2"}},[t._v("mdi-file-document-edit")])],1)],1)],1),s("v-card-actions",{attrs:{id:"hits-actions"}},[t._l(e.tags,(function(r,a){return s("v-chip",{key:a,staticClass:"ml-2",attrs:{label:"",color:"orange","text-color":"white"}},[t._v(t._s(e.tags[a]))])})),s("v-spacer"),s("span",{staticClass:"viewsDaysRating font-weight-light"},[t._v(" "+t._s(e.views)+" views | "+t._s(e.dateAdded)+" ")])],2)],1)})),1)}}])}),s("br"),s("ais-pagination")],1)]),s("div",{staticClass:"py-2"})],1)},j=[],E=s("7ea0"),M=s.n(E),V=(s("c2ca"),s("8b4c")),P=s("83ca"),U=(s("4de4"),s("caad"),s("a434"),s("ac1f"),s("2532"),s("1276"),{methods:{transformItems:function(t){return"teacher"===sessionStorage.getItem("user")?t=t.filter((function(t){return t.tags.includes("School")||t.tags.includes("Homework")||t.tags.includes("Friends")||t.tags.includes("Teacher")})):"parent"===sessionStorage.getItem("user")?t=t.filter((function(t){return t.tags.includes("Responsibility")||t.tags.includes("Manners")||t.tags.includes("Behavior")||t.tags.includes("Home")||t.tags.includes("Parent")})):"therapist"===sessionStorage.getItem("user")&&(t=t.filter((function(t){return t.tags.includes("Behavior")||t.tags.includes("Manners")||t.tags.includes("Socializing")||t.tags.includes("Tragedy")||t.tags.includes("Therapist")}))),sessionStorage.getItem("user")!==sessionStorage.getItem("prevUser")&&this.storeTags(t),t},storeTags:function(t){for(var e=[],s=0;s<t.length;s++)e.push(t[s].tags);sessionStorage.setItem("tags",e),sessionStorage.setItem("prevUser",sessionStorage.getItem("user"))},transformTags:function(t){var e=this;if(null!==sessionStorage.getItem("tags")){t=t.filter((function(t){return!0===e.includesTag(t.value)}));for(var s=sessionStorage.getItem("tags").split(","),r=function(e){t[e].count=s.filter((function(s){return s===t[e].value})).length},a=0;a<t.length;a++)r(a);for(var n=0;n<t.length;n++)0===t[n].count&&t.splice(n,1)}return t},includesTag:function(t){return sessionStorage.getItem("tags").includes(t)},setUser:function(t){sessionStorage.setItem("prevUser",sessionStorage.getItem("user")),sessionStorage.setItem("user",t)}}}),R=new M.a({server:{apiKey:"nfYr5I08oKZDjVxapGSrfFYqxKKI4rFP",nodes:[{host:"av2xrki6y54hl3wbp-1.a1.typesense.net",port:"443",protocol:"https"}]},additionalSearchParameters:{queryBy:"title,author,tags"}}),$=R.searchClient,A={data:function(){return{searchClient:$,clicked1:"parent"===sessionStorage.getItem("user"),clicked2:"teacher"===sessionStorage.getItem("user"),clicked3:"therapist"===sessionStorage.getItem("user"),clicked4:""===sessionStorage.getItem("user")||null===sessionStorage.getItem("user"),storyComments:[]}},methods:{toggleTags:function(){this.tagsOn=!this.tagsOn}},mixins:[V["a"],o["a"],P["a"],U]},B=A,H=(s("0e13"),s("8336")),L=s("b0af"),D=s("99d9"),N=s("cc20"),F=s("132d"),G=s("2fa4"),K=Object(u["a"])(B,x,j,!1,null,"235310b8",null),Y=K.exports;f()(K,{VBtn:H["a"],VCard:L["a"],VCardActions:D["a"],VCardTitle:D["d"],VChip:N["a"],VIcon:F["a"],VSpacer:G["a"]});var q={components:{"search-sorting":Y},data:function(){return{}},methods:{},created:function(){}},J=q,z=(s("cbc7"),Object(u["a"])(J,T,O,!1,null,"45393ac6",null)),X=z.exports,Z=s("8ed9"),Q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},W=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("img",{attrs:{id:"story"}})])}],tt=(s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),s("bc3a")),et=s.n(tt),st={data:function(){return{storyID:"",storyHTMLDirectory:"",givenStory:{}}},methods:{browserView:function(t){et.a.get(t).then((function(t){var e=new Blob([t.data],{type:"text/html"}),s=URL.createObjectURL(e);document.querySelector("#story").src=s}))}},created:function(){this.storyID=this.$route.params.id,this.storyHTMLDirectory=this.$route.params.storyHTML,this.browserView(this.storyHTMLDirectory)},mixins:[V["a"]]},rt=st,at=Object(u["a"])(rt,Q,W,!1,null,"4ad0428a",null),nt=at.exports,it=[{path:"/",name:"searchSort",component:X},{path:"/story/:title/:id",name:"Story",component:Z["a"],params:!0},{path:"/view/:id/:storyHTML",name:"viewStory",component:nt,params:!0}];r["a"].mixin(S["a"]),r["a"].use(b["a"]),r["a"].use(w["a"]),r["a"].use(C["a"]),r["a"].use(k["a"]);var ot,ct=new C["a"]({routes:it});r["a"].config.productionTip=!1,I.a.auth().onAuthStateChanged((function(){ot||(ot=new r["a"]({vuetify:v["a"],store:y["a"],router:ct,render:function(t){return t(m)}}).$mount("#app"))}))},"4afb":function(t,e,s){},"9d51":function(t,e,s){},cbc7:function(t,e,s){"use strict";var r=s("9d51"),a=s.n(r);a.a},eed3:function(t,e,s){},ef81:function(t,e,s){"use strict";var r=s("eed3"),a=s.n(r);a.a}});
//# sourceMappingURL=search_app.9e2c46a4.js.map